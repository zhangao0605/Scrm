var app=angular.module("myApp",["ngRoute"]);app.run(["$rootScope","$location","$http","$timeout",function(e,a,t,o){e.link="http://"+window.location.host,e.loginTrueFalse=!0,e.states=function(e){return 1==e?"任务异常":"任务完成"},e.page2Colors=function(e){return 1==e?"page2-red":"page2-green"},e.page4Sex=function(e){return 0==e?"未知":1==e?"男":"女"},e.page4NmeSlice=function(e){return e.length>=8?e.slice(0,8)+"...":e},e.page5NmeSlice=function(e){return e.length>=8?e.slice(0,6)+"...":e}}]),app.config(["$routeProvider",function(e){e.when("/page1",{templateUrl:"view/page1.html",controller:"page1C"}).when("/page2",{templateUrl:"view/page2.html",controller:"page2C"}).when("/page3",{templateUrl:"view/page3.html",controller:"page3C"}).when("/page4",{templateUrl:"view/page4.html",controller:"page4C"}).when("/page5",{templateUrl:"view/page5.html",controller:"page5C"}).otherwise({redirectTo:"/page1"})}]),app.directive("uploadImage1",function(){return{link:function(e,a){a.on("change",function(){var t=this.files[0];if(!/image\/\w+/.test(t.type))return alert("文件必须为图片！"),!1;var o=new FileReader;o.readAsDataURL(t),o.onload=function(t){a.parent().css({background:"url("+this.result+") center no-repeat",backgroundSize:"100%"}),e.$apply()},e.pic=t})}}}),app.controller("mainC",["$rootScope","$scope","$timeout","$location","$anchorScroll","$interval","$http",function(e,a,t,o,s,n,d){var r=localStorage.getItem("sessionId"),l=localStorage.getItem("userId");null==r||void 0==r||void 0==l||null==l?(window.location.href="http://"+window.location.host+"/gcsscrm/#/page1",e.loginTrueFalse=!0):e.loginTrueFalse=!1,e.now=new Date;n(function(){e.now=new Date},1e3);a.getTop=function(a,t){e.showLoads=!1,e.Page5showLoads=!1;var n=localStorage.getItem("sessionId"),r=localStorage.getItem("userId");null==n||void 0==n||void 0==r||null==r?(window.location.href="http://"+window.location.host+"/gcsscrm/#/page1",e.loginTrueFalse=!0):d({method:"POST",url:e.link+"/gcsscrm/general/judgeSession",headers:{"Content-Type":void 0},transformRequest:angular.identity}).success(function(n){if(200==n.code)switch(e.loginTrueFalse=!1,$(".reload-yes").removeClass("active"),o.hash("page-top"+a),s(),t){case"page1":o.path("/page1");break;case"page2":o.path("/page2");break;case"page3":o.path("/page3");break;case"page4":o.path("/page4");break;case"page5":o.path("/page5");break;case"page6":o.path("/page6")}else window.location.href="http://"+window.location.host+"/gcsscrm/#/page1",e.loginTrueFalse=!0,$(".tishi").show().html("登录身份过期请再次登录")})};var i=JSON.parse(localStorage.getItem("remember-me"));null==i||void 0==i.name||void 0==i.pas||null==i.name||null==i.pas?($(".remember-me-icon").removeClass("on"),a.indexs=0,a.nameLogin="",a.pasLogin=""):($(".remember-me-icon").addClass("on"),a.nameLogin=i.name,a.pasLogin=i.pas,a.indexs=1),a.rememberLoginIn=function(){a.indexs++,a.indexs%2==0?$(".remember-me-icon").removeClass("on"):$(".remember-me-icon").addClass("on")};var c=/^[a-zA-Z0-9_]{4,16}$/;$(".Verification-user").blur(function(){1==c.test(a.nameLogin)?$(".tishi").hide():(console.log(11,a.nameLogin),$(".tishi").show().html("用户名由4到16位(字母,数字,下划线,减号)组成"))});var u=/^(?![0-9]+$)(?![a-zA-Z]+$)[0-9A-Za-z]{6,16}$/;$(".Verification-password").blur(function(){1==u.test(a.pasLogin)?$(".tishi").hide():$(".tishi").show().html("密码由6到16位(字母,数字)组成")}),a.sendMsg=function(){sessionStorage.getItem("za-session");if(0==u.test(a.pasLogin)||0==c.test(a.nameLogin))$(".tishi").show().html("用户名或密码不正确");else{var t=new FormData;t.append("username",a.nameLogin),t.append("password",a.pasLogin),d({method:"POST",url:e.link+"/gcsscrm/general/login",data:t,headers:{"Content-Type":void 0},transformRequest:angular.identity}).success(function(t){if(200==t.code){if(""==t.data.userId||""==t.data.sessionId)localStorage.removeItem("sessionId"),localStorage.removeItem("userId");else{var o=t.data.userId,s=t.data.sessionId;localStorage.setItem("sessionId",s),localStorage.setItem("userId",o)}if($(".remember-me-icon").hasClass("on")){var n=JSON.stringify({name:a.nameLogin,pas:a.pasLogin});localStorage.setItem("remember-me",n)}else localStorage.removeItem("remember-me");e.loginTrueFalse=!1,window.location.href="http://"+window.location.host+"/gcsscrm/#/page1"}else $(".tishi").show().html(t.msg)})}};var g=window.location.hash;if(""==g)$(".reload-yes").eq(0).addClass("active").siblings().removeClass("active");else{var b=g.charAt(g.length-1);$(".reload-yes").eq(b-1).addClass("active").siblings().removeClass("active")}a.modifyPassword=function(){$(".changePas").css("display","block")},a.pas1="",a.pas2="",a.changePasbutton1=function(){$(".changePas").css("display","none"),a.pas1="",a.pas2="",a.changePastishi=!1},a.changePastishi=!1;var p=/^(?![0-9]+$)(?![a-zA-Z]+$)[0-9A-Za-z]{6,16}$/;a.indexpageinout1=function(){1==p.test(a.pas1)?a.changePastishi=!1:(a.changePastishi=!0,$(".changePas-tishi").html("原密码由6到16位（字母，数字）组成"))},a.indexpageinout2=function(){1==p.test(a.pas2)?a.changePastishi=!1:(a.changePastishi=!0,$(".changePas-tishi").html("新密码由6到16位（字母，数字）组成"))},a.changePasbutton2=function(){1!=p.test(a.pas1)||1!=p.test(a.pas2)?(a.changePastishi=!0,$(".changePas-tishi").html("密码格式不正确")):d({method:"POST",url:e.link+"/gcsscrm/general/judgeSession",headers:{"Content-Type":void 0},transformRequest:angular.identity}).success(function(t){if(200==t.code){var o=new FormData;o.append("username",i.name),o.append("oldPassword",a.pas1),o.append("newPassword",a.pas2),d({method:"POST",data:o,url:e.link+"/gcsscrm/general/modifyPassword",headers:{"Content-Type":void 0},transformRequest:angular.identity}).success(function(e){200==e.code?($(".changePas").css("display","none"),a.pas1="",a.pas2="",a.changePastishi=!1):(a.changePastishi=!0,$(".changePas-tishi").html(e.msg))})}else window.location.href="http://"+window.location.host+"/gcsscrm/#/page1"})},a.logoutAll=function(){d({method:"POST",url:e.link+"/gcsscrm/general/judgeSession",headers:{"Content-Type":void 0},transformRequest:angular.identity}).success(function(e){200==e.code||(window.location.href="http://"+window.location.host+"/gcsscrm/#/page1")}),d({method:"POST",url:e.link+"/gcsscrm/general/logout",headers:{"Content-Type":void 0},transformRequest:angular.identity}).success(function(a){200==a.code&&(localStorage.removeItem("userId"),localStorage.removeItem("sessionId"),e.loginTrueFalse=!0,window.location.href="http://"+window.location.host+"/gcsscrm/#/page1")})}}]),app.controller("page1C",["$rootScope","$scope","$http","$timeout",function($rootScope,$scope,$http,$timeout){$rootScope.mainShow=!0,$rootScope.changePas=!1;var getlocalSession=localStorage.getItem("sessionId"),getlocalUserId=localStorage.getItem("userId");$scope.page1UserIdImportant=getlocalUserId,null==getlocalSession||void 0==getlocalSession||void 0==getlocalUserId||null==getlocalUserId?(window.location.href="http://"+window.location.host+"/gcsscrm/#/page1",$rootScope.loginTrueFalse=!0):$http({method:"POST",url:$rootScope.link+"/gcsscrm/general/judgeSession",headers:{"Content-Type":void 0},transformRequest:angular.identity}).success(function(e){200==e.code?setTimeout(function(){var e=new FormData;e.append("accountId",$scope.page1UserIdImportant),$http({method:"POST",url:$rootScope.link+"/gcsscrm/general/getAllWeChat",data:e,headers:{"Content-Type":void 0},transformRequest:angular.identity}).success(function(e){200==e.code?$scope.sendWechatIdsAll=e.data.weChats:($(".alert2").show(300).find(".alertCon").html("页面初始化失败，请刷新页面或再次登陆"),setTimeout(function(){$(".alert2").hide(300)},2e3))});var a=new FormData;a.append("accountId",$scope.page1UserIdImportant),$http({method:"POST",url:$rootScope.link+"/gcsscrm/general/getAllMsg",data:a,headers:{"Content-Type":void 0},transformRequest:angular.identity}).success(function(e){if(200==e.code){$scope.dataStatus=e.data.regionList,$scope.dataCloud=e.data.listFor,$scope.constructor1=e.data.contactTotal,$scope.femalePercentage1=e.data.femalePercentage,$scope.malePercentage1=e.data.malePercentage,$scope.unkonwnPercentage1=e.data.unkonwnPercentage,console.log(e),$scope.page1I=0,$(".page1-change-block").css("display","none"),$scope.activestatList1=e.data.activestatList,$scope.activestatList1Arr1=[],$scope.activestatList1Arr2=[];for(a=0;a<$scope.activestatList1.length;a++)$scope.activestatList1Arr1.push($scope.activestatList1[a].chatcount),$scope.activestatList1Arr2.push($scope.activestatList1[a].thedate.substring(5,10));$scope.fromstatList1=e.data.fromstatList,$scope.fromstatList1Arr1=[],$scope.fromstatList1Arr2=[];for(a=0;a<$scope.fromstatList1.length;a++)$scope.fromstatList1Arr1.push($scope.fromstatList1[a].sourcename),$scope.fromstatList1Arr2.push({value:$scope.fromstatList1[a].fromcount,name:$scope.fromstatList1[a].sourcename});$scope.from1=e.data.groupstatList,$scope.groupstatListArr1=[],$scope.groupstatListArr2=[];for(var a=0;a<$scope.from1.length;a++)$scope.groupstatListArr1.push($scope.from1[a].groupname),$scope.groupstatListArr2.push({value:$scope.from1[a].groupmembercount,name:$scope.from1[a].groupname})}else $(".alert2").show(300).find(".alertCon").html("页面初始化失败，请刷新页面或再次登陆"),setTimeout(function(){$(".alert2").hide(300)},2e3)})},0):(window.location.href="http://localhost:8080/gcsscrm/#/page1",localStorage.removeItem("sessionId"),localStorage.removeItem("userId"),$rootScope.loginTrueFalse=!0,$(".tishi").show().html("登录身份过期请再次登录"))}),setTimeout(function(){function on_mouseover(e,a){var t=$(e).html();a=a||event,$.each(dataCloud,function(e,o){if(t!=o[0]);else{var s=o[2];$("#my_favorite_latin_words").after("<div class='append_div' style='left:"+a.clientX+"px; top:"+a.clientY+"px; '>"+s+"</div>")}})}$("#container1").vectorMap({map:"china_zh",backgroundColor:!1,scale:5,color:"#D2D6DE",hoverColor:!1,onLabelShow:function(e,a,t){$.each($scope.dataStatus,function(e,o){t==o.cha&&a.html(o.name+o.des)})},onRegionOver:function(e,a){$.each($scope.dataStatus,function(e,t){a==t.cha&&"0"!=t.des&&$("#container1").css({cursor:"pointer"})})},onRegionOut:function(e,a){$.each($scope.dataStatus,function(e,t){a==t.cha&&"0"!=t.des&&$("#container1").css({cursor:"auto"})})}}),$(".jvectormap-zoomin").click(),$.each($scope.dataStatus,function(i,items){if("0"!=items.des){var josnStr="{"+items.cha+":'#09CDFF'}";$("#container1").vectorMap("set","colors",eval("("+josnStr+")"))}});var myChart1=echarts.init(document.getElementById("chat-one"));option1={tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},legend:{orient:"vertical",left:"left",data:$scope.fromstatList1Arr1},series:[{name:"好友来源",type:"pie",radius:"80%",center:["50%","55%"],data:$scope.fromstatList1Arr2,itemStyle:{emphasis:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]},myChart1.setOption(option1);var myChart4=echarts.init(document.getElementById("chat-four"));option2={tooltip:{trigger:"item"},xAxis:{data:$scope.groupstatListArr1},yAxis:{},series:[{type:"bar",itemStyle:{normal:{color:function(e){return["#717CC5","#75CDFA","#9ACB77","#F6B970","#EE7B61","#7ED138","#9BCA63","#FAD860","#F3A43B","#60C0DD","#D7504B","#C6E579","#F4E001","#F0805A","#26C0C0"][e.dataIndex]}}},barWidth:40,data:$scope.groupstatListArr2}]},myChart4.setOption(option2);var myChart5=echarts.init(document.getElementById("chat-five"));option3={tooltip:{trigger:"axis"},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"category",boundaryGap:!1,data:$scope.activestatList1Arr2},yAxis:{type:"value"},series:[{name:"好友活跃人数",type:"line",color:["#5098F4"],stack:"总量",data:$scope.activestatList1Arr1}]},myChart5.setOption(option3);for(var dataCloud=$scope.dataCloud,string_="",i=0;i<dataCloud.length;i++){var string_f=dataCloud[i][0],string_n=dataCloud[i][1];string_+="{text: '"+string_f+"', weight: '"+string_n+"',html: {'class': 'span_list'}},"}$(function(){$("#my_favorite_latin_words").jQCloud(word_list,{autoResize:!0,shape:"elliptic",delay:80})});var string_list=string_,word_list=eval("["+string_list+"]")},500),$(function(){$scope.page1I=0,$(document).on("click",".haha",function(){$scope.page1I++,$scope.page1I%2==0?$(".page1-change-block").css("display","none"):$(".page1-change-block").css("display","block")}),$scope.page1Click=function(e){0==$(".page1-checkbox-one")[e].attributes[1].value?($(".page1-checkbox-one").eq(e).prev().addClass("on"),$(".page1-checkbox-one")[e].attributes[1].value=1):($(".page1-checkbox-one").eq(e).prev().removeClass("on"),$(".page1-checkbox-one")[e].attributes[1].value=0)},$(".checkAllTelephone").click(function(){e=0,$(".checkbox-toggle-change").prev().removeClass("on");var a=$(this).attr("data"),t=$(".isChange");if(console.log(t),0==a){for(o=0;o<t.length;o++)t[o].attributes[1].value=1,$(".isChange").prev().addClass("on");$(this).attr("data","1").prev().addClass("on")}else{for(var o=0;o<t.length;o++)t[o].attributes[1].value=0,$(".isChange").prev().removeClass("on");$(this).attr("data","0").prev().removeClass("on")}});var e=0;$(".checkbox-toggle-change").click(function(){++e%2==0?$(this).prev().removeClass("on"):$(this).prev().addClass("on"),$(".checkAllTelephone").attr("data","0").prev().removeClass("on");for(var a=$(".isChange"),t=0;t<a.length;t++)0==a[t].attributes[1].value?($(".isChange").eq(t).prev().addClass("on"),a[t].attributes[1].value=1):($(".isChange").eq(t).prev().removeClass("on"),a[t].attributes[1].value=0)})}),$scope.sendMsg=function(){for(var allCheckedSendAll=$(".page1-checkbox-one"),i=0,arr=[];i<allCheckedSendAll.length;i++)1==allCheckedSendAll[i].attributes.data1.value&&arr.push(allCheckedSendAll[i].attributes.data.value);if(0==arr.length)$(".alert2").show(300).find(".alertCon").html("请选择相关微信号"),setTimeout(function(){$(".alert2").hide(300)},2e3);else{var sendObj=new FormData;sendObj.append("weChatIds",JSON.stringify(arr)),$http({method:"POST",url:$rootScope.link+"/gcsscrm/general/getAllMsg",data:sendObj,headers:{"Content-Type":void 0},transformRequest:angular.identity}).success(function(response){if(200==response.code){$scope.activestatList1Arr1=[],$scope.activestatList1Arr2=[],$scope.fromstatList1Arr1=[],$scope.fromstatList1Arr2=[],$scope.groupstatListArr1=[],$scope.groupstatListArr2=[],$scope.dataStatus=response.data.regionList,$scope.dataCloud=response.data.listFor,$scope.constructor1=response.data.contactTotal,$scope.femalePercentage1=response.data.femalePercentage,$scope.malePercentage1=response.data.malePercentage,$scope.unkonwnPercentage1=response.data.unkonwnPercentage,console.log(response),$scope.page1I=0,$(".page1-change-block").css("display","none"),$scope.activestatList1=response.data.activestatList;for(var i=0;i<$scope.activestatList1.length;i++)$scope.activestatList1Arr1.push($scope.activestatList1[i].chatcount),$scope.activestatList1Arr2.push($scope.activestatList1[i].thedate.substring(5,10));var myChart5=echarts.init(document.getElementById("chat-five"));option3.xAxis.data=$scope.activestatList1Arr2,option3.series[0].data=$scope.activestatList1Arr1,myChart5.setOption(option3),$scope.fromstatList1=response.data.fromstatList;for(var i=0;i<$scope.fromstatList1.length;i++)$scope.fromstatList1Arr1.push($scope.fromstatList1[i].sourcename),$scope.fromstatList1Arr2.push({value:$scope.fromstatList1[i].fromcount,name:$scope.fromstatList1[i].sourcename});var myChart1=echarts.init(document.getElementById("chat-one"));option1.legend.data=$scope.fromstatList1Arr1,option1.series[0].data=$scope.fromstatList1Arr2,myChart1.setOption(option1),$.each($scope.dataStatus,function(i,items){var josnStr="{"+items.cha+":'#D2D6DE'}";$("#container1").vectorMap("set","colors",eval("("+josnStr+")"))}),$scope.dataStatus=response.data.regionList,$.each($scope.dataStatus,function(i,items){if(0!=items.des){var josnStr="{"+items.cha+":'#09CDFF'}";$("#container1").vectorMap("set","colors",eval("("+josnStr+")"))}}),$scope.from1=response.data.groupstatList;for(var i=0;i<$scope.from1.length;i++)$scope.groupstatListArr1.push($scope.from1[i].groupname),$scope.groupstatListArr2.push({value:$scope.from1[i].groupmembercount,name:$scope.from1[i].groupname});var myChart4=echarts.init(document.getElementById("chat-four"));option2.xAxis.data=$scope.groupstatListArr1,option2.series[0].data=$scope.groupstatListArr2,myChart4.setOption(option2),$(".alert1").show(300).find(".alertCon").html("微信号查找数据加载成功"),setTimeout(function(){$(".alert1").hide(300)},2e3)}else $(".alert2").show(300).find(".alertCon").html("微信号查找数据加载失败，请稍后再试"),setTimeout(function(){$(".alert2").hide(300)},2e3)})}},$scope.data4=[{id:1,name:"微信一",state:0},{id:2,name:"微信二",state:0},{id:3,name:"分微信三",state:0},{id:4,name:"微信四",state:0},{id:5,name:"微信五",state:0}]}]),app.controller("page2C",["$rootScope","$scope","$http","$timeout",function(e,a,t,o){a.page2UserIdImportant=localStorage.getItem("userId"),a.page2Wechats=[],void 0==a.page2UserIdImportant||null==a.page2UserIdImportant||""==a.page2UserIdImportant||setTimeout(function(){var o=new FormData;o.append("accountId",a.page2UserIdImportant),t({method:"POST",url:e.link+"/gcsscrm/general/getAllWeChat",data:o,headers:{"Content-Type":void 0},transformRequest:angular.identity}).success(function(e){if(200==e.code){a.sendWechatIdsAll=e.data.weChats;for(var t=0;t<a.sendWechatIdsAll.length;t++)a.page2Wechats.push(a.sendWechatIdsAll[t].id)}else $(".alert2").show(300).find(".alertCon").html("页面初始化失败，请刷新页面或再次登陆"),setTimeout(function(){$(".alert2").hide(300)},2e3)});var s=new FormData;s.append("accountId",a.page2UserIdImportant),t({method:"POST",url:e.link+"/gcsscrm/extension/getAllMsg",data:s,headers:{"Content-Type":void 0},transformRequest:angular.identity}).success(function(e){if(200==e.code){a.nowPeoples=e.data.contactCount,a.yestodayPeoples=e.data.timeIntervalCount,a.addLv1=a.yestodayPeoples/a.nowPeoples*100,a.addLv=a.addLv1.toFixed(1),a.addCount=e.data.timesCount,a.groupAllNum=e.data.chatRoomCount,a.yestodayGroupAllNum=e.data.chatRoomStatBeforeInteCount,a.newAddGroupAllNum1=(a.groupAllNum-a.yestodayGroupAllNum)/a.yestodayGroupAllNum*100,a.newAddGroupAllNum=a.newAddGroupAllNum1.toFixed(1),a.allRenwu=e.data.getAllTask,console.log(e),a.activestatList1=e.data.recentWeekOperationstat,a.activestatList1Arr1=[],a.activestatList1Arr2=[];for(t=0;t<a.activestatList1.length;t++)a.activestatList1Arr1.push(a.activestatList1[t].operatetypecount),a.activestatList1Arr2.push(a.activestatList1[t].thedate.slice(0,10));a.fromstatList1=e.data.operationstatList,a.fromstatList1Arr1=[],a.fromstatList1Arr2=[];for(t=0;t<a.fromstatList1.length;t++)a.fromstatList1Arr1.push(a.fromstatList1[t].operatetype),a.fromstatList1Arr2.push(a.fromstatList1[t].operatetypecount);console.log(a.fromstatList1Arr1),console.log(a.fromstatList1Arr2),a.from1=e.data.getAllFromstat,a.groupstatListArr1=[],a.groupstatListArr2=[];for(var t=0;t<a.from1.length;t++)a.groupstatListArr1.push(a.from1[t].sourcename),a.groupstatListArr2.push(a.from1[t].fromcount)}else $(".alert2").show(300).find(".alertCon").html("数据加载失败，请刷新页面或再次登陆"),setTimeout(function(){$(".alert2").hide(300)},2e3)})},0),e.mainShow=!0,e.changePas=!1,setTimeout(function(){$("#example2").DataTable({info:!1});var e=echarts.init(document.getElementById("chat-one"));option1={tooltip:{trigger:"axis"},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"category",boundaryGap:!1,data:a.activestatList1Arr2},yAxis:{type:"value"},series:[{name:"操作总数",type:"line",color:["#5098F4"],stack:"总量",data:a.activestatList1Arr1}]},e.setOption(option1);var t=echarts.init(document.getElementById("chat-two"));option2={tooltip:{trigger:"item"},xAxis:{data:a.fromstatList1Arr1},yAxis:{},series:[{name:"任务类型",type:"bar",itemStyle:{normal:{color:function(e){return["#717CC5","#75CDFA","#9ACB77","#F6B970","#EE7B61","#7ED138","#9BCA63","#FAD860","#F3A43B","#60C0DD","#D7504B","#C6E579","#F4E001","#F0805A","#26C0C0"][e.dataIndex]}}},barWidth:40,data:a.fromstatList1Arr2}]},t.setOption(option2);var o=echarts.init(document.getElementById("chat-sree"));option3={tooltip:{trigger:"item"},xAxis:{data:a.groupstatListArr1},yAxis:{},series:[{name:"新增好友来源",type:"bar",itemStyle:{normal:{color:function(e){return["#7ED138","#9BCA63","#FAD860","#F3A43B","#60C0DD","#717CC5","#75CDFA","#9ACB77","#F6B970","#EE7B61","#D7504B","#C6E579","#F4E001","#F0805A","#26C0C0"][e.dataIndex]}}},barWidth:40,data:a.groupstatListArr2}]},o.setOption(option3)},500),$("#config-demo").daterangepicker({startDate:moment().hours(0).minutes(0).seconds(0),endDate:moment(new Date),maxDate:moment(new Date),opens:"left",ranges:{"昨天":[moment().subtract(1,"days"),moment().subtract(1,"days")],"上周":[moment().subtract(6,"days"),moment()],"前30天":[moment().subtract(29,"days"),moment()],"本月":[moment().startOf("month"),moment().endOf("month")],"上月":[moment().subtract(1,"month").startOf("month"),moment().subtract(1,"month").endOf("month")]},showWeekNumbers:!0,locale:{format:"YYYY-MM-DD",applyLabel:"确定",cancelLabel:"取消",customRangeLabel:"自定义",daysOfWeek:["日","一","二","三","四","五","六"],monthNames:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],firstDay:1}},function(e,a,t){timeRangeChange=[e.format("YYYY-MM-DD"),a.format("YYYY-MM-DD")]}),$(function(){a.page2Jilu=0,$(document).on("click",".haha",function(){a.page2Jilu++,a.page2Jilu%2==0?$(".page1-change-block").css("display","none"):$(".page1-change-block").css("display","block")}),a.page2Click=function(e){0==$(".page1-checkbox-one")[e].attributes[1].value?($(".page1-checkbox-one").eq(e).prev().addClass("on"),$(".page1-checkbox-one")[e].attributes[1].value=1):($(".page1-checkbox-one").eq(e).prev().removeClass("on"),$(".page1-checkbox-one")[e].attributes[1].value=0)},$(".checkAllTelephone").click(function(){e=0,$(".checkbox-toggle-change").prev().removeClass("on");var a=$(this).attr("data"),t=$(".isChange");if(console.log(t),0==a){for(o=0;o<t.length;o++)t[o].attributes[1].value=1,$(".isChange").prev().addClass("on");$(this).attr("data","1").prev().addClass("on")}else{for(var o=0;o<t.length;o++)t[o].attributes[1].value=0,$(".isChange").prev().removeClass("on");$(this).attr("data","0").prev().removeClass("on")}});var e=0;$(".checkbox-toggle-change").click(function(){++e%2==0?$(this).prev().removeClass("on"):$(this).prev().addClass("on"),$(".checkAllTelephone").attr("data","0").prev().removeClass("on");for(var a=$(".isChange"),t=0;t<a.length;t++)0==a[t].attributes[1].value?($(".isChange").eq(t).prev().addClass("on"),a[t].attributes[1].value=1):($(".isChange").eq(t).prev().removeClass("on"),a[t].attributes[1].value=0)})}),a.sendMsg=function(){for(var o=$(".page1-checkbox-one"),s=0,n=[];s<o.length;s++)1==o[s].attributes.data1.value&&n.push(o[s].attributes.data.value);if(0==n.length)$(".alert2").show(300).find(".alertCon").html("请选择相关微信号"),setTimeout(function(){$(".alert2").hide(300)},2e3);else{var d=new FormData;d.append("weChatIds",JSON.stringify(n)),t({method:"POST",url:e.link+"/gcsscrm/extension/getAllMsg",data:d,headers:{"Content-Type":void 0},transformRequest:angular.identity}).success(function(e){if(200==e.code){a.page2Wechats=[],a.groupstatListArr1=[],a.groupstatListArr2=[],a.fromstatList1Arr1=[],a.fromstatList1Arr2=[],a.activestatList1Arr1=[],a.activestatList1Arr2=[],a.page2Wechats.push(JSON.stringify(n)),a.nowPeoples=e.data.contactCount,a.yestodayPeoples=e.data.timeIntervalCount,a.addLv1=a.yestodayPeoples/a.nowPeoples*100,a.addLv=a.addLv1.toFixed(1),a.addCount=e.data.timesCount,a.groupAllNum=e.data.chatRoomCount,a.yestodayGroupAllNum=e.data.chatRoomStatBeforeInteCount,a.newAddGroupAllNum1=(a.groupAllNum-a.yestodayGroupAllNum)/a.yestodayGroupAllNum*100,a.newAddGroupAllNum=a.newAddGroupAllNum1.toFixed(1),a.allRenwu=e.data.getAllTask,console.log(e),a.activestatList1=e.data.recentWeekOperationstat,a.activestatList1Arr1=[],a.activestatList1Arr2=[];for(s=0;s<a.activestatList1.length;s++)a.activestatList1Arr1.push(a.activestatList1[s].operatetypecount),a.activestatList1Arr2.push(a.activestatList1[s].thedate.slice(0,10));var t=echarts.init(document.getElementById("chat-one"));option1.xAxis.data=a.activestatList1Arr2,option1.series[0].data=a.activestatList1Arr1,t.setOption(option1),a.fromstatList1=e.data.operationstatList;for(s=0;s<a.fromstatList1.length;s++)a.fromstatList1Arr1.push(a.fromstatList1[s].operatetype),a.fromstatList1Arr2.push(a.fromstatList1[s].operatetypecount);var o=echarts.init(document.getElementById("chat-two"));option2.xAxis.data=a.fromstatList1Arr1,option2.series[0].data=a.fromstatList1Arr2,o.setOption(option2),a.from1=e.data.getAllFromstat;for(var s=0;s<a.from1.length;s++)a.groupstatListArr1.push(a.from1[s].sourcename),a.groupstatListArr2.push(a.from1[s].fromcount);var d=echarts.init(document.getElementById("chat-sree"));option3.xAxis.data=a.groupstatListArr1,option3.series[0].data=a.groupstatListArr2,d.setOption(option3),$(".alert1").show(300).find(".alertCon").html("微信号查找数据加载成功"),setTimeout(function(){$(".alert1").hide(300)},2e3),$(".page1-change-block").css("display","none"),a.page2Jilu=0}else $(".alert2").show(300).find(".alertCon").html("微信号查找数据加载失败，请稍后再试"),setTimeout(function(){$(".alert2").hide(300)},2e3),$(".page1-change-block").css("display","none"),a.page2Jilu=0})}},$(".clickChose").click(function(){var o="",s="";setTimeout(function(){var e=$(".form-control").val();o=e.substr(0,10),s=e.substr(13,10)},300),setTimeout(function(){var n=new FormData;n.append("startDate",o),n.append("weChatIds",JSON.stringify(a.page2Wechats)),n.append("endDate",s),t({method:"POST",url:e.link+"/gcsscrm/extension/getAllMsg",data:n,headers:{"Content-Type":void 0},transformRequest:angular.identity}).success(function(e){if(200==e.code){a.groupstatListArr1=[],a.groupstatListArr2=[],a.fromstatList1Arr1=[],a.fromstatList1Arr2=[],a.activestatList1Arr1=[],a.activestatList1Arr2=[],a.allRenwu=e.data.getAllTask,a.activestatList1=e.data.recentWeekOperationstat,a.activestatList1Arr1=[],a.activestatList1Arr2=[];for(s=0;s<a.activestatList1.length;s++)a.activestatList1Arr1.push(a.activestatList1[s].operatetypecount),a.activestatList1Arr2.push(a.activestatList1[s].thedate.slice(0,10));var t=echarts.init(document.getElementById("chat-one"));option1.xAxis.data=a.activestatList1Arr2,option1.series[0].data=a.activestatList1Arr1,t.setOption(option1),a.fromstatList1=e.data.operationstatList;for(s=0;s<a.fromstatList1.length;s++)a.fromstatList1Arr1.push(a.fromstatList1[s].operatetype),a.fromstatList1Arr2.push(a.fromstatList1[s].operatetypecount);var o=echarts.init(document.getElementById("chat-two"));option2.xAxis.data=a.fromstatList1Arr1,option2.series[0].data=a.fromstatList1Arr2,o.setOption(option2),a.from1=e.data.getAllFromstat;for(var s=0;s<a.from1.length;s++)a.groupstatListArr1.push(a.from1[s].sourcename),a.groupstatListArr2.push(a.from1[s].fromcount);var n=echarts.init(document.getElementById("chat-sree"));option3.xAxis.data=a.groupstatListArr1,option3.series[0].data=a.groupstatListArr2,n.setOption(option3),$(".alert1").show(300).find(".alertCon").html("微信号查找数据加载成功"),setTimeout(function(){$(".alert1").hide(300)},2e3)}else $(".alert2").show(300).find(".alertCon").html("时间查找数据加载失败，请稍后再试"),setTimeout(function(){$(".alert2").hide(300)},2e3)})},350)})}]),app.controller("page3C",["$rootScope","$scope","$http","$timeout",function(e,a,t,o){a.page3UserIdImportant=localStorage.getItem("userId"),void 0==a.page3UserIdImportant||null==a.page3UserIdImportant||""==a.page3UserIdImportant||setTimeout(function(){a.page2Wechats=[];var o=new FormData;o.append("accountId",a.page3UserIdImportant),t({method:"POST",url:e.link+"/gcsscrm/general/getAllWeChat",data:o,headers:{"Content-Type":void 0},transformRequest:angular.identity}).success(function(e){if(200==e.code){a.sendWechatIdsAll=e.data.weChats;for(var t=0;t<a.sendWechatIdsAll.length;t++)a.page2Wechats.push(a.sendWechatIdsAll[t].id)}else $(".alert2").show(300).find(".alertCon").html("页面初始化失败，请刷新页面或再次登陆"),setTimeout(function(){$(".alert2").hide(300)},2e3)});var s=new FormData;s.append("accountId",a.page3UserIdImportant),t({method:"POST",url:e.link+"/gcsscrm/customer/getAllMsgToPage",data:s,headers:{"Content-Type":void 0},transformRequest:angular.identity}).success(function(e){if(200==e.code){a.todayChats=e.data.nowChat.chatcount,a.todayActive=e.data.nowChat.activecount,a.todayReceivemessage=e.data.nowChat.receivemessage,a.todaySendmessage=e.data.nowChat.sendmessage,a.allRenwu=e.data.taskstatList,console.log(e),a.activestatList1=e.data.chatlist,a.activestatList1Arr1=[],a.activestatList1Arr2=[],a.activestatList1Arr3=[];for(t=0;t<a.activestatList1.length;t++)a.activestatList1Arr1.push(a.activestatList1[t].thedate.slice(0,10)),a.activestatList1Arr2.push(a.activestatList1[t].receivemessage),a.activestatList1Arr3.push(a.activestatList1[t].sendmessage);a.fromstatList1=e.data.nochatstatList,a.fromstatList1Arr1=[],a.fromstatList1Arr2=[];for(t=0;t<a.fromstatList1.length;t++)a.fromstatList1Arr1.push(a.fromstatList1[t].nochattime),a.fromstatList1Arr2.push(a.fromstatList1[t].nochatcount);a.from1=e.data.hotchatstatList,a.groupstatListArr1=[],a.groupstatListArr2=[];for(var t=0;t<a.from1.length;t++)a.groupstatListArr1.push(a.from1[t].friendwechat),a.groupstatListArr2.push(a.from1[t].chatcount)}else $(".alert2").show(300).find(".alertCon").html("数据加载失败，请刷新页面或再次登陆"),setTimeout(function(){$(".alert2").hide(300)},2e3)})},0),e.changePas=!1,e.mainShow=!0,setTimeout(function(){$("#example2").DataTable({info:!1});var e=echarts.init(document.getElementById("chat-one"));option1={tooltip:{trigger:"axis"},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"category",boundaryGap:!1,data:a.activestatList1Arr1},yAxis:{type:"value"},series:[{name:"发送消息总数",type:"line",color:["#5098F4"],stack:"总量",data:a.activestatList1Arr2},{name:"收到消息总数",type:"line",color:["#91C7AE"],stack:"总量",data:a.activestatList1Arr3}]},e.setOption(option1);var t=echarts.init(document.getElementById("chat-two"));option2={tooltip:{trigger:"item"},xAxis:{data:a.fromstatList1Arr1},yAxis:{},series:[{name:"未沟通",type:"bar",itemStyle:{normal:{color:function(e){return["#717CC5","#75CDFA","#9ACB77","#F6B970","#EE7B61","#7ED138","#9BCA63","#FAD860","#F3A43B","#60C0DD","#D7504B","#C6E579","#F4E001","#F0805A","#26C0C0"][e.dataIndex]}}},barWidth:40,data:a.fromstatList1Arr2}]},t.setOption(option2);var o=echarts.init(document.getElementById("chat-sree"));option3={tooltip:{trigger:"item"},xAxis:{data:a.groupstatListArr1},yAxis:{},series:[{name:"沟通数量",type:"bar",itemStyle:{normal:{color:function(e){return["#7ED138","#9BCA63","#FAD860","#F3A43B","#60C0DD","#717CC5","#75CDFA","#9ACB77","#F6B970","#EE7B61","#D7504B","#C6E579","#F4E001","#F0805A","#26C0C0"][e.dataIndex]}}},barWidth:40,data:a.groupstatListArr2}]},o.setOption(option3)},500),$("#config-demo").daterangepicker({startDate:moment().hours(0).minutes(0).seconds(0),endDate:moment(new Date),maxDate:moment(new Date),opens:"left",ranges:{"昨天":[moment().subtract(1,"days"),moment().subtract(1,"days")],"上周":[moment().subtract(6,"days"),moment()],"前30天":[moment().subtract(29,"days"),moment()],"本月":[moment().startOf("month"),moment().endOf("month")],"上月":[moment().subtract(1,"month").startOf("month"),moment().subtract(1,"month").endOf("month")]},showWeekNumbers:!0,locale:{format:"YYYY-MM-DD",applyLabel:"确定",cancelLabel:"取消",customRangeLabel:"自定义",daysOfWeek:["日","一","二","三","四","五","六"],monthNames:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],firstDay:1}},function(e,a,t){timeRangeChange=[e.format("YYYY-MM-DD"),a.format("YYYY-MM-DD")]}),$(function(){a.page3Jilu=0,$(document).on("click",".haha",function(){a.page3Jilu++,a.page3Jilu%2==0?$(".page1-change-block").css("display","none"):$(".page1-change-block").css("display","block")}),a.page3Click=function(e){0==$(".page1-checkbox-one")[e].attributes[1].value?($(".page1-checkbox-one").eq(e).prev().addClass("on"),$(".page1-checkbox-one")[e].attributes[1].value=1):($(".page1-checkbox-one").eq(e).prev().removeClass("on"),$(".page1-checkbox-one")[e].attributes[1].value=0)},$(".checkAllTelephone").click(function(){e=0,$(".checkbox-toggle-change").prev().removeClass("on");var t=$(this).attr("data"),o=$(".isChange");if(console.log(o),0==t){for(s=0;s<o.length;s++)o[s].attributes[1].value=1,$(".isChange").prev().addClass("on");for(n=0;n<a.data4.length;n++)a.data4[n].state=1;$(this).attr("data","1").prev().addClass("on")}else{for(var s=0;s<o.length;s++)o[s].attributes[1].value=0,$(".isChange").prev().removeClass("on");for(var n=0;n<a.data4.length;n++)a.data4[n].state=0;$(this).attr("data","0").prev().removeClass("on")}console.log(a.data4)});var e=0;$(".checkbox-toggle-change").click(function(){++e%2==0?$(this).prev().removeClass("on"):$(this).prev().addClass("on"),$(".checkAllTelephone").attr("data","0").prev().removeClass("on");for(var t=$(".isChange"),o=0;o<t.length;o++)0==t[o].attributes[1].value?($(".isChange").eq(o).prev().addClass("on"),t[o].attributes[1].value=1,a.data4[t[o].attributes[3].value].state=1):($(".isChange").eq(o).prev().removeClass("on"),t[o].attributes[1].value=0,a.data4[t[o].attributes[3].value].state=0);console.log(a.data4)})}),a.sendMsg=function(){for(var o=$(".page1-checkbox-one"),s=0,n=[];s<o.length;s++)1==o[s].attributes.data1.value&&n.push(o[s].attributes.data.value);if(0==n.length)$(".alert2").show(300).find(".alertCon").html("请选择相关微信号"),setTimeout(function(){$(".alert2").hide(300)},2e3);else{var d=new FormData;d.append("weChatIds",JSON.stringify(n)),t({method:"POST",url:e.link+"/gcsscrm/customer/getAllMsgToPage",data:d,headers:{"Content-Type":void 0},transformRequest:angular.identity}).success(function(e){if(200==e.code){a.page2Wechats.push(JSON.stringify(n)),a.page1I=0,$(".page1-change-block").css("display","none"),a.page3Jilu=0,a.todayChats=e.data.nowChat.chatcount,a.todayActive=e.data.nowChat.activecount,a.todayReceivemessage=e.data.nowChat.receivemessage,a.todaySendmessage=e.data.nowChat.sendmessage,a.allRenwu=e.data.taskstatList,a.activestatList1=e.data.chatlist,a.activestatList1Arr1=[],a.activestatList1Arr2=[],a.activestatList1Arr3=[];for(s=0;s<a.activestatList1.length;s++)a.activestatList1Arr1.push(a.activestatList1[s].thedate.slice(0,10)),a.activestatList1Arr2.push(a.activestatList1[s].receivemessage),a.activestatList1Arr3.push(a.activestatList1[s].sendmessage);var t=echarts.init(document.getElementById("chat-one"));option1.xAxis.data=a.activestatList1Arr1,option1.series[0].data=a.activestatList1Arr2,option1.series[1].data=a.activestatList1Arr3,t.setOption(option1),a.fromstatList1=e.data.nochatstatList,a.fromstatList1Arr1=[],a.fromstatList1Arr2=[];for(s=0;s<a.fromstatList1.length;s++)a.fromstatList1Arr1.push(a.fromstatList1[s].nochattime),a.fromstatList1Arr2.push(a.fromstatList1[s].nochatcount);var o=echarts.init(document.getElementById("chat-two"));option2.series[0].data=a.fromstatList1Arr2,option2.xAxis.data=a.fromstatList1Arr1,o.setOption(option2),a.from1=e.data.hotchatstatList,a.groupstatListArr1=[],a.groupstatListArr2=[];for(var s=0;s<a.from1.length;s++)a.groupstatListArr1.push(a.from1[s].friendwechat),a.groupstatListArr2.push(a.from1[s].chatcount);var d=echarts.init(document.getElementById("chat-sree"));option3.xAxis.data=a.groupstatListArr1,option3.series[0].data=a.groupstatListArr2,d.setOption(option3),$(".alert1").show(300).find(".alertCon").html("微信号查找数据加载成功"),setTimeout(function(){$(".alert1").hide(300)},2e3)}else $(".alert2").show(300).find(".alertCon").html("微信号查找数据加载失败，请稍后再试"),setTimeout(function(){$(".alert2").hide(300)},2e3)})}},$(".clickChose").click(function(){var o="",s="";setTimeout(function(){var e=$(".form-control").val();o=e.substr(0,10),s=e.substr(13,10)},300),setTimeout(function(){var n=new FormData;n.append("startDate",o),n.append("weChatIds",JSON.stringify(a.page2Wechats)),n.append("endDate",s),t({method:"POST",url:e.link+"/gcsscrm/customer/getAllMsgToPage",data:n,headers:{"Content-Type":void 0},transformRequest:angular.identity}).success(function(e){if(200==e.code){a.from1=e.data.hotchatstatList,a.groupstatListArr1=[],a.groupstatListArr2=[];for(var t=0;t<a.from1.length;t++)a.groupstatListArr1.push(a.from1[t].friendwechat),a.groupstatListArr2.push(a.from1[t].chatcount);var o=echarts.init(document.getElementById("chat-sree"));option3.xAxis.data=a.groupstatListArr1,option3.series[0].data=a.groupstatListArr2,o.setOption(option3),$(".alert1").show(300).find(".alertCon").html("时间查找数据加载成功"),setTimeout(function(){$(".alert1").hide(300)},2e3)}else $(".alert2").show(300).find(".alertCon").html("时间查找数据加载失败，请稍后再试"),setTimeout(function(){$(".alert2").hide(300)},2e3)})},350)})}]),app.controller("page4C",["$rootScope","$scope","$http","$timeout",function(e,a,t,o){a.page4UserIdImportant=localStorage.getItem("userId"),a.initpages="",e.mainShow=!0,e.changePas=!1,a.page2Wechats=[],e.showLoads=!1,a.picSrc="http://"+window.location.host+"/pic/",void 0==a.page4UserIdImportant||null==a.page4UserIdImportant||""==a.page4UserIdImportant||setTimeout(function(){e.showLoads=!0;var o=new FormData;o.append("accountId",a.page4UserIdImportant),t({method:"POST",url:e.link+"/gcsscrm/general/getAllWeChat",data:o,headers:{"Content-Type":void 0},transformRequest:angular.identity}).success(function(e){if(200==e.code){$(".page4-checkbox-toggle-1").removeClass("fa-check-square-o").addClass("fa-square-o"),$(".checkbox-toggle").attr("data","0"),a.sendWechatIdsAll=e.data.weChats;for(var t=0;t<a.sendWechatIdsAll.length;t++)a.page2Wechats.push(a.sendWechatIdsAll[t].id)}else $(".alert2").show(300).find(".alertCon").html("页面初始化失败，请刷新页面或再次登陆"),setTimeout(function(){$(".alert2").hide(300)},2e3)});var s=new FormData;s.append("accountId",a.page4UserIdImportant),t({method:"POST",url:e.link+"/gcsscrm/user/getAllMsg",data:s,headers:{"Content-Type":void 0},transformRequest:angular.identity}).success(function(o){if(200==o.code){$(".page4-checkbox-toggle-1").removeClass("fa-check-square-o").addClass("fa-square-o"),$(".checkbox-toggle").attr("data","0"),a.initData=o.data.contactList,a.initDatacontactCount=o.data.contactCount,a.initGroup=o.data.groupsList;for(var s=[],n=0;n<a.initData.length;n++)if(a.initData[n].tagList.length>0){s.push(a.initData[n].tagList[0].tagname.split(","));for(var d=[],r=0;r<s.length;r++)d.push(s[r]);a.initData[n].tagList=d,d=[],s=[]}$(".M-box1").pagination({totalData:a.initDatacontactCount,showData:10,coping:!0,callback:function(o){var s={page:o.getCurrent()},n=new FormData;n.append("accountId",a.page4UserIdImportant),n.append("page",s.page),t({method:"POST",url:e.link+"/gcsscrm/user/getAllMsg",data:n,headers:{"Content-Type":void 0},transformRequest:angular.identity}).success(function(e){if(200==e.code){$(".page4-checkbox-toggle-1").removeClass("fa-check-square-o").addClass("fa-square-o"),$(".checkbox-toggle").attr("data","0"),a.initData=e.data.contactList,a.initDatacontactCount=e.data.contactCount,a.initGroup=e.data.groupsList;for(var t=[],o=0;o<a.initData.length;o++)if(a.initData[o].tagList.length>0){t.push(a.initData[o].tagList[0].tagname.split(","));for(var s=[],n=0;n<t.length;n++)s.push(t[n]);a.initData[o].tagList=s,s=[],t=[]}setTimeout(function(){var e=$(".blod");for(o=0;o<e.length;o++){var a=o;1==e[o].attributes[0].nodeValue&&$(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),2==e[o].attributes[0].nodeValue&&($(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod2").addClass("ox").css("border","none")),3==e[o].attributes[0].nodeValue&&($(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod2").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod3").addClass("ox").css("border","none")),4==e[o].attributes[0].nodeValue&&($(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod2").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod3").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod4").addClass("ox").css("border","none")),5==e[o].attributes[0].nodeValue&&($(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod2").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod3").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod4").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod5").addClass("ox").css("border","none"))}$('.mailbox-messages input[type="checkbox"]').iCheck({checkboxClass:"icheckbox_flat-blue",radioClass:"iradio_flat-blue"})},40)}})}}),setTimeout(function(){var a=$(".blod");for(n=0;n<a.length;n++){var t=n;1==a[n].attributes[0].nodeValue&&$(".blod").eq(t).find(".blod1").addClass("ox").css("border","none"),2==a[n].attributes[0].nodeValue&&($(".blod").eq(t).find(".blod1").addClass("ox").css("border","none"),$(".blod").eq(t).find(".blod2").addClass("ox").css("border","none")),3==a[n].attributes[0].nodeValue&&($(".blod").eq(t).find(".blod1").addClass("ox").css("border","none"),$(".blod").eq(t).find(".blod2").addClass("ox").css("border","none"),$(".blod").eq(t).find(".blod3").addClass("ox").css("border","none")),4==a[n].attributes[0].nodeValue&&($(".blod").eq(t).find(".blod1").addClass("ox").css("border","none"),$(".blod").eq(t).find(".blod2").addClass("ox").css("border","none"),$(".blod").eq(t).find(".blod3").addClass("ox").css("border","none"),$(".blod").eq(t).find(".blod4").addClass("ox").css("border","none")),5==a[n].attributes[0].nodeValue&&($(".blod").eq(t).find(".blod1").addClass("ox").css("border","none"),$(".blod").eq(t).find(".blod2").addClass("ox").css("border","none"),$(".blod").eq(t).find(".blod3").addClass("ox").css("border","none"),$(".blod").eq(t).find(".blod4").addClass("ox").css("border","none"),$(".blod").eq(t).find(".blod5").addClass("ox").css("border","none"))}e.showLoads=!1,$('.mailbox-messages input[type="checkbox"]').iCheck({checkboxClass:"icheckbox_flat-blue",radioClass:"iradio_flat-blue"}),$("#example2").DataTable({searching:!0,iDisplayLength:10,bInfo:!1,bRetrieve:!0})},100)}else $(".alert2").show(300).find(".alertCon").html("数据加载失败，请刷新页面或再次登陆"),setTimeout(function(){$(".alert2").hide(300)},2e3)}),setTimeout(function(){var a=$(".blod");for(d=0;d<a.length;d++){var t=d;1==a[d].attributes[0].nodeValue&&$(".blod").eq(t).find(".blod1").addClass("ox").css("border","none"),2==a[d].attributes[0].nodeValue&&($(".blod").eq(t).find(".blod1").addClass("ox").css("border","none"),$(".blod").eq(t).find(".blod2").addClass("ox").css("border","none")),3==a[d].attributes[0].nodeValue&&($(".blod").eq(t).find(".blod1").addClass("ox").css("border","none"),$(".blod").eq(t).find(".blod2").addClass("ox").css("border","none"),$(".blod").eq(t).find(".blod3").addClass("ox").css("border","none")),4==a[d].attributes[0].nodeValue&&($(".blod").eq(t).find(".blod1").addClass("ox").css("border","none"),$(".blod").eq(t).find(".blod2").addClass("ox").css("border","none"),$(".blod").eq(t).find(".blod3").addClass("ox").css("border","none"),$(".blod").eq(t).find(".blod4").addClass("ox").css("border","none")),5==a[d].attributes[0].nodeValue&&($(".blod").eq(t).find(".blod1").addClass("ox").css("border","none"),$(".blod").eq(t).find(".blod2").addClass("ox").css("border","none"),$(".blod").eq(t).find(".blod3").addClass("ox").css("border","none"),$(".blod").eq(t).find(".blod4").addClass("ox").css("border","none"),$(".blod").eq(t).find(".blod5").addClass("ox").css("border","none"))}e.showLoads=!1,$('.mailbox-messages input[type="checkbox"]').iCheck({checkboxClass:"icheckbox_flat-blue",radioClass:"iradio_flat-blue"}),$("#example2").DataTable({searching:!0,iDisplayLength:10,bInfo:!1,bRetrieve:!0})},100)},0),e.FriendsMoreName="11",$(document).ready(function(){a.page4Sree=!1,$(".checkbox-toggle").click(function(){1==$(this).attr("data")?($(".mailbox-messages input[type='checkbox']").iCheck("uncheck"),$(".fa",this).removeClass("fa-check-square-o").addClass("fa-square-o"),$(this).attr("data","0")):($(".mailbox-messages input[type='checkbox']").iCheck("check"),$(".fa",this).removeClass("fa-square-o").addClass("fa-check-square-o"),$(this).attr("data","1"))})}),a.data=a.data2,$(function(){var o=new Tag("tagValue3");o.tagValue="",o.initView();var s=new Tag("tagValue4");s.tagValue="",s.initView(),a.page4One=0,$(".chose-on").click(function(){$(".page1-change-block-two").css("display","none"),$(".page1-change-block-two1").css("display","none"),$(".page1-change-block-sree").css("display","none"),$(".page1-change-block-four").css("display","none"),a.GroupNumJilu=0,a.jilukaka=0,a.jiluSree=0,a.jiluFour=0,a.moreGiveGroup=!1,a.oneGiveGroup=!1,a.oneTagFight=!1,a.sayGroup=!1,a.allTagFightShow=!1,a.chatAll=!1,a.giveGroup=!1,a.page4One++,a.page4One%2==0?$(".page1-change-block").css("display","none"):$(".page1-change-block").css("display","block")}),a.jilukaka=0,$(".chose-two1").click(function(){$(".page1-change-block-two").css("display","none"),$(".page1-change-block").css("display","none"),$(".page1-change-block-sree").css("display","none"),$(".page1-change-block-four").css("display","none"),a.GroupNumJilu=0,a.jiluSree=0,a.jiluFour=0,a.page4One=0,a.moreGiveGroup=!1,a.oneGiveGroup=!1,a.oneTagFight=!1,a.sayGroup=!1,a.allTagFightShow=!1,a.chatAll=!1,a.giveGroup=!1,a.jilukaka++,a.jilukaka%2==0?$(".page1-change-block-two1").css("display","none"):$(".page1-change-block-two1").css("display","block")}),$(".tag-touch").bind("input propertychange",function(){var o=$(this).val();if(""==o){var s=new FormData,n=$(".isChange"),d=$(".page4-group-group"),r=[],l=[];if(n.length>0){for(i=0;i<n.length;i++)1==n[i].attributes[1].value&&r.push(n[i].attributes[4].value);r.length>0?s.append("weChatIds",JSON.stringify(r)):s.append("accountId",a.page4UserIdImportant)}if(d.length>0){for(var i=0;i<d.length;i++)1==d[i].attributes[1].value&&l.push(d[i].attributes[4].value);l.length>0?s.append("groupIds",JSON.stringify(l)):s.append("groupIds",JSON.stringify([]))}s.append("tagId",""),t({method:"POST",url:e.link+"/gcsscrm/user/getAllMsg",data:s,headers:{"Content-Type":void 0},transformRequest:angular.identity}).success(function(o){if(200==o.code){$(".page4-checkbox-toggle-1").removeClass("fa-check-square-o").addClass("fa-square-o"),$(".checkbox-toggle").attr("data","0"),a.initData=o.data.contactList,a.initDatacontactCount=o.data.contactCount;for(var s=[],n=0;n<a.initData.length;n++)if(a.initData[n].tagList.length>0){s.push(a.initData[n].tagList[0].tagname.split(","));for(var d=[],r=0;r<s.length;r++)d.push(s[r]);a.initData[n].tagList=d,d=[],s=[]}$(".M-box1").pagination({totalData:a.initDatacontactCount,showData:10,coping:!0,callback:function(o){var s={page:o.getCurrent()};console.log(s);var n=new FormData,d=$(".isChange"),r=$(".page4-group-group"),l=[],i=[];if(d.length>0){for(c=0;c<d.length;c++)1==d[c].attributes[1].value&&l.push(d[c].attributes[4].value);l.length>0?n.append("weChatIds",JSON.stringify(l)):n.append("accountId",a.page4UserIdImportant)}if(r.length>0){for(var c=0;c<r.length;c++)1==r[c].attributes[1].value&&i.push(r[c].attributes[4].value);i.length>0?n.append("groupIds",JSON.stringify(i)):n.append("groupIds",JSON.stringify([]))}n.append("tagId",""),n.append("page",s.page),t({method:"POST",url:e.link+"/gcsscrm/user/getAllMsg",data:n,headers:{"Content-Type":void 0},transformRequest:angular.identity}).success(function(e){if(200==e.code){$(".page4-checkbox-toggle-1").removeClass("fa-check-square-o").addClass("fa-square-o"),$(".checkbox-toggle").attr("data","0"),a.initData=e.data.contactList,a.initDatacontactCount=e.data.contactCount;for(var t=[],o=0;o<a.initData.length;o++)if(a.initData[o].tagList.length>0){t.push(a.initData[o].tagList[0].tagname.split(","));for(var s=[],n=0;n<t.length;n++)s.push(t[n]);a.initData[o].tagList=s,s=[],t=[]}}setTimeout(function(){var e=$(".blod");for(o=0;o<e.length;o++){var a=o;1==e[o].attributes[0].nodeValue&&$(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),2==e[o].attributes[0].nodeValue&&($(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod2").addClass("ox").css("border","none")),3==e[o].attributes[0].nodeValue&&($(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod2").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod3").addClass("ox").css("border","none")),4==e[o].attributes[0].nodeValue&&($(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod2").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod3").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod4").addClass("ox").css("border","none")),5==e[o].attributes[0].nodeValue&&($(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod2").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod3").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod4").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod5").addClass("ox").css("border","none"))}$('.mailbox-messages input[type="checkbox"]').iCheck({checkboxClass:"icheckbox_flat-blue",radioClass:"iradio_flat-blue"})},40)})}}),setTimeout(function(){var e=$(".blod");for(n=0;n<e.length;n++){var a=n;1==e[n].attributes[0].nodeValue&&$(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),2==e[n].attributes[0].nodeValue&&($(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod2").addClass("ox").css("border","none")),3==e[n].attributes[0].nodeValue&&($(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod2").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod3").addClass("ox").css("border","none")),4==e[n].attributes[0].nodeValue&&($(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod2").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod3").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod4").addClass("ox").css("border","none")),5==e[n].attributes[0].nodeValue&&($(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod2").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod3").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod4").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod5").addClass("ox").css("border","none"))}$('.mailbox-messages input[type="checkbox"]').iCheck({checkboxClass:"icheckbox_flat-blue",radioClass:"iradio_flat-blue"})},40)}else $(".alert2").show(300).find(".alertCon").html("数据加载失败，请刷新页面或再次登陆"),setTimeout(function(){$(".alert2").hide(300)},2e3)})}else{var c=new FormData;c.append("tagName",o),t({method:"POST",url:e.link+"/gcsscrm/user/selectTagNameByLike",data:c,headers:{"Content-Type":void 0},transformRequest:angular.identity}).success(function(e){200==e.code&&($(".page4-checkbox-toggle-1").removeClass("fa-check-square-o").addClass("fa-square-o"),$(".checkbox-toggle").attr("data","0"),a.tagSearchList=e.data.tagList)})}}),a.wcmmd="",$(document).on("click",".tag-touch-list li",function(){var o=$(this).attr("data"),s=($(this).attr("data1"),new FormData),n=$(".isChange"),d=$(".page4-group-group"),r=[],l=[];if(n.length>0){for(i=0;i<n.length;i++)1==n[i].attributes[1].value&&r.push(n[i].attributes[4].value);r.length>0?s.append("weChatIds",JSON.stringify(r)):s.append("accountId",a.page4UserIdImportant)}if(d.length>0){for(var i=0;i<d.length;i++)1==d[i].attributes[1].value&&l.push(d[i].attributes[4].value);l.length>0?s.append("groupIds",JSON.stringify(l)):s.append("groupIds",JSON.stringify([]))}s.append("tagId",o),t({method:"POST",url:e.link+"/gcsscrm/user/getAllMsg",data:s,headers:{"Content-Type":void 0},transformRequest:angular.identity}).success(function(s){if(200==s.code){$(".page4-checkbox-toggle-1").removeClass("fa-check-square-o").addClass("fa-square-o"),$(".checkbox-toggle").attr("data","0"),$(".page1-change-block-two1").hide(),a.jilukaka=0,a.initData=s.data.contactList,a.initDatacontactCount=s.data.contactCount;for(var n=[],d=0;d<a.initData.length;d++)if(a.initData[d].tagList.length>0){n.push(a.initData[d].tagList[0].tagname.split(","));for(var r=[],l=0;l<n.length;l++)r.push(n[l]);a.initData[d].tagList=r,r=[],n=[]}$(".M-box1").pagination({totalData:a.initDatacontactCount,showData:10,coping:!0,callback:function(s){var n={page:s.getCurrent()},d=new FormData,r=$(".isChange"),l=$(".page4-group-group"),i=[],c=[];if(r.length>0){for(u=0;u<r.length;u++)1==r[u].attributes[1].value&&i.push(r[u].attributes[4].value);i.length>0?d.append("weChatIds",JSON.stringify(i)):d.append("accountId",a.page4UserIdImportant)}if(l.length>0){for(var u=0;u<l.length;u++)1==l[u].attributes[1].value&&c.push(l[u].attributes[4].value);c.length>0?d.append("groupIds",JSON.stringify(c)):d.append("groupIds",JSON.stringify([]))}d.append("tagId",o),d.append("page",n.page),t({method:"POST",url:e.link+"/gcsscrm/user/getAllMsg",data:d,headers:{"Content-Type":void 0},transformRequest:angular.identity}).success(function(e){if(200==e.code){$(".page4-checkbox-toggle-1").removeClass("fa-check-square-o").addClass("fa-square-o"),$(".checkbox-toggle").attr("data","0"),$(".page1-change-block-two1").hide(),a.jilukaka=0,a.initData=e.data.contactList,a.initDatacontactCount=e.data.contactCount;for(var t=[],o=0;o<a.initData.length;o++)if(a.initData[o].tagList.length>0){t.push(a.initData[o].tagList[0].tagname.split(","));for(var s=[],n=0;n<t.length;n++)s.push(t[n]);a.initData[o].tagList=s,s=[],t=[]}setTimeout(function(){var e=$(".blod");for(o=0;o<e.length;o++){var a=o;1==e[o].attributes[0].nodeValue&&$(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),2==e[o].attributes[0].nodeValue&&($(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod2").addClass("ox").css("border","none")),3==e[o].attributes[0].nodeValue&&($(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod2").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod3").addClass("ox").css("border","none")),4==e[o].attributes[0].nodeValue&&($(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod2").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod3").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod4").addClass("ox").css("border","none")),5==e[o].attributes[0].nodeValue&&($(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod2").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod3").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod4").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod5").addClass("ox").css("border","none"))}$('.mailbox-messages input[type="checkbox"]').iCheck({checkboxClass:"icheckbox_flat-blue",radioClass:"iradio_flat-blue"})},40)}})}}),$(".alert1").show(300).find(".alertCon").html("数据加载完成"),setTimeout(function(){$(".alert1").hide(300)},2e3),setTimeout(function(){var e=$(".blod");for(d=0;d<e.length;d++){var a=d;1==e[d].attributes[0].nodeValue&&$(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),2==e[d].attributes[0].nodeValue&&($(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod2").addClass("ox").css("border","none")),3==e[d].attributes[0].nodeValue&&($(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod2").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod3").addClass("ox").css("border","none")),4==e[d].attributes[0].nodeValue&&($(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod2").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod3").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod4").addClass("ox").css("border","none")),5==e[d].attributes[0].nodeValue&&($(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod2").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod3").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod4").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod5").addClass("ox").css("border","none"))}$('.mailbox-messages input[type="checkbox"]').iCheck({checkboxClass:"icheckbox_flat-blue",radioClass:"iradio_flat-blue"})},40)}else $(".alert2").show(300).find(".alertCon").html("数据加载失败，请刷新页面或再次登陆"),setTimeout(function(){$(".alert2").hide(300)},2e3)})}),a.GroupNumJilu=0,$(".chose-two").click(function(){a.page4One=0,a.jilukaka=0,a.jiluSree=0,a.jiluFour=0,$(".page1-change-block").css("display","none"),$(".page1-change-block-two1").css("display","none"),$(".page1-change-block-sree").css("display","none"),$(".page1-change-block-four").css("display","none"),a.moreGiveGroup=!1,a.oneGiveGroup=!1,a.oneTagFight=!1,a.sayGroup=!1,a.allTagFightShow=!1,a.chatAll=!1,a.giveGroup=!1,a.GroupNumJilu++,a.GroupNumJilu%2==0?($(".page1-change-block-two").css("display","none"),$(".telephone").css("display","none")):$(".page1-change-block-two").css("display","block")}),a.jiluSree=0,$(".chose-sree").click(function(){$(".page1-change-block").css("display","none"),$(".page1-change-block-two1").css("display","none"),$(".page1-change-block-two").css("display","none"),$(".page1-change-block-four").css("display","none"),a.page4One=0,a.GroupNumJilu=0,a.jilukaka=0,a.jiluFour=0,a.jiluSree++,a.jiluSree%2==0?$(".page1-change-block-sree").css("display","none"):$(".page1-change-block-sree").css("display","block")}),a.jiluFour=0,$(".chose-four").click(function(){$(".page1-change-block").css("display","none"),$(".page1-change-block-two1").css("display","none"),$(".page1-change-block-two").css("display","none"),$(".page1-change-block-sree").css("display","none"),a.page4One=0,a.GroupNumJilu=0,a.jilukaka=0,a.jiluSree=0,a.jiluFour++,a.jiluFour%2==0?$(".page1-change-block-four").css("display","none"):$(".page1-change-block-four").css("display","block")}),$(document).on("click",".page4-checkbox-One-one",function(){var e=$(this).attr("data1"),t=$(this).attr("data2");0==$(this).attr("data")?($(this).prev().addClass("on"),$(this).attr("data","1"),a.data1[t][e].state=1):($(this).prev().removeClass("on"),$(this).attr("data","0"),a.data1[t][e].state=0)}),$(".checkAllTelephone").click(function(){n=0,$(".checkbox-toggle-change").prev().removeClass("on");var e=$(this).attr("data"),a=$(".isChange");if(0==e){for(t=0;t<a.length;t++)a[t].attributes[1].value=1,$(".isChange").eq(t).prev().addClass("on");$(this).attr("data","1").prev().addClass("on")}else{for(var t=0;t<a.length;t++)a[t].attributes[1].value=0,$(".isChange").eq(t).prev().removeClass("on");$(this).attr("data","0").prev().removeClass("on")}}),$(".page4-group-checkall").click(function(){d=0,$(".page4-group-checkall-change").prev().removeClass("on");var e=$(this).attr("data"),a=$(".page4-isChange");if(0==e){for(t=0;t<a.length;t++)a[t].attributes[1].value=1,$(".page4-isChange").prev().addClass("on");$(this).attr("data","1").prev().addClass("on")}else{for(var t=0;t<a.length;t++)a[t].attributes[1].value=0,$(".page4-isChange").prev().removeClass("on");$(this).attr("data","0").prev().removeClass("on")}});var n=0;$(".checkbox-toggle-change").click(function(){++n%2==0?($(this).prev().removeClass("on"),$(this).attr("data","0")):($(this).prev().addClass("on"),$(this).attr("data","1")),$(".checkAllTelephone").attr("data","0").prev().removeClass("on");for(var e=$(".isChange"),a=0;a<e.length;a++)0==e[a].attributes[1].value?($(".isChange").eq(a).prev().addClass("on"),e[a].attributes[1].value=1):($(".isChange").eq(a).prev().removeClass("on"),e[a].attributes[1].value=0)});var d=0;$(".page4-group-checkall-change").click(function(){++d%2==0?($(this).prev().removeClass("on"),$(this).attr("data","0")):($(this).prev().addClass("on"),$(this).attr("data","1")),$(".page4-group-checkall").attr("data","0").prev().removeClass("on");$(".page4-group-group");for(var e=$(".page4-isChange"),a=0;a<e.length;a++)1==e[a].attributes[1].value?(e[a].attributes[1].value=0,$(".page4-isChange").eq(a).prev().removeClass("on")):(e[a].attributes[1].value=1,$(".page4-isChange").eq(a).prev().addClass("on"))})}),a.page4Click=function(e){0==$(".page4-wechat-change")[e].attributes[1].value?($(".page4-wechat-change").eq(e).prev().addClass("on"),$(".page4-wechat-change")[e].attributes[1].value=1):($(".page4-wechat-change").eq(e).prev().removeClass("on"),$(".page4-wechat-change")[e].attributes[1].value=0)},a.page4Click1=function(e){0==$(".page4-group-group")[e].attributes[1].value?($(".page4-group-group").eq(e).prev().addClass("on"),$(".page4-group-group")[e].attributes[1].value=1):($(".page4-group-group").eq(e).prev().removeClass("on"),$(".page4-group-group")[e].attributes[1].value=0)},a.importantWechatIds="",a.page4WechatsendMsg=function(){for(var o=$(".isChange"),s=$(".page4-group-group"),n=[],d=[],r=0;r<o.length;r++)1==o[r].attributes[1].value&&d.push(o[r].attributes[4].value);if(0==d.length)$(".alert2").show(300).find(".alertCon").html("请选择相关微信号"),setTimeout(function(){$(".alert2").hide(300)},2e3);else{var l=new FormData;if(s.length>0){for(r=0;r<s.length;r++)1==s[r].attributes[1].value&&n.push(s[r].attributes[4].value);n.length>0?l.append("groupIds",JSON.stringify(n)):l.append("groupIds",JSON.stringify([]))}var i=$(".tag-touch").attr("data");$(".page1-change-block").css("display","none"),a.page4One=0,a.importantWechatIds=d,void 0==i&&(i=""),l.append("weChatIds",JSON.stringify(d)),l.append("tagId",i),t({method:"POST",url:e.link+"/gcsscrm/user/getAllMsg",data:l,headers:{"Content-Type":void 0},transformRequest:angular.identity}).success(function(o){if(200==o.code){$(".page4-checkbox-toggle-1").removeClass("fa-check-square-o").addClass("fa-square-o"),$(".checkbox-toggle").attr("data","0"),a.page2Wechats=[],a.page2Wechats=d,a.initDatacontactCount=o.data.contactCount,a.initData=o.data.contactList,a.initpages=o.data.contactCount;for(var s=[],n=0;n<a.initData.length;n++)if(a.initData[n].tagList.length>0){s.push(a.initData[n].tagList[0].tagname.split(","));for(var r=[],l=0;l<s.length;l++)r.push(s[l]);a.initData[n].tagList=r,r=[],s=[]}$(".M-box1").pagination({totalData:a.initDatacontactCount,showData:10,coping:!0,callback:function(o){var s={page:o.getCurrent()},n=new FormData,r=$(".isChange"),l=$(".page4-group-group"),i=$(".tag-touch").attr("data"),c=[],u=[];if(void 0==i&&(i=""),r.length>0){for(g=0;g<r.length;g++)1==r[g].attributes[1].value&&c.push(r[g].attributes[4].value);c.length>0?n.append("weChatIds",JSON.stringify(c)):n.append("accountId",a.page4UserIdImportant)}if(l.length>0){for(var g=0;g<l.length;g++)1==l[g].attributes[1].value&&u.push(l[g].attributes[4].value);u.length>0?n.append("groupIds",JSON.stringify(u)):n.append("groupIds",JSON.stringify([]))}n.append("tagId",i),n.append("page",s.page),t({method:"POST",url:e.link+"/gcsscrm/user/getAllMsg",data:n,headers:{"Content-Type":void 0},transformRequest:angular.identity}).success(function(e){if(200==e.code){$(".page4-checkbox-toggle-1").removeClass("fa-check-square-o").addClass("fa-square-o"),$(".checkbox-toggle").attr("data","0"),a.page2Wechats=[],a.page2Wechats=d,a.initDatacontactCount=e.data.contactCount,a.initData=e.data.contactList,a.initpages=e.data.contactCount;for(var t=[],o=0;o<a.initData.length;o++)if(a.initData[o].tagList.length>0){t.push(a.initData[o].tagList[0].tagname.split(","));for(var s=[],n=0;n<t.length;n++)s.push(t[n]);a.initData[o].tagList=s,s=[],t=[]}setTimeout(function(){var e=$(".blod");for(o=0;o<e.length;o++){var a=o;1==e[o].attributes[0].nodeValue&&$(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),2==e[o].attributes[0].nodeValue&&($(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod2").addClass("ox").css("border","none")),3==e[o].attributes[0].nodeValue&&($(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod2").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod3").addClass("ox").css("border","none")),4==e[o].attributes[0].nodeValue&&($(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod2").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod3").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod4").addClass("ox").css("border","none")),5==e[o].attributes[0].nodeValue&&($(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod2").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod3").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod4").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod5").addClass("ox").css("border","none"))}$('.mailbox-messages input[type="checkbox"]').iCheck({checkboxClass:"icheckbox_flat-blue",radioClass:"iradio_flat-blue"})},40)}})}}),setTimeout(function(){var e=$(".blod");for(n=0;n<e.length;n++){var a=n;1==e[n].attributes[0].nodeValue&&$(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),2==e[n].attributes[0].nodeValue&&($(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod2").addClass("ox").css("border","none")),3==e[n].attributes[0].nodeValue&&($(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod2").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod3").addClass("ox").css("border","none")),4==e[n].attributes[0].nodeValue&&($(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod2").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod3").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod4").addClass("ox").css("border","none")),5==e[n].attributes[0].nodeValue&&($(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod2").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod3").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod4").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod5").addClass("ox").css("border","none"))}$('.mailbox-messages input[type="checkbox"]').iCheck({checkboxClass:"icheckbox_flat-blue",radioClass:"iradio_flat-blue"})},40),$(".alert1").show(300).find(".alertCon").html("微信号查找数据加载成功"),setTimeout(function(){$(".alert1").hide(300)},2e3)}else $(".alert2").show(300).find(".alertCon").html("数据加载失败，请刷新页面或再次登陆"),setTimeout(function(){$(".alert2").hide(300)},2e3)})}},a.allGroupChecks=[],a.page4GroupsendMsg=function(){for(var o=$(".page4-group-group"),s=$(".isChange"),n=$(".tag-touch").attr("data"),d=[],r=0,l=[];r<o.length;r++)1==o[r].attributes[1].value&&l.push(o[r].attributes[4].value);if(0==l.length)$(".alert2").show(300).find(".alertCon").html("请选择微信号"),setTimeout(function(){$(".alert2").hide(300)},2e3);else{var i=new FormData;if(s.length>0){for(r=0;r<s.length;r++)1==s[r].attributes[1].value&&d.push(s[r].attributes[4].value);d.length>0?i.append("weChatIds",JSON.stringify(d)):i.append("accountId",a.page4UserIdImportant)}$(".page1-change-block-two").css("display","none"),a.GroupNumJilu=0,i.append("groupIds",JSON.stringify(l)),i.append("tagId",n),a.allGroupChecks=l,t({method:"POST",url:e.link+"/gcsscrm/user/getAllMsg",data:i,headers:{"Content-Type":void 0},transformRequest:angular.identity}).success(function(o){if(200==o.code){$(".page4-checkbox-toggle-1").removeClass("fa-check-square-o").addClass("fa-square-o"),$(".checkbox-toggle").attr("data","0"),a.initDatacontactCount=o.data.contactCount,a.initpages=[],a.initData=o.data.contactList;for(var s=[],n=0;n<a.initData.length;n++)if(a.initData[n].tagList.length>0){s.push(a.initData[n].tagList[0].tagname.split(","));for(var d=[],r=0;r<s.length;r++)d.push(s[r]);a.initData[n].tagList=d,d=[],s=[]}$(".M-box1").pagination({totalData:a.initDatacontactCount,showData:10,coping:!0,callback:function(o){var s={page:o.getCurrent()},n=new FormData,d=$(".isChange"),r=$(".page4-group-group"),l=$(".tag-touch").attr("data"),i=[],c=[];if(void 0==l&&(l=""),d.length>0){for(u=0;u<d.length;u++)1==d[u].attributes[1].value&&i.push(d[u].attributes[4].value);i.length>0?n.append("weChatIds",JSON.stringify(i)):n.append("accountId",a.page4UserIdImportant)}if(r.length>0){for(var u=0,g=[];u<r.length;u++)1==r[u].attributes[1].value&&c.push(r[u].attributes[4].value);c.length>0?n.append("groupIds",JSON.stringify(c)):n.append("groupIds",JSON.stringify([]))}n.append("tagId",l),n.append("page",s.page),a.allGroupChecks=g,t({method:"POST",url:e.link+"/gcsscrm/user/getAllMsg",data:n,headers:{"Content-Type":void 0},transformRequest:angular.identity}).success(function(e){if(200==e.code){$(".page4-checkbox-toggle-1").removeClass("fa-check-square-o").addClass("fa-square-o"),$(".checkbox-toggle").attr("data","0"),a.initpages=[],a.initData=e.data.contactList;for(var t=[],o=0;o<a.initData.length;o++)if(a.initData[o].tagList.length>0){t.push(a.initData[o].tagList[0].tagname.split(","));for(var s=[],n=0;n<t.length;n++)s.push(t[n]);a.initData[o].tagList=s,s=[],t=[]}setTimeout(function(){var e=$(".blod");for(o=0;o<e.length;o++){var a=o;1==e[o].attributes[0].nodeValue&&$(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),2==e[o].attributes[0].nodeValue&&($(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod2").addClass("ox").css("border","none")),3==e[o].attributes[0].nodeValue&&($(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod2").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod3").addClass("ox").css("border","none")),4==e[o].attributes[0].nodeValue&&($(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod2").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod3").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod4").addClass("ox").css("border","none")),5==e[o].attributes[0].nodeValue&&($(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod2").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod3").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod4").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod5").addClass("ox").css("border","none"))}$('.mailbox-messages input[type="checkbox"]').iCheck({checkboxClass:"icheckbox_flat-blue",radioClass:"iradio_flat-blue"})},40)}})}}),setTimeout(function(){var e=$(".blod");for(n=0;n<e.length;n++){var a=n;1==e[n].attributes[0].nodeValue&&$(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),2==e[n].attributes[0].nodeValue&&($(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod2").addClass("ox").css("border","none")),3==e[n].attributes[0].nodeValue&&($(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod2").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod3").addClass("ox").css("border","none")),4==e[n].attributes[0].nodeValue&&($(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod2").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod3").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod4").addClass("ox").css("border","none")),5==e[n].attributes[0].nodeValue&&($(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod2").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod3").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod4").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod5").addClass("ox").css("border","none"))}$('.mailbox-messages input[type="checkbox"]').iCheck({checkboxClass:"icheckbox_flat-blue",radioClass:"iradio_flat-blue"})},40),$(".alert1").show(300).find(".alertCon").html("分组名称查找数据加载成功"),setTimeout(function(){$(".alert1").hide(300)},2e3)}else $(".alert2").show(300).find(".alertCon").html("数据加载失败，请刷新页面或再次登陆"),setTimeout(function(){$(".alert2").hide(300)},2e3)})}},a.mosego=function(e){$(".telephone").css("display","block"),setTimeout(function(){for(var e=$(".page4-checkbox-One-one"),a=0;a<e.length;a++)e[a].checked=!1;for(var t=0;t<e.length;t++)0==e[t].attributes[1].value||$(".page4-checkbox-One-one").eq(t).prev().addClass("on")},100)},a.giveGroup=!1,a.chatAll=!1,a.page4closMsg=function(){a.giveGroup=!1},a.page4trueShow=function(o){a.page4One=0,a.GroupNumJilu=0,a.jilukaka=0,a.jiluSree=0,a.jiluFour=0,$(".page1-change-block").css("display","none"),$(".page1-change-block-two1").css("display","none"),$(".page1-change-block-two").css("display","none"),$(".page1-change-block-sree").css("display","none"),$(".page1-change-block-four").css("display","none"),a.friendMoreId=o,a.moreGiveGroup=!1,a.oneGiveGroup=!1,a.oneTagFight=!1,a.sayGroup=!1,a.allTagFightShow=!1,a.chatAll=!1,a.giveGroup=!0;var s=new FormData;s.append("contactId",o),t({method:"POST",url:e.link+"/gcsscrm/user/getContactMsgById",data:s,headers:{"Content-Type":void 0},transformRequest:angular.identity}).success(function(e){200==e.code?(a.FriendsMore="",a.FriendsMoreName="",a.FriendsMoreCity="",a.FriendsMoreprovince="",a.FriendsMorewechatnumber="",a.FriendsMoreismarred="",a.FriendsMorepersonnumber="",a.FriendsMoreincomelevel="",a.Friendstelnumber="",a.FriendsMoreTime="",a.FriendsMorePhoto="",a.FriendsMoreqq="",a.FriendsMorerealname="",a.FriendsMoresex="",a.FriendsMornotename="",a.FriendsMordescription="",a.FriendsMortagList="",a.FriendsMorwechat="",a.FriendsMortagList=e.data.contact.tagList,a.FriendsMorwechat=e.data.contact.wechat,void 0!=e.data.contact.wechat.wechatnickname?a.Friendsdnkashd=e.data.contact.wechat.wechatnickname:a.Friendsdnkashd="",a.Friendslkj=e.data.contact.wechat.device.devicenumber,a.FriendsMore=e.data.contact,a.FriendsMoreName=a.FriendsMore.nickname,a.FriendsMoreCity=a.FriendsMore.city,a.FriendsMoreprovince=a.FriendsMore.province,a.FriendsMorewechatnumber=a.FriendsMore.wechatnumber,a.FriendsMoreismarred=a.FriendsMore.ismarred,a.FriendsMorepersonnumber=a.FriendsMore.personnumber,a.FriendsMoreincomelevel=a.FriendsMore.incomelevel,a.FriendsMoreprofilephotol=a.FriendsMore.profilephoto,a.Friendstelnumber=a.FriendsMore.telnumber,void 0!=e.data.contact.birthtime?a.FriendsMoreTime=a.FriendsMore.birthtime.slice(0,10):a.FriendsMoreTime="",a.FriendsMorePhoto=a.FriendsMore.profilephoto,a.FriendsMoreqq=a.FriendsMore.qqnumber,a.FriendsMorerealname=a.FriendsMore.realname,a.FriendsMoresex=a.FriendsMore.sex,a.FriendsMornotename=a.FriendsMore.notename,a.FriendsMordescription=a.FriendsMore.description,setTimeout(function(){0==a.FriendsMoresex?$('.page4-chose-select-sex option[value="0"]').attr("selected",!0).siblings().attr("selected",!1):1==a.FriendsMoresex?$('.page4-chose-select-sex option[value="1"]').attr("selected",!0).siblings().attr("selected",!1):$('.page4-chose-select-sex option[value="2"]').attr("selected",!0).siblings().attr("selected",!1),0==a.FriendsMoreismarred?$('.page4-chose-select-ismarred option[value="0"]').attr("selected",!0).siblings().attr("selected",!1):1==a.FriendsMoreismarred?$('.page4-chose-select-ismarred option[value="1"]').attr("selected",!0).siblings().attr("selected",!1):$('.page4-chose-select-ismarred option[value="2"]').attr("selected",!0).siblings().attr("selected",!1),0==a.FriendsMoreincomelevel?$('.page4-chose-select-incomelevel option[value="0"]').attr("selected",!0).siblings().attr("selected",!1):1==a.FriendsMoreincomelevel?$('.page4-chose-select-incomelevel option[value="1"]').attr("selected",!0).siblings().attr("selected",!1):2==a.FriendsMoreincomelevel?$('.page4-chose-select-incomelevel option[value="2"]').attr("selected",!0).siblings().attr("selected",!1):3==a.FriendsMoreincomelevel?$('.page4-chose-select-incomelevel option[value="3"]').attr("selected",!0).siblings().attr("selected",!1):$('.page4-chose-select-incomelevel option[value="4"]').attr("selected",!0).siblings().attr("selected",!1)},50)):($(".alert2").show(300).find(".alertCon").html("数据加载失败，请刷新页面或再次登陆"),setTimeout(function(){$(".alert2").hide(300)},2e3))})},a.page4sendMsg=function(){var o=new FormData,s=$(".page4-chose-select-sex ").val(),n=$(".page4-chose-select-ismarred ").val(),d=$(".page4-chose-select-incomelevel ").val(),r=$(".FriendsMordescription").val();o.append("notename",a.FriendsMornotename),o.append("telnumber",a.Friendstelnumber),o.append("qqnumber",a.FriendsMoreqq),o.append("personnumber",a.FriendsMorepersonnumber),o.append("realname",a.FriendsMorerealname),o.append("city",a.FriendsMoreCity),o.append("province",a.FriendsMoreprovince),o.append("description",r),o.append("ismarred",n),o.append("incomelevel",d),o.append("sex",s),o.append("id",a.friendMoreId),o.append("wechatnumber",a.FriendsMorewechatnumber),t({method:"POST",url:e.link+"/gcsscrm/user/modifyContactMsg",data:o,headers:{"Content-Type":void 0},transformRequest:angular.identity}).success(function(o){if(200==o.code){$(".page4-checkbox-toggle-1").removeClass("fa-check-square-o").addClass("fa-square-o"),$(".checkbox-toggle").attr("data","0");var s=new FormData,n=$(".isChange"),d=$(".page4-group-group"),r=$(".tag-touch").attr("data"),l=[],i=[];if(void 0==r&&(r=""),n.length>0){for(c=0;c<n.length;c++)1==n[c].attributes[1].value&&l.push(n[c].attributes[4].value);l.length>0?s.append("weChatIds",JSON.stringify(l)):s.append("accountId",a.page4UserIdImportant)}if(d.length>0){for(var c=0;c<d.length;c++)1==d[c].attributes[1].value&&i.push(d[c].attributes[4].value);i.length>0?s.append("groupIds",JSON.stringify(i)):s.append("groupIds",JSON.stringify([]))}s.append("tagId",r),t({method:"POST",url:e.link+"/gcsscrm/user/getAllMsg",data:s,headers:{"Content-Type":void 0},transformRequest:angular.identity}).success(function(o){if(200==o.code){$(".page4-checkbox-toggle-1").removeClass("fa-check-square-o").addClass("fa-square-o"),$(".checkbox-toggle").attr("data","0"),a.initData=o.data.contactList,a.initDatacontactCount=o.data.contactCount;for(var s=[],n=0;n<a.initData.length;n++)if(a.initData[n].tagList.length>0){s.push(a.initData[n].tagList[0].tagname.split(","));for(var d=[],r=0;r<s.length;r++)d.push(s[r]);a.initData[n].tagList=d,d=[],s=[]}$(".M-box1").pagination({totalData:a.initDatacontactCount,showData:10,coping:!0,callback:function(o){var s={page:o.getCurrent()},n=new FormData,d=$(".isChange"),r=$(".page4-group-group"),l=$(".tag-touch").attr("data"),i=[],c=[];if(void 0==l&&(l=""),d.length>0){for(u=0;u<d.length;u++)1==d[u].attributes[1].value&&i.push(d[u].attributes[4].value);i.length>0?n.append("weChatIds",JSON.stringify(i)):n.append("accountId",a.page4UserIdImportant)}if(r.length>0){for(var u=0;u<r.length;u++)1==r[u].attributes[1].value&&c.push(r[u].attributes[4].value);c.length>0?n.append("groupIds",JSON.stringify(c)):n.append("groupIds",JSON.stringify([]))}n.append("tagId",l),n.append("page",s.page),t({method:"POST",url:e.link+"/gcsscrm/user/getAllMsg",data:n,headers:{"Content-Type":void 0},transformRequest:angular.identity}).success(function(e){if(200==e.code){$(".page4-checkbox-toggle-1").removeClass("fa-check-square-o").addClass("fa-square-o"),$(".checkbox-toggle").attr("data","0"),a.initData=e.data.contactList,a.initDatacontactCount=e.data.contactCount;for(var t=[],o=0;o<a.initData.length;o++)if(a.initData[o].tagList.length>0){t.push(a.initData[o].tagList[0].tagname.split(","));for(var s=[],n=0;n<t.length;n++)s.push(t[n]);a.initData[o].tagList=s,s=[],t=[]}}})}})}else $(".alert2").show(300).find(".alertCon").html("数据加载失败，请刷新页面或稍后再试"),setTimeout(function(){$(".alert2").hide(300)},2e3);setTimeout(function(){var e=$(".blod");for(n=0;n<e.length;n++){var a=n;1==e[n].attributes[0].nodeValue&&$(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),2==e[n].attributes[0].nodeValue&&($(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod2").addClass("ox").css("border","none")),3==e[n].attributes[0].nodeValue&&($(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod2").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod3").addClass("ox").css("border","none")),4==e[n].attributes[0].nodeValue&&($(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod2").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod3").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod4").addClass("ox").css("border","none")),5==e[n].attributes[0].nodeValue&&($(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod2").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod3").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod4").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod5").addClass("ox").css("border","none"))}$('.mailbox-messages input[type="checkbox"]').iCheck({checkboxClass:"icheckbox_flat-blue",radioClass:"iradio_flat-blue"})},40),a.giveGroup=!1})}else $(".alert2").show(300).find(".alertCon").html("好友详细资料修改失败，请刷新页面稍后再试"),setTimeout(function(){$(".alert2").hide(300)},2e3)})},a.page4ChatClosMsg=function(){a.chatAll=!1},a.page4ChatOpenMsg=function(o){a.page4One=0,a.GroupNumJilu=0,a.jilukaka=0,a.jiluSree=0,a.jiluFour=0,$(".page1-change-block").css("display","none"),$(".page1-change-block-two1").css("display","none"),$(".page1-change-block-two").css("display","none"),$(".page1-change-block-sree").css("display","none"),$(".page1-change-block-four").css("display","none"),a.lastTimeChat="",a.moreGiveGroup=!1,a.oneGiveGroup=!1,a.oneTagFight=!1,a.sayGroup=!1,a.allTagFightShow=!1,a.chatAll=!0,a.giveGroup=!1;var s=new FormData;s.append("contactId",o),t({method:"POST",data:s,url:e.link+"/gcsscrm/user/getChatStatByContactId",headers:{"Content-Type":void 0},transformRequest:angular.identity}).success(function(e){200==e.code?a.lastTimeChat=e.data.chatStat:($(".alert2").show(300).find(".alertCon").html("沟通时间数据加载失败，请刷新页面或稍后再试"),setTimeout(function(){$(".alert2").hide(300)},2e3))})},a.allTagFightShow=!1,a.allchecks2=[],a.allTagFightShowMe=function(){var o=$(".checkData"),s=$(".icheckbox_flat-blue");for(i2=0;i2<s.length;i2++){i2;"true"==s[i2].attributes[1].value&&(a.allchecks2.push(Number(o.eq(i2).attr("data"))),console.log(a.allchecks2))}a.allchecks2.length<=0?($(".alert2").show(300).find(".alertCon").html("请选择需要进行批量打标签的好友"),setTimeout(function(){$(".alert2").hide(300)},2e3)):(a.moreGiveGroup=!1,a.oneGiveGroup=!1,a.oneTagFight=!1,a.sayGroup=!1,a.allTagFightShow=!0,a.chatAll=!1,a.giveGroup=!1,t({method:"POST",url:e.link+"/gcsscrm/user/getTheTopTenTag",headers:{"Content-Type":void 0},transformRequest:angular.identity}).success(function(e){200==e.code?(a.recommendTag=e.data.tagList,$(".page1-change-block-sree").css("display","none"),a.jiluSree=0,a.allchecks2=[]):($(".alert2").show(300).find(".alertCon").html("参考标签数据加载失败，请刷新页面或稍后再试"),setTimeout(function(){$(".alert2").hide(300)},2e3))}))},a.page4allTagFightClosMsg=function(){a.allTagFightShow=!1,a.addTagShowMe=!1,$(".tagList").html("")},a.allchecks3=[],a.page4allTagFightSendMsg=function(){var o=$(".checkData"),s=$(".icheckbox_flat-blue");for(i2=0;i2<s.length;i2++){i2;"true"==s[i2].attributes[1].value&&a.allchecks3.push(Number(o.eq(i2).attr("data")))}if(a.allchecks3.length<=0)return $(".alert2").show(300).find(".alertCon").html("请选择需要进行批量打标签的好友"),void setTimeout(function(){$(".alert2").hide(300)},2e3);if(0==$(".page4-addTag1>.tagsContaine>.tagList ")[0].children.length)$(".alert2").show(300).find(".alertCon").html("请选择或输入标签名"),setTimeout(function(){$(".alert2").hide(300)},2e3);else{for(var n=$(".tagItem1"),d=[],r=[],l=0;l<n.length;l++)d.push(n[l].attributes.id.value),r.push(n[l].innerText);$(".tagList").html("");var i=new FormData;i.append("tagNames",JSON.stringify(r)),i.append(" tagIds",JSON.stringify(d)),i.append("contactIds",JSON.stringify(a.allchecks3)),t({method:"POST",url:e.link+"/gcsscrm/user/addTagsForContact",data:i,headers:{"Content-Type":void 0},transformRequest:angular.identity}).success(function(o){if(a.allchecks3=[],200==o.code){var s=new FormData,n=$(".isChange"),d=$(".page4-group-group"),r=[],l=[];if(void 0==(i=$(".tag-touch").attr("data"))&&(i=""),n.length>0){for(c=0;c<n.length;c++)1==n[c].attributes[1].value&&r.push(n[c].attributes[4].value);r.length>0?s.append("weChatIds",JSON.stringify(r)):s.append("accountId",a.page4UserIdImportant)}if(d.length>0){for(c=0;c<d.length;c++)1==d[c].attributes[1].value&&l.push(d[c].attributes[4].value);l.length>0?s.append("groupIds",JSON.stringify(l)):s.append("groupIds",JSON.stringify([]))}s.append("tagId",i),t({method:"POST",url:e.link+"/gcsscrm/user/getAllMsg",data:s,headers:{"Content-Type":void 0},transformRequest:angular.identity}).success(function(o){if(200==o.code){$(".page4-checkbox-toggle-1").removeClass("fa-check-square-o").addClass("fa-square-o"),$(".checkbox-toggle").attr("data","0"),a.initData=o.data.contactList,a.initDatacontactCount=o.data.contactCount;for(var s=[],n=0;n<a.initData.length;n++)if(a.initData[n].tagList.length>0){s.push(a.initData[n].tagList[0].tagname.split(","));for(var d=[],r=0;r<s.length;r++)d.push(s[r]);a.initData[n].tagList=d,d=[],s=[]}$(".M-box1").pagination({totalData:a.initDatacontactCount,showData:10,coping:!0,callback:function(o){var s={page:o.getCurrent()};a.allchecks3=[];var n=new FormData,d=$(".isChange"),r=$(".page4-group-group"),l=$(".tag-touch").attr("data"),i=[],c=[];if(void 0==l&&(l=""),d.length>0){for(u=0;u<d.length;u++)1==d[u].attributes[1].value&&i.push(d[u].attributes[4].value);i.length>0?n.append("weChatIds",JSON.stringify(i)):n.append("accountId",a.page4UserIdImportant)}if(r.length>0){for(var u=0;u<r.length;u++)1==r[u].attributes[1].value&&c.push(r[u].attributes[4].value);c.length>0?n.append("groupIds",JSON.stringify(c)):n.append("groupIds",JSON.stringify([]))}n.append("tagId",l),n.append("page",s.page),t({method:"POST",url:e.link+"/gcsscrm/user/getAllMsg",data:n,headers:{"Content-Type":void 0},transformRequest:angular.identity}).success(function(e){if(200==e.code){$(".page4-checkbox-toggle-1").removeClass("fa-check-square-o").addClass("fa-square-o"),$(".checkbox-toggle").attr("data","0"),a.initData=e.data.contactList,a.initDatacontactCount=e.data.contactCount;for(var t=[],o=0;o<a.initData.length;o++)if(a.initData[o].tagList.length>0){t.push(a.initData[o].tagList[0].tagname.split(","));for(var s=[],n=0;n<t.length;n++)s.push(t[n]);a.initData[o].tagList=s,s=[],t=[]}}})}}),setTimeout(function(){var e=$(".blod");for(n=0;n<e.length;n++){var a=n;1==e[n].attributes[0].nodeValue&&$(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),2==e[n].attributes[0].nodeValue&&($(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod2").addClass("ox").css("border","none")),3==e[n].attributes[0].nodeValue&&($(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod2").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod3").addClass("ox").css("border","none")),4==e[n].attributes[0].nodeValue&&($(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod2").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod3").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod4").addClass("ox").css("border","none")),5==e[n].attributes[0].nodeValue&&($(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod2").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod3").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod4").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod5").addClass("ox").css("border","none"))}$('.mailbox-messages input[type="checkbox"]').iCheck({checkboxClass:"icheckbox_flat-blue",radioClass:"iradio_flat-blue"})},40),a.allTagFightShow=!1,a.addTagShowMe=!1,$(".tagList").html(""),$(".alert1").show(300).find(".alertCon").html("批量打标签保存成功"),setTimeout(function(){$(".alert1").hide(300)},2e3)}else $(".alert2").show(300).find(".alertCon").html("标签保存失败，请刷新页面或稍后再试"),setTimeout(function(){$(".alert2").hide(300)},2e3)})}else if(202==o.code){var s=new FormData,n=$(".isChange"),d=$(".page4-group-group"),i=$(".tag-touch").attr("data"),r=[],l=[];if(void 0==i&&(i=""),n.length>0){for(c=0;c<n.length;c++)1==n[c].attributes[1].value&&r.push(n[c].attributes[4].value);r.length>0?s.append("weChatIds",JSON.stringify(r)):s.append("accountId",a.page4UserIdImportant)}if(d.length>0){for(var c=0;c<d.length;c++)1==d[c].attributes[1].value&&l.push(d[c].attributes[4].value);l.length>0?s.append("groupIds",JSON.stringify(l)):s.append("groupIds",JSON.stringify([]))}s.append("tagId",i),t({method:"POST",url:e.link+"/gcsscrm/user/getAllMsg",data:s,headers:{"Content-Type":void 0},transformRequest:angular.identity}).success(function(o){if(200==o.code){$(".page4-checkbox-toggle-1").removeClass("fa-check-square-o").addClass("fa-square-o"),$(".checkbox-toggle").attr("data","0"),a.initData=o.data.contactList,a.initDatacontactCount=o.data.contactCount;for(var s=[],n=0;n<a.initData.length;n++)if(a.initData[n].tagList.length>0){s.push(a.initData[n].tagList[0].tagname.split(","));for(var d=[],r=0;r<s.length;r++)d.push(s[r]);a.initData[n].tagList=d,d=[],s=[]}$(".M-box1").pagination({totalData:a.initDatacontactCount,showData:10,coping:!0,callback:function(o){o.getCurrent();a.allchecks3=[];var s=new FormData,n=$(".isChange"),d=$(".page4-group-group"),r=$(".tag-touch").attr("data"),l=[],i=[];if(void 0==r&&(r=""),n.length>0){for(c=0;c<n.length;c++)1==n[c].attributes[1].value&&l.push(n[c].attributes[4].value);l.length>0?s.append("weChatIds",JSON.stringify(l)):s.append("accountId",a.page4UserIdImportant)}if(d.length>0){for(var c=0;c<d.length;c++)1==d[c].attributes[1].value&&i.push(d[c].attributes[4].value);i.length>0?s.append("groupIds",JSON.stringify(i)):s.append("groupIds",JSON.stringify([]))}s.append("tagId",r),t({method:"POST",url:e.link+"/gcsscrm/user/getAllMsg",data:s,headers:{"Content-Type":void 0},transformRequest:angular.identity}).success(function(e){if(200==e.code){$(".page4-checkbox-toggle-1").removeClass("fa-check-square-o").addClass("fa-square-o"),$(".checkbox-toggle").attr("data","0"),a.initData=e.data.contactList,a.initDatacontactCount=e.data.contactCount;for(var t=[],o=0;o<a.initData.length;o++)if(a.initData[o].tagList.length>0){t.push(a.initData[o].tagList[0].tagname.split(","));for(var s=[],n=0;n<t.length;n++)s.push(t[n]);a.initData[o].tagList=s,s=[],t=[]}}})}}),setTimeout(function(){var e=$(".blod");for(n=0;n<e.length;n++){var a=n;1==e[n].attributes[0].nodeValue&&$(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),2==e[n].attributes[0].nodeValue&&($(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod2").addClass("ox").css("border","none")),3==e[n].attributes[0].nodeValue&&($(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod2").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod3").addClass("ox").css("border","none")),4==e[n].attributes[0].nodeValue&&($(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod2").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod3").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod4").addClass("ox").css("border","none")),5==e[n].attributes[0].nodeValue&&($(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod2").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod3").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod4").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod5").addClass("ox").css("border","none"))}$('.mailbox-messages input[type="checkbox"]').iCheck({checkboxClass:"icheckbox_flat-blue",radioClass:"iradio_flat-blue"})},40),a.allTagFightShow=!1,a.addTagShowMe=!1,$(".tagList").html(""),$(".alert1").show(300).find(".alertCon").html("批量打标签保存成功"),setTimeout(function(){$(".alert1").hide(300)},2e3)}else $(".alert2").show(300).find(".alertCon").html("标签保存失败，请刷新页面或稍后再试"),setTimeout(function(){$(".alert2").hide(300)},2e3)})}else 201==o.code?($(".alert2").show(300).find(".alertCon").html("您输入的标签已经全部存在，请再次输入"),setTimeout(function(){$(".alert2").hide(300)},2e3)):($(".alert2").show(300).find(".alertCon").html("标签保存失败，请刷新页面或稍后再试"),setTimeout(function(){$(".alert2").hide(300)},2e3))})}},a.clickAddTag=function(e,a){var t='                      <div class="tagItem tagItem1" id='+e+">\n                            <span>"+a+'</span>\n                            <div class="delete delete1"></div>\n                        </div>';$(".newTagappend .tagsContaine .tagList").append(t)},$(document).on("click",".delete1",function(){$(this).parent().remove()}),a.addTagShowMe=!1,a.addTagShow=function(){a.addTagShowMe=!0},a.addTagShowMe1=!1,a.addTagShow1=function(){a.addTagShowMe1=!0},a.trueAddTagGroup=function(){""==$(".trueAddTagGroup").prev().val()?(console.log($(".trueAddTagGroup").prev().val()),$(".alert2").show(300).find(".alertCon").html("新增标签组名不能为空，请再次输入"),setTimeout(function(){$(".alert2").hide(300)},2e3)):($(".trueAddTagGroup").prev().val(""),a.addTagShowMe=!1,$(".alert1").show(300).find(".alertCon").html("标签组添加成功"),setTimeout(function(){$(".alert1").hide(300)},2e3))},a.trueAddTagGroup1=function(){if(""==$(".trueAddTagGroup1").prev().val())$(".alert2").show(300).find(".alertCon").html("新增标签组名不能为空，请再次输入"),setTimeout(function(){$(".alert2").hide(300)},2e3);else{var o=$(".trueAddTagGroup1").prev().val(),s=new FormData;s.append("groupName",o),t({method:"POST",url:e.link+"/gcsscrm/user/addGroup",data:s,headers:{"Content-Type":void 0},transformRequest:angular.identity}).success(function(e){200==e.code?($(".trueAddTagGroup1").prev().val(""),a.addTagShowMe1=!1,$(".alert1").show(300).find(".alertCon").html("标签组添加成功"),setTimeout(function(){$(".alert1").hide(300)},2e3)):($(".alert2").show(300).find(".alertCon").html("标签组添加失败"),setTimeout(function(){$(".alert2").hide(300)},2e3))})}},$(".closeAlert1").click(function(){$(".alert1").hide()}),$(".closeAlert2").click(function(){$(".alert2").hide()}),a.moreGiveGroup=!1,a.allchecks=[],a.allTaskGroup=function(){var e=$(".checkData"),t=$(".icheckbox_flat-blue");for(i2=0;i2<t.length;i2++)"true"==t[i2].attributes[1].value&&(a.allchecks.push(Number(e.eq(i2).attr("data"))),a.jiluSree=0);a.allchecks.length<=0?($(".alert2").show(300).find(".alertCon").html("请选择需要进行分组的好友"),setTimeout(function(){$(".alert2").hide(300)},2e3)):(a.moreGiveGroup=!0,a.oneGiveGroup=!1,a.oneTagFight=!1,a.sayGroup=!1,a.allTagFightShow=!1,a.chatAll=!1,a.giveGroup=!1,$(".page1-change-block-sree").css("display","none"),a.allchecks=[])},a.page4moreGroupClosMsg=function(){a.moreGiveGroup=!1,a.addTagShowMe1=!1},a.allchecks1=[],a.page4moreGroupSendMsg=function(){var o=$(".checkData"),s=$(".icheckbox_flat-blue"),n=$(".page4-select1 option:selected").attr("data"),d=$(".page4-select1 option:selected").html();for(i2=0;i2<s.length;i2++){i2;"true"==s[i2].attributes[1].value&&a.allchecks1.push(Number(o.eq(i2).attr("data")))}if(a.allchecks1.length<=0)$(".alert2").show(300).find(".alertCon").html("请选择需要进行分组的好友"),setTimeout(function(){$(".alert2").hide(300)},2e3);else if(""==d||null==d||void 0==d)$(".alert2").show(300).find(".alertCon").html("当前分组为空请添加分组"),setTimeout(function(){$(".alert2").hide(300)},2e3);else{var r=new FormData;r.append(" contactIds",JSON.stringify(a.allchecks1)),r.append("groupId",n),t({method:"POST",url:e.link+"/gcsscrm/user/modifyGroup",data:r,headers:{"Content-Type":void 0},transformRequest:angular.identity}).success(function(o){if(200==o.code){a.addTagShowMe1=!1,a.allchecks1=[],$(".alert1").show(300).find(".alertCon").html("批量分组好友成功"),setTimeout(function(){$(".alert1").hide(300)},2e3),a.moreGiveGroup=!1;var s=new FormData,n=$(".isChange"),d=$(".page4-group-group"),r=$(".tag-touch").attr("data"),l=[],i=[];if(void 0==r&&(r=""),n.length>0){for(c=0;c<n.length;c++)1==n[c].attributes[1].value&&l.push(n[c].attributes[4].value);l.length>0?s.append("weChatIds",JSON.stringify(l)):s.append("accountId",a.page4UserIdImportant)}if(d.length>0){for(var c=0;c<d.length;c++)1==d[c].attributes[1].value&&i.push(d[c].attributes[4].value);i.length>0?s.append("groupIds",JSON.stringify(i)):s.append("groupIds",JSON.stringify([]))}s.append("tagId",r),t({method:"POST",url:e.link+"/gcsscrm/user/getAllMsg",data:s,headers:{"Content-Type":void 0},transformRequest:angular.identity}).success(function(o){if(200==o.code){$(".page4-checkbox-toggle-1").removeClass("fa-check-square-o").addClass("fa-square-o"),$(".checkbox-toggle").attr("data","0"),a.initData=o.data.contactList,a.initDatacontactCount=o.data.contactCount;for(var s=[],n=0;n<a.initData.length;n++)if(a.initData[n].tagList.length>0){s.push(a.initData[n].tagList[0].tagname.split(","));for(var d=[],r=0;r<s.length;r++)d.push(s[r]);a.initData[n].tagList=d,d=[],s=[]}$(".M-box1").pagination({totalData:a.initDatacontactCount,showData:10,coping:!0,callback:function(o){var s={page:o.getCurrent()},n=new FormData,d=$(".isChange"),r=$(".page4-group-group"),l=$(".tag-touch").attr("data"),i=[],c=[];if(void 0==l&&(l=""),d.length>0){for(u=0;u<d.length;u++)1==d[u].attributes[1].value&&i.push(d[u].attributes[4].value);i.length>0?n.append("weChatIds",JSON.stringify(i)):n.append("accountId",a.page4UserIdImportant)}if(r.length>0){for(var u=0;u<r.length;u++)1==r[u].attributes[1].value&&c.push(r[u].attributes[4].value);c.length>0?n.append("groupIds",JSON.stringify(c)):n.append("groupIds",JSON.stringify([]))}n.append("tagId",l),n.append("page",s.page),t({method:"POST",url:e.link+"/gcsscrm/user/getAllMsg",data:n,headers:{"Content-Type":void 0},transformRequest:angular.identity}).success(function(e){if(200==e.code){$(".page4-checkbox-toggle-1").removeClass("fa-check-square-o").addClass("fa-square-o"),$(".checkbox-toggle").attr("data","0"),a.initData=e.data.contactList,a.initDatacontactCount=e.data.contactCount;for(var t=[],o=0;o<a.initData.length;o++)if(a.initData[o].tagList.length>0){t.push(a.initData[o].tagList[0].tagname.split(","));for(var s=[],n=0;n<t.length;n++)s.push(t[n]);a.initData[o].tagList=s,s=[],t=[]}setTimeout(function(){var e=$(".blod");for(o=0;o<e.length;o++){var a=o;1==e[o].attributes[0].nodeValue&&$(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),2==e[o].attributes[0].nodeValue&&($(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod2").addClass("ox").css("border","none")),3==e[o].attributes[0].nodeValue&&($(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod2").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod3").addClass("ox").css("border","none")),4==e[o].attributes[0].nodeValue&&($(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod2").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod3").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod4").addClass("ox").css("border","none")),5==e[o].attributes[0].nodeValue&&($(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod2").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod3").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod4").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod5").addClass("ox").css("border","none"))}$('.mailbox-messages input[type="checkbox"]').iCheck({checkboxClass:"icheckbox_flat-blue",radioClass:"iradio_flat-blue"})},40)}})}}),setTimeout(function(){var e=$(".blod");for(n=0;n<e.length;n++){var a=n;1==e[n].attributes[0].nodeValue&&$(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),2==e[n].attributes[0].nodeValue&&($(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod2").addClass("ox").css("border","none")),3==e[n].attributes[0].nodeValue&&($(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod2").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod3").addClass("ox").css("border","none")),4==e[n].attributes[0].nodeValue&&($(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod2").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod3").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod4").addClass("ox").css("border","none")),5==e[n].attributes[0].nodeValue&&($(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod2").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod3").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod4").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod5").addClass("ox").css("border","none"))}$('.mailbox-messages input[type="checkbox"]').iCheck({checkboxClass:"icheckbox_flat-blue",radioClass:"iradio_flat-blue"})},40)}})}else $(".alert2").show(300).find(".alertCon").html("批量分组好友失败"),setTimeout(function(){$(".alert2").hide(300)},2e3)})}},a.oneFriendId=[],a.fighttag=function(e){a.page4One=0,a.GroupNumJilu=0,a.jilukaka=0,a.jiluSree=0,a.jiluFour=0,$(".page1-change-block").css("display","none"),$(".page1-change-block-two1").css("display","none"),$(".page1-change-block-two").css("display","none"),$(".page1-change-block-sree").css("display","none"),$(".page1-change-block-four").css("display","none"),a.oneFriendId=[],a.moreGiveGroup=!1,a.oneGiveGroup=!1,a.oneTagFight=!0,a.sayGroup=!1,a.allTagFightShow=!1,a.chatAll=!1,a.giveGroup=!1,a.oneFriendId.push(e)},a.oneTagFight=!1,a.page4oneTagFightClosMsg=function(){a.oneTagFight=!1},a.page4oneTagFightSendMsg=function(){if(0==$(".page4-addTag2>.tagsContaine>.tagList ")[0].children.length)$(".alert2").show(300).find(".alertCon").html("请输入标签名"),setTimeout(function(){$(".alert2").hide(300)},2e3);else{for(var o=$(".tagItem1"),s=[],n=[],d=0;d<o.length;d++)s.push(o[d].attributes.id.value),n.push(o[d].innerText);var r=new FormData;r.append("tagNames",JSON.stringify(n)),r.append(" tagIds",JSON.stringify(s)),r.append("contactIds",JSON.stringify(a.oneFriendId)),t({method:"POST",url:e.link+"/gcsscrm/user/addTagsForContact",data:r,headers:{"Content-Type":void 0},transformRequest:angular.identity}).success(function(o){if(200==o.code){var s=new FormData,n=$(".isChange"),d=$(".page4-group-group"),r=$(".tag-touch").attr("data"),l=[],i=[];if(void 0==r&&(r=""),n.length>0){for(u=0;u<n.length;u++)1==n[u].attributes[1].value&&l.push(n[u].attributes[4].value);l.length>0?s.append("weChatIds",JSON.stringify(l)):s.append("accountId",a.page4UserIdImportant)}if(d.length>0){for(u=0;u<d.length;u++)1==d[u].attributes[1].value&&i.push(d[u].attributes[4].value);i.length>0?s.append("groupIds",JSON.stringify(i)):s.append("groupIds",JSON.stringify([]))}s.append("tagId",r),t({method:"POST",url:e.link+"/gcsscrm/user/getAllMsg",data:s,headers:{"Content-Type":void 0},transformRequest:angular.identity}).success(function(o){if(200==o.code){$(".page4-checkbox-toggle-1").removeClass("fa-check-square-o").addClass("fa-square-o"),$(".checkbox-toggle").attr("data","0"),a.initData=o.data.contactList,a.initDatacontactCount=o.data.contactCount;for(var s=[],n=0;n<a.initData.length;n++)if(a.initData[n].tagList.length>0){s.push(a.initData[n].tagList[0].tagname.split(","));for(var d=[],r=0;r<s.length;r++)d.push(s[r]);a.initData[n].tagList=d,d=[],s=[]}$(".M-box1").pagination({totalData:a.initDatacontactCount,showData:10,coping:!0,callback:function(o){var s={page:o.getCurrent()},n=new FormData,d=$(".isChange"),r=$(".page4-group-group"),l=$(".tag-touch").attr("data"),i=[],c=[];if(void 0==l&&(l=""),d.length>0){for(u=0;u<d.length;u++)1==d[u].attributes[1].value&&i.push(d[u].attributes[4].value);i.length>0?n.append("weChatIds",JSON.stringify(i)):n.append("accountId",a.page4UserIdImportant)}if(r.length>0){for(var u=0;u<r.length;u++)1==r[u].attributes[1].value&&c.push(r[u].attributes[4].value);c.length>0?n.append("groupIds",JSON.stringify(c)):n.append("groupIds",JSON.stringify([]))}n.append("tagId",l),n.append("page",s.page),t({method:"POST",url:e.link+"/gcsscrm/user/getAllMsg",data:n,headers:{"Content-Type":void 0},transformRequest:angular.identity}).success(function(e){if(200==e.code){$(".page4-checkbox-toggle-1").removeClass("fa-check-square-o").addClass("fa-square-o"),$(".checkbox-toggle").attr("data","0"),a.initData=e.data.contactList,a.initDatacontactCount=e.data.contactCount;for(var t=[],o=0;o<a.initData.length;o++)if(a.initData[o].tagList.length>0){t.push(a.initData[o].tagList[0].tagname.split(","));for(var s=[],n=0;n<t.length;n++)s.push(t[n]);a.initData[o].tagList=s,s=[],t=[]}setTimeout(function(){var e=$(".blod");for(o=0;o<e.length;o++){var a=o;1==e[o].attributes[0].nodeValue&&$(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),2==e[o].attributes[0].nodeValue&&($(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod2").addClass("ox").css("border","none")),3==e[o].attributes[0].nodeValue&&($(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod2").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod3").addClass("ox").css("border","none")),4==e[o].attributes[0].nodeValue&&($(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod2").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod3").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod4").addClass("ox").css("border","none")),5==e[o].attributes[0].nodeValue&&($(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod2").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod3").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod4").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod5").addClass("ox").css("border","none"))}$('.mailbox-messages input[type="checkbox"]').iCheck({checkboxClass:"icheckbox_flat-blue",radioClass:"iradio_flat-blue"})},40)}})}}),setTimeout(function(){var e=$(".blod");for(n=0;n<e.length;n++){var a=n;1==e[n].attributes[0].nodeValue&&$(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),2==e[n].attributes[0].nodeValue&&($(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod2").addClass("ox").css("border","none")),3==e[n].attributes[0].nodeValue&&($(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod2").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod3").addClass("ox").css("border","none")),4==e[n].attributes[0].nodeValue&&($(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod2").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod3").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod4").addClass("ox").css("border","none")),5==e[n].attributes[0].nodeValue&&($(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod2").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod3").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod4").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod5").addClass("ox").css("border","none"))}$('.mailbox-messages input[type="checkbox"]').iCheck({checkboxClass:"icheckbox_flat-blue",radioClass:"iradio_flat-blue"})},40),a.oneTagFight=!1,$(".tagList").html(""),$(".alert1").show(300).find(".alertCon").html("标签保存成功"),setTimeout(function(){$(".alert1").hide(300)},2e3)}else $(".alert2").show(300).find(".alertCon").html("标签保存失败，请刷新页面或稍后再试"),setTimeout(function(){$(".alert2").hide(300)},2e3)})}else if(202==o.code){a.initData=o.data.contactList,a.initDatacontactCount=o.data.contactCount;for(var c=[],u=0;u<a.initData.length;u++)if(a.initData[u].tagList.length>0){c.push(a.initData[u].tagList[0].tagname.split(","));for(var g=[],b=0;b<c.length;b++)g.push(c[b]);a.initData[u].tagList=g,g=[],c=[]}$(".M-box1").pagination({totalData:a.initDatacontactCount,showData:10,coping:!0,callback:function(o){var s={page:o.getCurrent()},n=new FormData,d=$(".isChange"),r=$(".page4-group-group"),l=$(".tag-touch").attr("data"),i=[],c=[];if(void 0==l&&(l=""),d.length>0){for(u=0;u<d.length;u++)1==d[u].attributes[1].value&&i.push(d[u].attributes[4].value);i.length>0?n.append("weChatIds",JSON.stringify(i)):n.append("accountId",a.page4UserIdImportant)}if(r.length>0){for(var u=0;u<r.length;u++)1==r[u].attributes[1].value&&c.push(r[u].attributes[4].value);c.length>0?n.append("groupIds",JSON.stringify(c)):n.append("groupIds",JSON.stringify([]))}n.append("tagId",l),n.append("page",s.page),t({method:"POST",url:e.link+"/gcsscrm/user/getAllMsg",data:n,headers:{"Content-Type":void 0},transformRequest:angular.identity}).success(function(e){if(200==e.code){$(".page4-checkbox-toggle-1").removeClass("fa-check-square-o").addClass("fa-square-o"),$(".checkbox-toggle").attr("data","0"),a.initData=e.data.contactList,a.initDatacontactCount=e.data.contactCount;for(var t=[],o=0;o<a.initData.length;o++)if(a.initData[o].tagList.length>0){t.push(a.initData[o].tagList[0].tagname.split(","));for(var s=[],n=0;n<t.length;n++)s.push(t[n]);a.initData[o].tagList=s,s=[],t=[]}setTimeout(function(){var e=$(".blod");for(o=0;o<e.length;o++){var a=o;1==e[o].attributes[0].nodeValue&&$(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),2==e[o].attributes[0].nodeValue&&($(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod2").addClass("ox").css("border","none")),3==e[o].attributes[0].nodeValue&&($(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod2").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod3").addClass("ox").css("border","none")),4==e[o].attributes[0].nodeValue&&($(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod2").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod3").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod4").addClass("ox").css("border","none")),5==e[o].attributes[0].nodeValue&&($(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod2").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod3").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod4").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod5").addClass("ox").css("border","none"))}$('.mailbox-messages input[type="checkbox"]').iCheck({checkboxClass:"icheckbox_flat-blue",radioClass:"iradio_flat-blue"})},40)}})}}),setTimeout(function(){var e=$(".blod");for(u=0;u<e.length;u++){var a=u;1==e[u].attributes[0].nodeValue&&$(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),2==e[u].attributes[0].nodeValue&&($(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod2").addClass("ox").css("border","none")),3==e[u].attributes[0].nodeValue&&($(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod2").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod3").addClass("ox").css("border","none")),4==e[u].attributes[0].nodeValue&&($(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod2").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod3").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod4").addClass("ox").css("border","none")),5==e[u].attributes[0].nodeValue&&($(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod2").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod3").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod4").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod5").addClass("ox").css("border","none"))}$('.mailbox-messages input[type="checkbox"]').iCheck({checkboxClass:"icheckbox_flat-blue",radioClass:"iradio_flat-blue"})},40),a.oneTagFight=!1,$(".tagList").html(""),$(".alert1").show(300).find(".alertCon").html("标签保存成功"),setTimeout(function(){$(".alert1").hide(300)},2e3)}else 201==o.code?($(".tagList").html(""),$(".alert2").show(300).find(".alertCon").html("您输入的标签已经全部存在，请再次输入"),setTimeout(function(){$(".alert2").hide(300)},2e3)):($(".alert2").show(300).find(".alertCon").html("标签保存失败，请刷新页面或稍后再试"),setTimeout(function(){$(".alert2").hide(300)},2e3))})}},a.oneGiveGroup=!1,a.oneFriendIds=[],a.giveGroups=function(e){a.page4One=0,a.GroupNumJilu=0,a.jilukaka=0,a.jiluSree=0,a.jiluFour=0,$(".page1-change-block").css("display","none"),$(".page1-change-block-two1").css("display","none"),$(".page1-change-block-two").css("display","none"),$(".page1-change-block-sree").css("display","none"),$(".page1-change-block-four").css("display","none"),a.moreGiveGroup=!1,a.oneGiveGroup=!0,a.oneTagFight=!1,a.sayGroup=!1,a.allTagFightShow=!1,a.chatAll=!1,a.giveGroup=!1,a.oneFriendIds.push(e)},a.page4oneGroupClosMsg=function(){a.oneGiveGroup=!1},a.page4oneGroupSendMsg=function(){var o=$(".page4-select-on-group option:selected").attr("data"),s=new FormData;s.append(" contactIds",JSON.stringify(a.oneFriendIds)),s.append("groupId",o),t({method:"POST",url:e.link+"/gcsscrm/user/modifyGroup",data:s,headers:{"Content-Type":void 0},transformRequest:angular.identity}).success(function(o){if(200==o.code){a.addTagShowMe1=!1,a.allchecks1=[];var s=new FormData,n=$(".isChange"),d=$(".page4-group-group"),r=$(".tag-touch").attr("data"),l=[],i=[];if(void 0==r&&(r=""),n.length>0){for(c=0;c<n.length;c++)1==n[c].attributes[1].value&&l.push(n[c].attributes[4].value);l.length>0?s.append("weChatIds",JSON.stringify(l)):s.append("accountId",a.page4UserIdImportant)}if(d.length>0){for(var c=0;c<d.length;c++)1==d[c].attributes[1].value&&i.push(d[c].attributes[4].value);i.length>0?s.append("groupIds",JSON.stringify(i)):s.append("groupIds",JSON.stringify([]))}s.append("tagId",r),t({method:"POST",url:e.link+"/gcsscrm/user/getAllMsg",data:s,headers:{"Content-Type":void 0},transformRequest:angular.identity}).success(function(o){if(200==o.code){$(".page4-checkbox-toggle-1").removeClass("fa-check-square-o").addClass("fa-square-o"),$(".checkbox-toggle").attr("data","0"),a.initData=o.data.contactList,a.initDatacontactCount=o.data.contactCount;for(var s=[],n=0;n<a.initData.length;n++)if(a.initData[n].tagList.length>0){s.push(a.initData[n].tagList[0].tagname.split(","));for(var d=[],r=0;r<s.length;r++)d.push(s[r]);a.initData[n].tagList=d,d=[],s=[]}$(".M-box1").pagination({totalData:a.initDatacontactCount,showData:10,coping:!0,callback:function(o){o.getCurrent();var s=new FormData,s=new FormData,n=$(".isChange"),d=$(".page4-group-group"),r=$(".tag-touch").attr("data"),l=[],i=[];if(void 0==r&&(r=""),n.length>0){for(c=0;c<n.length;c++)1==n[c].attributes[1].value&&l.push(n[c].attributes[4].value);l.length>0?s.append("weChatIds",JSON.stringify(l)):s.append("accountId",a.page4UserIdImportant)}if(d.length>0){for(var c=0;c<d.length;c++)1==d[c].attributes[1].value&&i.push(d[c].attributes[4].value);i.length>0?s.append("groupIds",JSON.stringify(i)):s.append("groupIds",JSON.stringify([]))}s.append("tagId",r),t({method:"POST",url:e.link+"/gcsscrm/user/getAllMsg",data:s,headers:{"Content-Type":void 0},transformRequest:angular.identity}).success(function(e){if(200==e.code){$(".page4-checkbox-toggle-1").removeClass("fa-check-square-o").addClass("fa-square-o"),$(".checkbox-toggle").attr("data","0"),a.initData=e.data.contactList,a.initDatacontactCount=e.data.contactCount;for(var t=[],o=0;o<a.initData.length;o++)if(a.initData[o].tagList.length>0){t.push(a.initData[o].tagList[0].tagname.split(","));for(var s=[],n=0;n<t.length;n++)s.push(t[n]);a.initData[o].tagList=s,s=[],t=[]}setTimeout(function(){var e=$(".blod");for(o=0;o<e.length;o++){var a=o;1==e[o].attributes[0].nodeValue&&$(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),2==e[o].attributes[0].nodeValue&&($(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod2").addClass("ox").css("border","none")),3==e[o].attributes[0].nodeValue&&($(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod2").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod3").addClass("ox").css("border","none")),4==e[o].attributes[0].nodeValue&&($(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod2").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod3").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod4").addClass("ox").css("border","none")),5==e[o].attributes[0].nodeValue&&($(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod2").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod3").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod4").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod5").addClass("ox").css("border","none"))}$('.mailbox-messages input[type="checkbox"]').iCheck({checkboxClass:"icheckbox_flat-blue",radioClass:"iradio_flat-blue"})},40)}})}}),setTimeout(function(){var e=$(".blod");for(n=0;n<e.length;n++){var a=n;1==e[n].attributes[0].nodeValue&&$(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),2==e[n].attributes[0].nodeValue&&($(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod2").addClass("ox").css("border","none")),3==e[n].attributes[0].nodeValue&&($(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod2").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod3").addClass("ox").css("border","none")),4==e[n].attributes[0].nodeValue&&($(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod2").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod3").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod4").addClass("ox").css("border","none")),5==e[n].attributes[0].nodeValue&&($(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod2").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod3").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod4").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod5").addClass("ox").css("border","none"))}$('.mailbox-messages input[type="checkbox"]').iCheck({checkboxClass:"icheckbox_flat-blue",radioClass:"iradio_flat-blue"})},40),$(".alert1").show(300).find(".alertCon").html("好友分组成功"),setTimeout(function(){$(".alert1").hide(300)},2e3),a.oneGiveGroup=!1}})}else $(".alert2").show(300).find(".alertCon").html("好友分组失败"),setTimeout(function(){$(".alert2").hide(300)},2e3)})},a.sayGroup=!1,a.allchecks4=[],a.sayGroupShow=function(){var e=$(".checkData"),t=$(".icheckbox_flat-blue");for(console.log(t),i2=0;i2<t.length;i2++)"true"==t[i2].attributes[1].value&&(a.allchecks4.push(Number(e.eq(i2).attr("data"))),a.jiluSree=0);a.allchecks4.length<=0?($(".alert2").show(300).find(".alertCon").html("请选择需要进行群发消息的好友"),setTimeout(function(){$(".alert2").hide(300)},2e3)):(a.moreGiveGroup=!1,a.oneGiveGroup=!1,a.oneTagFight=!1,a.sayGroup=!0,a.allTagFightShow=!1,a.chatAll=!1,a.giveGroup=!1,$(".page1-change-block-four").css("display","none"),a.jiluFour=0,a.allchecks4=[])},a.page4sayGroupClosMsg=function(){a.sayGroup=!1},a.allchecks5=[],a.page4sayGroupSendMsg=function(){a.sendObjMsgPost=new FormData;for(var o=$(".checkData"),s=$(".icheckbox_flat-blue"),n=0;n<s.length;n++)"true"==s[n].attributes[1].value&&(a.allchecks5.push(Number(o.eq(n).attr("data"))),a.jiluSree=0);if(a.allchecks5.length<=0)$(".alert2").show(300).find(".alertCon").html("请选择需要进行群发消息的好友"),setTimeout(function(){$(".alert2").hide(300)},2e3);else if(""==$(".FontAndEmjoy6").html())$(".alert2").show(300).find(".alertCon").html("请输入需要进行群发的信息"),setTimeout(function(){$(".alert2").hide(300)},2e3);else{var d=$(".FontAndEmjoy6").html(),r=/alt=[\'\"]?([^\'\"]*)[\'\"]?/i,l=d.match(/<img.*?(?:>|\/>)/g);if(null==l);else{for(var i=[],c=0;c<l.length;c++){var u=l[c].match(r);u[1]&&i.push(u[1])}for(var g=d.match(/<img.*?(?:>|\/>)/g),c=0;c<g.length;c++)d=d.replace(g[c],i[c])}a.sendObjMsgPost.append("msg",d),a.sendObjMsgPost.append(" contactIds",JSON.stringify(a.allchecks5)),t({method:"POST",url:e.link+"/gcsscrm/user/sendMsg",data:a.sendObjMsgPost,headers:{"Content-Type":void 0},transformRequest:angular.identity}).success(function(e){200==e.code?($(".FontAndEmjoy6").html(""),a.sayGroup=!1,$(".alert1").show(300).find(".alertCon").html("群发消息任务添加完成"),setTimeout(function(){$(".alert1").hide(300)},2e3)):alert(e.msg)}),a.allchecks5=[]}},$(".emjoyDiv-page6").mouseover(function(){$(".emjoyList-page6").css("display","block")}),$(".emjoyDiv-page6").mouseout(function(){$(".emjoyList-page6").css("display","none")});var s=0;$(function(){$("#FontAndEmjoy6").focus(function(){$(this).removeClass("flag1")}),$("#FontAndEmjoy6").blur(function(){$(this).addClass("flag1")})}),$(".emjoyList-page6").on("click","img",function(){if(1==s){var e=$(this).attr("alt");!function(e){var a,t,o=$("#FontAndEmjoy6")[0];if($(o).hasClass("flag1"))if(window.getSelection){if((a=window.getSelection()).getRangeAt&&a.rangeCount){(t=a.getRangeAt(0)).deleteContents();var s=document.createElement("div");s.innerHTML=e;for(var n,d,r=document.createDocumentFragment();n=s.firstChild;)d=r.appendChild(n);t.insertNode(r),d&&((t=t.cloneRange()).setStartAfter(d),t.collapse(!0),a.removeAllRanges(),a.addRange(t))}}else document.selection&&"Control"!=document.selection.type&&($(o).focus(),ierange=document.selection.createRange(),ierange.pasteHTML(e),$(o).focus());else $(o).html(o.innerHTML+e)}("<img src='"+$(this).attr("src")+"'alt='"+e+"'>")}});var n=[],d=-1;$(window).click(function(e){if(d++,window.getSelection){var a=e.srcElement?e.srcElement:e.target;n.push(a.id);-1!=$.inArray("FontAndEmjoy6",n)&&("FontAndEmjoy6"!=a.id?($("#FontAndEmjoy6").addClass("flag1"),s=0,"gg"==a.className?(s=1,$("#FontAndEmjoy6").removeClass("flag1"),"FontAndEmjoy6"==n[d-1]&&(s=1,$("#FontAndEmjoy6").removeClass("flag1"),n[d-1]==a.id&&(s=1,$("#FontAndEmjoy6").removeClass("flag1")))):(s=0,$("#FontAndEmjoy6").addClass("flag1"))):(s=1,$("#FontAndEmjoy6").removeClass("flag1")))}}),$(".falseTime").blur(function(){var e=$(this).val();new RegExp(/^[1-9]\d{3}-(0[1-9]|1[0-2])-(0[1-9]|[1-2][0-9]|3[0-1])$/).test(e)||($(".alert2").show(300).find(".alertCon").html("请输入正确日期格式例如：2017-01-01"),setTimeout(function(){$(".alert2").hide(300)},2e3))})}]),app.controller("page5C",["$rootScope","$scope","$http","$timeout",function(e,a,t,o){e.mainShow=!0,e.changePas=!1,a.page2Wechats=[],e.Page5showLoads=!1,a.allGroupChecks=[],a.picSrc="http://"+window.location.host+"/pic/",a.page5UserIdImportant=localStorage.getItem("userId"),void 0==a.page5UserIdImportant||null==a.page5UserIdImportant||""==a.page5UserIdImportant||setTimeout(function(){e.Page5showLoads=!0;var o=new FormData;o.append("accountId",a.page5UserIdImportant),t({method:"POST",url:e.link+"/gcsscrm/general/getAllWeChat",data:o,headers:{"Content-Type":void 0},transformRequest:angular.identity}).success(function(e){if(200==e.code){a.sendWechatIdsAll=e.data.weChats;for(var t=0;t<a.sendWechatIdsAll.length;t++)a.page2Wechats.push(a.sendWechatIdsAll[t].id)}else $(".alert2").show(300).find(".alertCon").html("页面初始化失败，请刷新页面或再次登陆"),setTimeout(function(){$(".alert2").hide(300)},2e3)});var s=new FormData;s.append("accountId",a.page5UserIdImportant),t({method:"POST",url:e.link+"/gcsscrm/group/getAllMsgToGroupPage",data:s,headers:{"Content-Type":void 0},transformRequest:angular.identity}).success(function(o){if(200==o.code){a.initData=o.data.chatrooms,a.initGroup=o.data.chatRoomGroups,a.initDatacontactCount=o.data.chatRoomCount;for(var s=[],n=0;n<a.initData.length;n++)if(a.initData[n].chatRoomTags.length>0){s.push(a.initData[n].chatRoomTags[0].tagname.split(","));for(var d=[],r=0;r<s.length;r++)d.push(s[r]);a.initData[n].chatRoomTags=d,d=[],s=[]}$(".M-box1").pagination({totalData:a.initDatacontactCount,showData:10,coping:!0,callback:function(o){$(".page5-checkbox-toggle-1").removeClass("fa-check-square-o").addClass("fa-square-o"),$(".checkbox-toggle").attr("data","0");var s={page:o.getCurrent()},n=new FormData;n.append("accountId",a.page5UserIdImportant),n.append("page",s.page),t({method:"POST",url:e.link+"/gcsscrm/group/getAllMsgToGroupPage",data:n,headers:{"Content-Type":void 0},transformRequest:angular.identity}).success(function(e){if(200==e.code){a.initData=e.data.chatrooms,a.initGroup=e.data.chatRoomGroups,a.initDatacontactCount=e.data.chatRoomCount;for(var t=[],o=0;o<a.initData.length;o++)if(a.initData[o].chatRoomTags.length>0){t.push(a.initData[o].chatRoomTags[0].tagname.split(","));for(var s=[],n=0;n<t.length;n++)s.push(t[n]);a.initData[o].chatRoomTags=s,s=[],t=[]}setTimeout(function(){var e=$(".blod");for(o=0;o<e.length;o++){var a=o;1==e[o].attributes[0].nodeValue&&$(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),2==e[o].attributes[0].nodeValue&&($(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod2").addClass("ox").css("border","none")),3==e[o].attributes[0].nodeValue&&($(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod2").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod3").addClass("ox").css("border","none")),4==e[o].attributes[0].nodeValue&&($(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod2").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod3").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod4").addClass("ox").css("border","none")),5==e[o].attributes[0].nodeValue&&($(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod2").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod3").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod4").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod5").addClass("ox").css("border","none"))}$('.mailbox-messages input[type="checkbox"]').iCheck({checkboxClass:"icheckbox_flat-blue",radioClass:"iradio_flat-blue"})},100)}})}}),setTimeout(function(){var e=$(".blod");for(n=0;n<e.length;n++){var a=n;1==e[n].attributes[0].nodeValue&&$(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),2==e[n].attributes[0].nodeValue&&($(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod2").addClass("ox").css("border","none")),3==e[n].attributes[0].nodeValue&&($(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod2").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod3").addClass("ox").css("border","none")),4==e[n].attributes[0].nodeValue&&($(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod2").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod3").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod4").addClass("ox").css("border","none")),5==e[n].attributes[0].nodeValue&&($(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod2").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod3").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod4").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod5").addClass("ox").css("border","none"))}$('.mailbox-messages input[type="checkbox"]').iCheck({checkboxClass:"icheckbox_flat-blue",radioClass:"iradio_flat-blue"}),$("#example2").DataTable({ordering:!1,bInfo:!1,aLengthMenu:[[10,25,50,100],[10,25,50,100]]})},200),e.Page5showLoads=!1}})},0),a.page4Sree=!1,$(document).ready(function(){$(".checkbox-toggle").click(function(){var e=$(this).attr("data");console.log(e),1==e?($(".mailbox-messages input[type='checkbox']").iCheck("uncheck"),$(".fa",this).removeClass("fa-check-square-o").addClass("fa-square-o"),$(this).attr("data","0")):($(".mailbox-messages input[type='checkbox']").iCheck("check"),$(".fa",this).removeClass("fa-square-o").addClass("fa-check-square-o"),$(this).attr("data","1"))})}),$(function(){var o=new Tag("tagValue3");o.tagValue="",o.initView();var s=new Tag("tagValue4");s.tagValue="",s.initView(),a.page4One=0,$(".chose-on").click(function(){$(".page1-change-block-two1").css("display","none"),$(".page1-change-block-two").css("display","none"),$(".page1-change-block-sree").css("display","none"),a.GroupNumJilu=0,a.jilukaka=0,a.jiluSree=0,a.moreGiveGroup=!1,a.oneGiveGroup=!1,a.oneTagFight=!1,a.sayGroup=!1,a.allTagFightShow=!1,a.chatAll=!1,a.giveGroup=!1,a.page4One++,a.page4One%2==0?$(".page1-change-block").css("display","none"):$(".page1-change-block").css("display","block")}),a.jilukaka=0,$(".chose-two1").click(function(){$(".page1-change-block").css("display","none"),$(".page1-change-block-two").css("display","none"),$(".page1-change-block-sree").css("display","none"),a.page4One=0,a.GroupNumJilu=0,a.jiluSree=0,a.moreGiveGroup=!1,a.oneGiveGroup=!1,a.oneTagFight=!1,a.sayGroup=!1,a.allTagFightShow=!1,a.chatAll=!1,a.giveGroup=!1,a.jilukaka++,a.jilukaka%2==0?$(".page1-change-block-two1").css("display","none"):$(".page1-change-block-two1").css("display","block")}),$(".tag-touch").bind("input propertychange",function(){var o=$(this).val();if(""==o){var s=new FormData,n=$(".isChange"),d=$(".page5-group-group"),r=$(".tag-touch").attr("data");void 0==r&&(r="");var l=[],i=[];if(n.length>0){for(c=0;c<n.length;c++)1==n[c].attributes[1].value&&l.push(n[c].attributes[4].value);l.length>0?s.append("weChatIds",JSON.stringify(l)):s.append("accountId",a.page5UserIdImportant)}if(d.length>0){for(var c=0;c<d.length;c++)1==d[c].attributes[1].value&&i.push(d[c].attributes[4].value);i.length>0?s.append("groupIds",JSON.stringify(i)):s.append("groupIds",JSON.stringify([]))}t({method:"POST",url:e.link+"/gcsscrm/group/getAllMsgToGroupPage",data:s,headers:{"Content-Type":void 0},transformRequest:angular.identity}).success(function(o){if(200==o.code){$(".page5-checkbox-toggle-1").removeClass("fa-check-square-o").addClass("fa-square-o"),$(".checkbox-toggle").attr("data","0"),a.initData=o.data.chatrooms,a.initDatacontactCount=o.data.chatRoomCount;for(var s=[],n=0;n<a.initData.length;n++)if(a.initData[n].chatRoomTags.length>0){s.push(a.initData[n].chatRoomTags[0].tagname.split(","));for(var d=[],r=0;r<s.length;r++)d.push(s[r]);a.initData[n].chatRoomTags=d,d=[],s=[]}$(".M-box1").pagination({totalData:a.initDatacontactCount,showData:10,coping:!0,callback:function(o){$(".page5-checkbox-toggle-1").removeClass("fa-check-square-o").addClass("fa-square-o"),$(".checkbox-toggle").attr("data","0");var s={page:o.getCurrent()},n=new FormData,d=$(".isChange"),r=$(".page5-group-group"),l=$(".tag-touch").attr("data"),i=[],c=[];if(void 0==l&&(l=""),d.length>0){for(u=0;u<d.length;u++)1==d[u].attributes[1].value&&i.push(d[u].attributes[4].value);i.length>0?n.append("weChatIds",JSON.stringify(i)):n.append("accountId",a.page5UserIdImportant)}if(r.length>0){for(var u=0;u<r.length;u++)1==r[u].attributes[1].value&&c.push(r[u].attributes[4].value);c.length>0?n.append("groupIds",JSON.stringify(c)):n.append("groupIds",JSON.stringify([]))}n.append("tagId",l),n.append("page",s.page),t({method:"POST",url:e.link+"/gcsscrm/group/getAllMsgToGroupPage",data:n,headers:{"Content-Type":void 0},transformRequest:angular.identity}).success(function(e){if(200==e.code){$(".page5-checkbox-toggle-1").removeClass("fa-check-square-o").addClass("fa-square-o"),$(".checkbox-toggle").attr("data","0"),a.initData=e.data.chatrooms,a.initDatacontactCount=e.data.chatRoomCount;for(var t=[],o=0;o<a.initData.length;o++)if(a.initData[o].chatRoomTags.length>0){t.push(a.initData[o].chatRoomTags[0].tagname.split(","));for(var s=[],n=0;n<t.length;n++)s.push(t[n]);a.initData[o].chatRoomTags=s,s=[],t=[]}setTimeout(function(){var e=$(".blod");for(o=0;o<e.length;o++){var a=o;1==e[o].attributes[0].nodeValue&&$(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),2==e[o].attributes[0].nodeValue&&($(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod2").addClass("ox").css("border","none")),3==e[o].attributes[0].nodeValue&&($(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod2").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod3").addClass("ox").css("border","none")),4==e[o].attributes[0].nodeValue&&($(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod2").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod3").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod4").addClass("ox").css("border","none")),5==e[o].attributes[0].nodeValue&&($(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod2").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod3").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod4").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod5").addClass("ox").css("border","none"))}$('.mailbox-messages input[type="checkbox"]').iCheck({checkboxClass:"icheckbox_flat-blue",radioClass:"iradio_flat-blue"})},100)}})}}),setTimeout(function(){var e=$(".blod");for(n=0;n<e.length;n++){var a=n;1==e[n].attributes[0].nodeValue&&$(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),2==e[n].attributes[0].nodeValue&&($(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod2").addClass("ox").css("border","none")),3==e[n].attributes[0].nodeValue&&($(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod2").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod3").addClass("ox").css("border","none")),4==e[n].attributes[0].nodeValue&&($(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod2").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod3").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod4").addClass("ox").css("border","none")),5==e[n].attributes[0].nodeValue&&($(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod2").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod3").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod4").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod5").addClass("ox").css("border","none"))}$('.mailbox-messages input[type="checkbox"]').iCheck({checkboxClass:"icheckbox_flat-blue",radioClass:"iradio_flat-blue"})},40)}else $(".alert2").show(300).find(".alertCon").html("数据加载失败，请刷新页面或稍后再试"),setTimeout(function(){$(".alert2").hide(300)},2e3)})}else{var u=new FormData;u.append("tagName",o),t({method:"POST",url:e.link+"/gcsscrm/group/selectTagNameByLike",data:u,headers:{"Content-Type":void 0},transformRequest:angular.identity}).success(function(e){200==e.code&&(a.tagSearchList=e.data.chatRoomTags)})}}),$(document).on("click",".tag-touch-list li",function(){var o=$(this).attr("data"),s=$(this).attr("data1");$(".tag-touch").val(s);var n=new FormData,d=$(".isChange"),r=$(".page5-group-group"),l=[],i=[];if(d.length>0){for(c=0;c<d.length;c++)1==d[c].attributes[1].value&&l.push(d[c].attributes[4].value);l.length>0?n.append("weChatIds",JSON.stringify(l)):n.append("accountId",a.page5UserIdImportant)}if(r.length>0){for(var c=0;c<r.length;c++)1==r[c].attributes[1].value&&i.push(r[c].attributes[4].value);i.length>0?n.append("groupIds",JSON.stringify(i)):n.append("groupIds",JSON.stringify([]))}n.append("tagId",o),t({method:"POST",url:e.link+"/gcsscrm/group/getAllMsgToGroupPage",data:n,headers:{"Content-Type":void 0},transformRequest:angular.identity}).success(function(o){if(200==o.code){$(".page5-checkbox-toggle-1").removeClass("fa-check-square-o").addClass("fa-square-o"),$(".checkbox-toggle").attr("data","0"),$(".page1-change-block-two1").hide(),a.jilukaka=0,a.initData=o.data.chatrooms,a.initDatacontactCount=o.data.chatRoomCount;for(var s=[],n=0;n<a.initData.length;n++)if(a.initData[n].chatRoomTags.length>0){s.push(a.initData[n].chatRoomTags[0].tagname.split(","));for(var d=[],r=0;r<s.length;r++)d.push(s[r]);a.initData[n].chatRoomTags=d,d=[],s=[]}$(".M-box1").pagination({totalData:a.initDatacontactCount,showData:10,coping:!0,callback:function(o){$(".page5-checkbox-toggle-1").removeClass("fa-check-square-o").addClass("fa-square-o"),$(".checkbox-toggle").attr("data","0");var s={page:o.getCurrent()},n=new FormData,d=$(".isChange"),r=$(".page5-group-group"),l=$(".tag-touch").attr("data"),i=[],c=[];if(void 0==l&&(l=""),d.length>0){for(u=0;u<d.length;u++)1==d[u].attributes[1].value&&i.push(d[u].attributes[4].value);i.length>0?n.append("weChatIds",JSON.stringify(i)):n.append("accountId",a.page5UserIdImportant)}if(r.length>0){for(var u=0;u<r.length;u++)1==r[u].attributes[1].value&&c.push(r[u].attributes[4].value);c.length>0?n.append("groupIds",JSON.stringify(c)):n.append("groupIds",JSON.stringify([]))}n.append("tagId",l),n.append("page",s.page),t({method:"POST",url:e.link+"/gcsscrm/group/getAllMsgToGroupPage",data:n,headers:{"Content-Type":void 0},transformRequest:angular.identity}).success(function(e){if(200==e.code){$(".page5-checkbox-toggle-1").removeClass("fa-check-square-o").addClass("fa-square-o"),$(".checkbox-toggle").attr("data","0"),a.initData=e.data.chatrooms,a.initDatacontactCount=e.data.chatRoomCount;for(var t=[],o=0;o<a.initData.length;o++)if(a.initData[o].chatRoomTags.length>0){t.push(a.initData[o].chatRoomTags[0].tagname.split(","));for(var s=[],n=0;n<t.length;n++)s.push(t[n]);a.initData[o].chatRoomTags=s,s=[],t=[]}setTimeout(function(){var e=$(".blod");for(o=0;o<e.length;o++){var a=o;1==e[o].attributes[0].nodeValue&&$(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),2==e[o].attributes[0].nodeValue&&($(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod2").addClass("ox").css("border","none")),3==e[o].attributes[0].nodeValue&&($(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod2").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod3").addClass("ox").css("border","none")),4==e[o].attributes[0].nodeValue&&($(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod2").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod3").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod4").addClass("ox").css("border","none")),5==e[o].attributes[0].nodeValue&&($(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod2").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod3").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod4").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod5").addClass("ox").css("border","none"))}$('.mailbox-messages input[type="checkbox"]').iCheck({checkboxClass:"icheckbox_flat-blue",radioClass:"iradio_flat-blue"})},100)}})}}),setTimeout(function(){var e=$(".blod");for(n=0;n<e.length;n++){var a=n;1==e[n].attributes[0].nodeValue&&$(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),2==e[n].attributes[0].nodeValue&&($(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod2").addClass("ox").css("border","none")),3==e[n].attributes[0].nodeValue&&($(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod2").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod3").addClass("ox").css("border","none")),4==e[n].attributes[0].nodeValue&&($(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod2").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod3").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod4").addClass("ox").css("border","none")),5==e[n].attributes[0].nodeValue&&($(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod2").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod3").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod4").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod5").addClass("ox").css("border","none"))}$('.mailbox-messages input[type="checkbox"]').iCheck({checkboxClass:"icheckbox_flat-blue",radioClass:"iradio_flat-blue"})},100)}else $(".alert2").show(300).find(".alertCon").html("数据加载失败，请刷新页面或稍后再试"),setTimeout(function(){$(".alert2").hide(300)},2e3)})}),a.GroupNumJilu=0,$(".chose-two").click(function(){$(".page1-change-block").css("display","none"),$(".page1-change-block-two1").css("display","none"),$(".page1-change-block-sree").css("display","none"),a.page4One=0,a.jilukaka=0,a.jiluSree=0,a.moreGiveGroup=!1,a.oneGiveGroup=!1,a.oneTagFight=!1,a.sayGroup=!1,a.allTagFightShow=!1,a.chatAll=!1,a.giveGroup=!1,a.GroupNumJilu++,a.GroupNumJilu%2==0?($(".page1-change-block-two").css("display","none"),$(".telephone").css("display","none")):$(".page1-change-block-two").css("display","block")}),a.jiluSree=0,$(".chose-sree").click(function(){$(".page1-change-block").css("display","none"),$(".page1-change-block-two1").css("display","none"),$(".page1-change-block-two").css("display","none"),a.page4One=0,a.GroupNumJilu=0,a.jilukaka=0,a.jiluSree++,a.jiluSree%2==0?$(".page1-change-block-sree").css("display","none"):$(".page1-change-block-sree").css("display","block")}),a.jiluFour=0,$(".chose-four").click(function(){a.jiluFour++,a.jiluFour%2==0?$(".page1-change-block-four").css("display","none"):$(".page1-change-block-four").css("display","block")}),a.page5Click=function(e){0==$(".page5-wechat-check")[e].attributes[1].value?($(".page5-wechat-check").eq(e).prev().addClass("on"),$(".page5-wechat-check")[e].attributes[1].value=1):($(".page5-wechat-check").eq(e).prev().removeClass("on"),$(".page5-wechat-check")[e].attributes[1].value=0)},a.page5Click2=function(e){0==$(".page4-group-group")[e].attributes[1].value?($(".page4-group-group").eq(e).prev().addClass("on"),$(".page4-group-group")[e].attributes[1].value=1):($(".page4-group-group").eq(e).prev().removeClass("on"),$(".page4-group-group")[e].attributes[1].value=0)},$(document).on("click",".page4-checkbox-One-one",function(){var e=$(this).attr("data1"),t=$(this).attr("data2");0==$(this).attr("data")?($(this).prev().addClass("on"),$(this).attr("data","1"),a.data1[t][e].state=1):($(this).prev().removeClass("on"),$(this).attr("data","0"),a.data1[t][e].state=0)}),$(".checkAllTelephone").click(function(){n=0,$(".checkbox-toggle-change").prev().removeClass("on");var e=$(this).attr("data"),a=$(".isChange");if(0==e){for(t=0;t<a.length;t++)a[t].attributes[1].value=1,$(".isChange").eq(t).prev().addClass("on");$(this).attr("data","1").prev().addClass("on")}else{for(var t=0;t<a.length;t++)a[t].attributes[1].value=0,$(".isChange").eq(t).prev().removeClass("on");$(this).attr("data","0").prev().removeClass("on")}}),$(".page4-group-checkall").click(function(){d=0,$(".page4-group-checkall-change").prev().removeClass("on");var e=$(this).attr("data"),a=$(".page4-isChange");if(0==e){for(t=0;t<a.length;t++)a[t].attributes[1].value=1,$(".page4-isChange").prev().addClass("on");$(this).attr("data","1").prev().addClass("on")}else{for(var t=0;t<a.length;t++)a[t].attributes[1].value=0,$(".page4-isChange").prev().removeClass("on");$(this).attr("data","0").prev().removeClass("on")}});var n=0;$(".checkbox-toggle-change").click(function(){++n%2==0?($(this).prev().removeClass("on"),$(this).attr("data","0")):($(this).prev().addClass("on"),$(this).attr("data","1")),$(".checkAllTelephone").attr("data","0").prev().removeClass("on");for(var e=$(".isChange"),a=0;a<e.length;a++)0==e[a].attributes[1].value?($(".isChange").eq(a).prev().addClass("on"),e[a].attributes[1].value=1):($(".isChange").eq(a).prev().removeClass("on"),e[a].attributes[1].value=0)});var d=0;$(".page4-group-checkall-change").click(function(){++d%2==0?($(this).prev().removeClass("on"),$(this).attr("data","0")):($(this).prev().addClass("on"),$(this).attr("data","1")),$(".page4-group-checkall").attr("data","0").prev().removeClass("on");$(".page4-group-group");for(var e=$(".page4-isChange"),a=0;a<e.length;a++)1==e[a].attributes[1].value?(e[a].attributes[1].value=0,$(".page4-isChange").eq(a).prev().removeClass("on")):(e[a].attributes[1].value=1,$(".page4-isChange").eq(a).prev().addClass("on"))})}),a.importantWechatIds="",a.page4WechatsendMsg=function(){for(var o=$(".isChange"),s=[],n=0;n<o.length;n++)1==o[n].attributes[1].value&&s.push(o[n].attributes[4].value);if(0==s.length)$(".alert2").show(300).find(".alertCon").html("请选择相关微信号"),setTimeout(function(){$(".alert2").hide(300)},2e3);else{var d=new FormData,o=$(".isChange"),r=$(".page5-group-group"),l=$(".tag-touch").attr("data"),i=[];if(void 0==l&&(l=""),r.length>0){for(n=0;n<r.length;n++)1==r[n].attributes[1].value&&i.push(r[n].attributes[4].value);i.length>0?d.append("groupIds",JSON.stringify(i)):d.append("groupIds",JSON.stringify([]))}d.append("tagId",l),d.append("weChatIds",JSON.stringify(s)),t({method:"POST",url:e.link+"/gcsscrm/group/getAllMsgToGroupPage",data:d,headers:{"Content-Type":void 0},transformRequest:angular.identity}).success(function(o){if(a.importantWechatIds=s,200==o.code){$(".page5-checkbox-toggle-1").removeClass("fa-check-square-o").addClass("fa-square-o"),$(".checkbox-toggle").attr("data","0"),a.page2Wechats=[],a.page2Wechats=s,$(".page1-change-block").css("display","none"),a.page4One=0,a.initData=[],a.initData=o.data.chatrooms,a.initDatacontactCount=o.data.chatRoomCount;for(var n=[],d=0;d<a.initData.length;d++)if(a.initData[d].chatRoomTags.length>0){n.push(a.initData[d].chatRoomTags[0].tagname.split(","));for(var r=[],l=0;l<n.length;l++)r.push(n[l]);a.initData[d].chatRoomTags=r,r=[],n=[]}$(".M-box1").pagination({totalData:a.initDatacontactCount,showData:10,coping:!0,callback:function(o){$(".page5-checkbox-toggle-1").removeClass("fa-check-square-o").addClass("fa-square-o"),$(".checkbox-toggle").attr("data","0");var n={page:o.getCurrent()},d=new FormData,r=$(".isChange"),l=$(".page5-group-group"),i=$(".tag-touch").attr("data"),c=[],u=[];if(void 0==i&&(i=""),r.length>0){for(g=0;g<r.length;g++)1==r[g].attributes[1].value&&c.push(r[g].attributes[4].value);c.length>0?d.append("weChatIds",JSON.stringify(c)):d.append("accountId",a.page5UserIdImportant)}if(l.length>0){for(var g=0;g<l.length;g++)1==l[g].attributes[1].value&&u.push(l[g].attributes[4].value);u.length>0?d.append("groupIds",JSON.stringify(u)):d.append("groupIds",JSON.stringify([]))}d.append("tagId",i),d.append("page",n.page),t({method:"POST",url:e.link+"/gcsscrm/group/getAllMsgToGroupPage",data:d,headers:{"Content-Type":void 0},transformRequest:angular.identity}).success(function(e){if($(".page5-checkbox-toggle-1").removeClass("fa-check-square-o").addClass("fa-square-o"),$(".checkbox-toggle").attr("data","0"),200==e.code){a.page2Wechats=[],a.page2Wechats=s,$(".page1-change-block").css("display","none"),a.page4One=0,a.initData=[],a.initData=e.data.chatrooms,a.initDatacontactCount=e.data.chatRoomCount;for(var t=[],o=0;o<a.initData.length;o++)if(a.initData[o].chatRoomTags.length>0){t.push(a.initData[o].chatRoomTags[0].tagname.split(","));for(var n=[],d=0;d<t.length;d++)n.push(t[d]);a.initData[o].chatRoomTags=n,n=[],t=[]}setTimeout(function(){var e=$(".blod");for(o=0;o<e.length;o++){var a=o;1==e[o].attributes[0].nodeValue&&$(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),2==e[o].attributes[0].nodeValue&&($(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod2").addClass("ox").css("border","none")),3==e[o].attributes[0].nodeValue&&($(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod2").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod3").addClass("ox").css("border","none")),4==e[o].attributes[0].nodeValue&&($(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod2").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod3").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod4").addClass("ox").css("border","none")),5==e[o].attributes[0].nodeValue&&($(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod2").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod3").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod4").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod5").addClass("ox").css("border","none"))}$('.mailbox-messages input[type="checkbox"]').iCheck({checkboxClass:"icheckbox_flat-blue",radioClass:"iradio_flat-blue"})},100)}})}}),setTimeout(function(){var e=$(".blod");for(d=0;d<e.length;d++){var a=d;1==e[d].attributes[0].nodeValue&&$(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),2==e[d].attributes[0].nodeValue&&($(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod2").addClass("ox").css("border","none")),3==e[d].attributes[0].nodeValue&&($(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod2").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod3").addClass("ox").css("border","none")),4==e[d].attributes[0].nodeValue&&($(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod2").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod3").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod4").addClass("ox").css("border","none")),5==e[d].attributes[0].nodeValue&&($(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod2").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod3").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod4").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod5").addClass("ox").css("border","none"))}$('.mailbox-messages input[type="checkbox"]').iCheck({checkboxClass:"icheckbox_flat-blue",radioClass:"iradio_flat-blue"}),$("#example2").DataTable({bDestroy:!0,ordering:!1,bInfo:!1,aLengthMenu:[[10,25,50,100],[10,25,50,100]]})},40)}else $(".alert2").show(300).find(".alertCon").html("数据加载失败，请刷新页面或再次登陆"),setTimeout(function(){$(".alert2").hide(300)},2e3)})}},a.page4GroupsendMsg=function(){void 0==$(".checkbox-toggle").data("clicks")||$(".checkbox-toggle").data("clicks","false"),console.log($(".checkbox-toggle").data("clicks"));for(var o=$(".page5-group-group"),s=0,n=[];s<o.length;s++)1==o[s].attributes.data1.value&&n.push(o[s].attributes.data.value);if(0==n.length)$(".alert2").show(300).find(".alertCon").html("请选择相关分组"),setTimeout(function(){$(".alert2").hide(300)},2e3);else{$(".page1-change-block-two").css("display","none"),a.GroupNumJilu=0;var d=new FormData,r=$(".isChange"),o=$(".page5-group-group"),l=$(".tag-touch").attr("data"),i=[],c=[];if(void 0==l&&(l=""),r.length>0){for(s=0;s<r.length;s++)1==r[s].attributes[1].value&&i.push(r[s].attributes[4].value);i.length>0?d.append("weChatIds",JSON.stringify(i)):d.append("accountId",a.page5UserIdImportant)}if(o.length>0){for(var s=0,n=[];s<o.length;s++)1==o[s].attributes[1].value&&c.push(o[s].attributes[4].value);c.length>0?d.append("groupIds",JSON.stringify(c)):d.append("groupIds",JSON.stringify([]))}d.append("tagId",l),a.allGroupChecks=n,t({method:"POST",url:e.link+"/gcsscrm/group/getAllMsgToGroupPage",data:d,headers:{"Content-Type":void 0},transformRequest:angular.identity}).success(function(o){if(200==o.code){$(".page5-checkbox-toggle-1").removeClass("fa-check-square-o").addClass("fa-square-o"),$(".checkbox-toggle").attr("data","0"),$(".page1-change-block-two").css("display","none"),$(".telephone").css("display","none"),a.GroupNumJilu=0,a.initData=o.data.chatrooms,a.initDatacontactCount=o.data.chatRoomCount;for(var s=[],n=0;n<a.initData.length;n++)if(a.initData[n].chatRoomTags.length>0){s.push(a.initData[n].chatRoomTags[0].tagname.split(","));for(var d=[],r=0;r<s.length;r++)d.push(s[r]);a.initData[n].chatRoomTags=d,d=[],s=[]}$(".M-box1").pagination({totalData:a.initDatacontactCount,showData:10,coping:!0,callback:function(o){$(".page5-checkbox-toggle-1").removeClass("fa-check-square-o").addClass("fa-square-o"),$(".checkbox-toggle").attr("data","0");var s={page:o.getCurrent()},n=new FormData,d=$(".isChange"),r=$(".page5-group-group"),l=$(".tag-touch").attr("data"),i=[],c=[];if(void 0==l&&(l=""),d.length>0){for(u=0;u<d.length;u++)1==d[u].attributes[1].value&&i.push(d[u].attributes[4].value);i.length>0?n.append("weChatIds",JSON.stringify(i)):n.append("accountId",a.page5UserIdImportant)}if(r.length>0){for(var u=0,g=[];u<r.length;u++)1==r[u].attributes[1].value&&c.push(r[u].attributes[4].value);c.length>0?n.append("groupIds",JSON.stringify(c)):n.append("groupIds",JSON.stringify([]))}n.append("tagId",l),n.append("page",s.page),a.allGroupChecks=g,t({method:"POST",url:e.link+"/gcsscrm/group/getAllMsgToGroupPage",data:n,headers:{"Content-Type":void 0},transformRequest:angular.identity}).success(function(e){if($(".page5-checkbox-toggle-1").removeClass("fa-check-square-o").addClass("fa-square-o"),$(".checkbox-toggle").attr("data","0"),200==e.code){a.initData=e.data.chatrooms,a.initDatacontactCount=e.data.chatRoomCount;for(var t=[],o=0;o<a.initData.length;o++)if(a.initData[o].chatRoomTags.length>0){t.push(a.initData[o].chatRoomTags[0].tagname.split(","));for(var s=[],n=0;n<t.length;n++)s.push(t[n]);a.initData[o].chatRoomTags=s,s=[],t=[]}setTimeout(function(){var e=$(".blod");for(o=0;o<e.length;o++){var a=o;1==e[o].attributes[0].nodeValue&&$(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),2==e[o].attributes[0].nodeValue&&($(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod2").addClass("ox").css("border","none")),3==e[o].attributes[0].nodeValue&&($(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod2").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod3").addClass("ox").css("border","none")),4==e[o].attributes[0].nodeValue&&($(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod2").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod3").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod4").addClass("ox").css("border","none")),5==e[o].attributes[0].nodeValue&&($(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod2").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod3").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod4").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod5").addClass("ox").css("border","none"))}$('.mailbox-messages input[type="checkbox"]').iCheck({checkboxClass:"icheckbox_flat-blue",radioClass:"iradio_flat-blue"})},100)}})}}),setTimeout(function(){var e=$(".blod");for(n=0;n<e.length;n++){var a=n;1==e[n].attributes[0].nodeValue&&$(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),2==e[n].attributes[0].nodeValue&&($(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod2").addClass("ox").css("border","none")),3==e[n].attributes[0].nodeValue&&($(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod2").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod3").addClass("ox").css("border","none")),4==e[n].attributes[0].nodeValue&&($(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod2").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod3").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod4").addClass("ox").css("border","none")),5==e[n].attributes[0].nodeValue&&($(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod2").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod3").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod4").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod5").addClass("ox").css("border","none"))}$('.mailbox-messages input[type="checkbox"]').iCheck({checkboxClass:"icheckbox_flat-blue",radioClass:"iradio_flat-blue"})},40)}else $(".alert2").show(300).find(".alertCon").html("数据加载失败，请刷新页面或再次登陆"),setTimeout(function(){$(".alert2").hide(300)},2e3)})}},a.giveGroup=!1,a.chatAll=!1,a.page4closMsg=function(){a.giveGroup=!1},a.page4trueShow=function(o){$(".page1-change-block").css("display","none"),$(".page1-change-block-two1").css("display","none"),$(".page1-change-block-two").css("display","none"),$(".page1-change-block-sree").css("display","none"),a.page4One=0,a.GroupNumJilu=0,a.jilukaka=0,a.jiluSree=0,a.moreGiveGroup=!1,a.oneGiveGroup=!1,a.oneTagFight=!1,a.sayGroup=!1,a.allTagFightShow=!1,a.chatAll=!1;var s=new FormData;s.append("chatRoomId",o),t({method:"POST",url:e.link+"/gcsscrm/group/getChatRoomMsgById",data:s,headers:{"Content-Type":void 0},transformRequest:angular.identity}).success(function(e){200==e.code?(a.giveGroup=!0,a.moreGroupAll=e.data.chatroommembers,a.moreGroupchatRoomProfilePhoto=e.data.chatRoomProfilePhoto,a.moreGroupchatroomname=e.data.chatroomname,a.moreGroupdevicenumber=e.data.wechat.device.devicenumber,a.moreGroupwechatnickname=e.data.wechat.wechatnickname):($(".alert2").show(300).find(".alertCon").html("数据加载失败，请刷新页面或再次登陆"),setTimeout(function(){$(".alert2").hide(300)},2e3))})},a.page4sendMsg=function(){},a.page4ChatClosMsg=function(){a.chatAll=!1},a.page4ChatOpenMsg=function(){a.moreGiveGroup=!1,a.oneGiveGroup=!1,a.oneTagFight=!1,a.sayGroup=!1,a.allTagFightShow=!1,a.chatAll=!0,a.giveGroup=!1},a.allTagFightShow=!1,a.allchecks2=[],a.allTagFightShowMe=function(){var o=$(".checkData"),s=$(".icheckbox_flat-blue");for(i2=0;i2<s.length;i2++){i2;"true"==s[i2].attributes[1].value&&(a.allchecks2.push(Number(o.eq(i2).attr("data"))),console.log(a.allchecks2))}a.allchecks2.length<=0?($(".alert2").show(300).find(".alertCon").html("请选择需要进行批量打标签的群组"),setTimeout(function(){$(".alert2").hide(300)},2e3)):(a.moreGiveGroup=!1,a.oneGiveGroup=!1,a.oneTagFight=!1,a.sayGroup=!1,a.allTagFightShow=!0,a.chatAll=!1,a.giveGroup=!1,t({method:"POST",url:e.link+"/gcsscrm/group/getTheTopTenTag",headers:{"Content-Type":void 0},transformRequest:angular.identity}).success(function(e){200==e.code?(a.recommendTag=e.data.tagList,$(".page1-change-block-sree").css("display","none"),a.jiluSree=0,a.allchecks2=[]):($(".alert2").show(300).find(".alertCon").html("参考标签数据加载失败，请刷新页面或再次登陆"),setTimeout(function(){$(".alert2").hide(300)},2e3))}))},a.page4allTagFightClosMsg=function(){a.allTagFightShow=!1,a.addTagShowMe=!1},a.allchecks3=[],a.page4allTagFightSendMsg=function(){var o=$(".checkData"),s=$(".icheckbox_flat-blue");for(i2=0;i2<s.length;i2++){i2;"true"==s[i2].attributes[1].value&&a.allchecks3.push(Number(o.eq(i2).attr("data")))}if(a.allchecks3.length<=0)return $(".alert2").show(300).find(".alertCon").html("请选择需要进行批量打标签的群组"),void setTimeout(function(){$(".alert2").hide(300)},2e3);if(0==$(".page5-addTag1>.tagsContaine>.tagList ")[0].children.length)$(".alert2").show(300).find(".alertCon").html("请选择或输入标签名"),setTimeout(function(){$(".alert2").hide(300)},2e3);else{for(var n=$(".tagItem1"),d=[],r=[],l=0;l<n.length;l++)d.push(n[l].attributes.id.value),r.push(n[l].innerText);$(".tagList").html("");var i=new FormData;i.append("tagNames",JSON.stringify(r)),i.append(" tagIds",JSON.stringify(d)),i.append("chatRoomIds",JSON.stringify(a.allchecks3)),t({method:"POST",url:e.link+"/gcsscrm/group/addTaging",data:i,headers:{"Content-Type":void 0},transformRequest:angular.identity}).success(function(o){if(200==o.code){$(".page5-checkbox-toggle-1").removeClass("fa-check-square-o").addClass("fa-square-o"),$(".checkbox-toggle").attr("data","0"),a.allchecks3=[];var s=new FormData,n=$(".isChange"),d=$(".page5-group-group"),r=$(".tag-touch").attr("data"),l=[],i=[];if(void 0==r&&(r=""),n.length>0){for(u=0;u<n.length;u++)1==n[u].attributes[1].value&&l.push(n[u].attributes[4].value);l.length>0?s.append("weChatIds",JSON.stringify(l)):s.append("accountId",a.page5UserIdImportant)}if(d.length>0){for(u=0;u<d.length;u++)1==d[u].attributes[1].value&&i.push(d[u].attributes[4].value);i.length>0?s.append("groupIds",JSON.stringify(i)):s.append("groupIds",JSON.stringify([]))}s.append("tagId",r),t({method:"POST",url:e.link+"/gcsscrm/group/getAllMsgToGroupPage",data:s,headers:{"Content-Type":void 0},transformRequest:angular.identity}).success(function(o){if(200==o.code){$(".page5-checkbox-toggle-1").removeClass("fa-check-square-o").addClass("fa-square-o"),$(".checkbox-toggle").attr("data","0"),a.initData=o.data.chatrooms,a.initDatacontactCount=o.data.chatRoomCount;for(var s=[],n=0;n<a.initData.length;n++)if(a.initData[n].chatRoomTags.length>0){s.push(a.initData[n].chatRoomTags[0].tagname.split(","));for(var d=[],r=0;r<s.length;r++)d.push(s[r]);a.initData[n].chatRoomTags=d,d=[],s=[]}$(".M-box1").pagination({totalData:a.initDatacontactCount,showData:10,coping:!0,callback:function(o){$(".page5-checkbox-toggle-1").removeClass("fa-check-square-o").addClass("fa-square-o"),$(".checkbox-toggle").attr("data","0");var s={page:o.getCurrent()},n=new FormData,d=$(".isChange"),r=$(".page5-group-group"),l=$(".tag-touch").attr("data"),i=[],c=[];if(void 0==l&&(l=""),d.length>0){for(u=0;u<d.length;u++)1==d[u].attributes[1].value&&i.push(d[u].attributes[4].value);i.length>0?n.append("weChatIds",JSON.stringify(i)):n.append("accountId",a.page5UserIdImportant)}if(r.length>0){for(var u=0;u<r.length;u++)1==r[u].attributes[1].value&&c.push(r[u].attributes[4].value);c.length>0?n.append("groupIds",JSON.stringify(c)):n.append("groupIds",JSON.stringify([]))}n.append("tagId",l),n.append("page",s.page),t({method:"POST",url:e.link+"/gcsscrm/group/getAllMsgToGroupPage",data:n,headers:{"Content-Type":void 0},transformRequest:angular.identity}).success(function(e){if(200==e.code){$(".page5-checkbox-toggle-1").removeClass("fa-check-square-o").addClass("fa-square-o"),$(".checkbox-toggle").attr("data","0"),a.initData=e.data.chatrooms,a.initDatacontactCount=e.data.chatRoomCount;for(var t=[],o=0;o<a.initData.length;o++)if(a.initData[o].chatRoomTags.length>0){t.push(a.initData[o].chatRoomTags[0].tagname.split(","));for(var s=[],n=0;n<t.length;n++)s.push(t[n]);a.initData[o].chatRoomTags=s,s=[],t=[]}setTimeout(function(){var e=$(".blod");for(o=0;o<e.length;o++){var a=o;1==e[o].attributes[0].nodeValue&&$(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),2==e[o].attributes[0].nodeValue&&($(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod2").addClass("ox").css("border","none")),3==e[o].attributes[0].nodeValue&&($(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod2").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod3").addClass("ox").css("border","none")),4==e[o].attributes[0].nodeValue&&($(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod2").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod3").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod4").addClass("ox").css("border","none")),5==e[o].attributes[0].nodeValue&&($(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod2").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod3").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod4").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod5").addClass("ox").css("border","none"))}$('.mailbox-messages input[type="checkbox"]').iCheck({checkboxClass:"icheckbox_flat-blue",radioClass:"iradio_flat-blue"})},100)}})}}),setTimeout(function(){var e=$(".blod");for(n=0;n<e.length;n++){var a=n;1==e[n].attributes[0].nodeValue&&$(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),2==e[n].attributes[0].nodeValue&&($(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod2").addClass("ox").css("border","none")),3==e[n].attributes[0].nodeValue&&($(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod2").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod3").addClass("ox").css("border","none")),4==e[n].attributes[0].nodeValue&&($(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod2").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod3").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod4").addClass("ox").css("border","none")),5==e[n].attributes[0].nodeValue&&($(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod2").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod3").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod4").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod5").addClass("ox").css("border","none"))}$('.mailbox-messages input[type="checkbox"]').iCheck({checkboxClass:"icheckbox_flat-blue",radioClass:"iradio_flat-blue"})},40),a.allTagFightShow=!1,a.addTagShowMe=!1,$(".tagList").html(""),$(".alert1").show(300).find(".alertCon").html("批量打标签保存成功"),setTimeout(function(){$(".alert1").hide(300)},2e3)}else $(".alert2").show(300).find(".alertCon").html("标签保存失败，请刷新页面或稍后再试"),setTimeout(function(){$(".alert2").hide(300)},2e3)})}else if(202==o.code){$(".page5-checkbox-toggle-1").removeClass("fa-check-square-o").addClass("fa-square-o"),$(".checkbox-toggle").attr("data","0"),a.initData=o.data.chatrooms,a.initDatacontactCount=o.data.chatRoomCount;for(var c=[],u=0;u<a.initData.length;u++)if(a.initData[u].chatRoomTags.length>0){c.push(a.initData[u].chatRoomTags[0].tagname.split(","));for(var g=[],b=0;b<c.length;b++)g.push(c[b]);a.initData[u].chatRoomTags=g,g=[],c=[]}$(".M-box1").pagination({totalData:a.initDatacontactCount,showData:10,coping:!0,callback:function(o){$(".page5-checkbox-toggle-1").removeClass("fa-check-square-o").addClass("fa-square-o"),$(".checkbox-toggle").attr("data","0");var s={page:o.getCurrent()},n=new FormData,d=$(".isChange"),r=$(".page5-group-group"),l=$(".tag-touch").attr("data"),i=[],c=[];if(void 0==l&&(l=""),d.length>0){for(u=0;u<d.length;u++)1==d[u].attributes[1].value&&i.push(d[u].attributes[4].value);i.length>0?n.append("weChatIds",JSON.stringify(i)):n.append("accountId",a.page5UserIdImportant)}if(r.length>0){for(var u=0;u<r.length;u++)1==r[u].attributes[1].value&&c.push(r[u].attributes[4].value);c.length>0?n.append("groupIds",JSON.stringify(c)):n.append("groupIds",JSON.stringify([]))}n.append("tagId",l),n.append("page",s.page),t({method:"POST",url:e.link+"/gcsscrm/group/getAllMsgToGroupPage",data:n,headers:{"Content-Type":void 0},transformRequest:angular.identity}).success(function(e){if(200==e.code){$(".page5-checkbox-toggle-1").removeClass("fa-check-square-o").addClass("fa-square-o"),$(".checkbox-toggle").attr("data","0"),a.initData=e.data.chatrooms,a.initDatacontactCount=e.data.chatRoomCount;for(var t=[],o=0;o<a.initData.length;o++)if(a.initData[o].chatRoomTags.length>0){t.push(a.initData[o].chatRoomTags[0].tagname.split(","));for(var s=[],n=0;n<t.length;n++)s.push(t[n]);a.initData[o].chatRoomTags=s,s=[],t=[]}setTimeout(function(){var e=$(".blod");for(o=0;o<e.length;o++){var a=o;1==e[o].attributes[0].nodeValue&&$(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),2==e[o].attributes[0].nodeValue&&($(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod2").addClass("ox").css("border","none")),3==e[o].attributes[0].nodeValue&&($(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod2").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod3").addClass("ox").css("border","none")),4==e[o].attributes[0].nodeValue&&($(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod2").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod3").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod4").addClass("ox").css("border","none")),5==e[o].attributes[0].nodeValue&&($(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod2").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod3").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod4").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod5").addClass("ox").css("border","none"))}$('.mailbox-messages input[type="checkbox"]').iCheck({checkboxClass:"icheckbox_flat-blue",radioClass:"iradio_flat-blue"})},100)}})}}),setTimeout(function(){var e=$(".blod");for(u=0;u<e.length;u++){var a=u;1==e[u].attributes[0].nodeValue&&$(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),2==e[u].attributes[0].nodeValue&&($(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod2").addClass("ox").css("border","none")),3==e[u].attributes[0].nodeValue&&($(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod2").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod3").addClass("ox").css("border","none")),4==e[u].attributes[0].nodeValue&&($(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod2").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod3").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod4").addClass("ox").css("border","none")),5==e[u].attributes[0].nodeValue&&($(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod2").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod3").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod4").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod5").addClass("ox").css("border","none"))}$('.mailbox-messages input[type="checkbox"]').iCheck({checkboxClass:"icheckbox_flat-blue",radioClass:"iradio_flat-blue"})},40),a.allTagFightShow=!1,a.addTagShowMe=!1,$(".tagList").html(""),$(".alert1").show(300).find(".alertCon").html("批量打标签保存成功"),setTimeout(function(){$(".alert1").hide(300)},2e3)}else 201==o.code?($(".alert2").show(300).find(".alertCon").html("您输入的标签已经全部存在，请再次输入"),setTimeout(function(){$(".alert2").hide(300)},2e3)):($(".alert2").show(300).find(".alertCon").html("标签保存失败，请刷新页面或稍后再试"),setTimeout(function(){$(".alert2").hide(300)},2e3))})}},a.clickAddTag=function(e,a){var t='                      <div class="tagItem tagItem1" id='+e+">\n                            <span>"+a+'</span>\n                            <div class="delete delete1"></div>\n                        </div>';$(".newTagappend .tagsContaine .tagList").append(t)},$(document).on("click",".delete1",function(){$(this).parent().remove()}),a.addTagShowMe=!1,a.addTagShow=function(){a.addTagShowMe=!0},a.addTagShowMe1=!1,a.addTagShow1=function(){a.addTagShowMe1=!0},a.trueAddTagGroup=function(){""==$(".trueAddTagGroup").prev().val()?(console.log($(".trueAddTagGroup").prev().val()),$(".alert2").show(300).find(".alertCon").html("新增标签组名不能为空，请再次输入"),setTimeout(function(){$(".alert2").hide(300)},2e3)):($(".trueAddTagGroup").prev().val(""),a.addTagShowMe=!1,$(".alert1").show(300).find(".alertCon").html("标签组添加成功"),setTimeout(function(){$(".alert1").hide(300)},2e3))},a.trueAddTagGroup1=function(){if(""==$(".trueAddTagGroup1").prev().val())$(".alert2").show(300).find(".alertCon").html("新增标签组名不能为空，请再次输入"),setTimeout(function(){$(".alert2").hide(300)},2e3);else{var o=$(".trueAddTagGroup1").prev().val(),s=new FormData;s.append("groupName",o),t({method:"POST",url:e.link+"/gcsscrm/group/addChatRoomGroup",data:s,headers:{"Content-Type":void 0},transformRequest:angular.identity}).success(function(e){200==e.code?($(".trueAddTagGroup1").prev().val(""),a.addTagShowMe1=!1,$(".alert1").show(300).find(".alertCon").html("标签组添加成功"),setTimeout(function(){$(".alert1").hide(300)},2e3)):($(".alert2").show(300).find(".alertCon").html("标签组添加失败"),setTimeout(function(){$(".alert2").hide(300)},2e3))})}},$(".closeAlert1").click(function(){$(".alert1").hide()}),$(".closeAlert2").click(function(){$(".alert2").hide()}),a.moreGiveGroup=!1,a.allchecks=[],a.allTaskGroup=function(){var e=$(".checkData"),t=$(".icheckbox_flat-blue");for(console.log(t),i2=0;i2<t.length;i2++)"true"==t[i2].attributes[1].value&&(a.allchecks.push(Number(e.eq(i2).attr("data"))),a.jiluSree=0);a.allchecks.length<=0?($(".alert2").show(300).find(".alertCon").html("请选择需要进行分组的群组"),setTimeout(function(){$(".alert2").hide(300)},2e3)):(a.moreGiveGroup=!0,a.oneGiveGroup=!1,a.oneTagFight=!1,a.sayGroup=!1,a.allTagFightShow=!1,a.chatAll=!1,a.giveGroup=!1,$(".page1-change-block-sree").css("display","none"),a.allchecks=[])},a.page4moreGroupClosMsg=function(){a.moreGiveGroup=!1},a.allchecks1=[],a.page4moreGroupSendMsg=function(){var o=$(".checkData"),s=$(".icheckbox_flat-blue"),n=$(".page4-select1 option:selected").attr("data"),d=$(".page4-select1 option:selected").html();for(i2=0;i2<s.length;i2++){i2;"true"==s[i2].attributes[1].value&&a.allchecks1.push(Number(o.eq(i2).attr("data")))}if(a.allchecks1.length<=0)$(".alert2").show(300).find(".alertCon").html("请选择需要进行分组的好友"),setTimeout(function(){$(".alert2").hide(300)},2e3);else if(""==d||null==d||void 0==d)$(".alert2").show(300).find(".alertCon").html("当前分组为空请添加分组"),setTimeout(function(){$(".alert2").hide(300)},2e3);else{var r=new FormData;r.append("chatRoomIds",JSON.stringify(a.allchecks1)),r.append("groupId",n),t({method:"POST",url:e.link+"/gcsscrm/group/addGrouping",data:r,headers:{"Content-Type":void 0},transformRequest:angular.identity}).success(function(o){if(200==o.code){$(".page5-checkbox-toggle-1").removeClass("fa-check-square-o").addClass("fa-square-o"),$(".checkbox-toggle").attr("data","0"),a.addTagShowMe1=!1,a.allchecks1=[],$(".alert1").show(300).find(".alertCon").html("批量分组好友成功"),setTimeout(function(){$(".alert1").hide(300)},2e3),a.moreGiveGroup=!1;var s=new FormData,n=$(".isChange"),d=$(".page5-group-group"),r=$(".tag-touch").attr("data"),l=[],i=[];if(void 0==r&&(r=""),n.length>0){for(c=0;c<n.length;c++)1==n[c].attributes[1].value&&l.push(n[c].attributes[4].value);l.length>0?s.append("weChatIds",JSON.stringify(l)):s.append("accountId",a.page5UserIdImportant)}if(d.length>0){for(var c=0;c<d.length;c++)1==d[c].attributes[1].value&&i.push(d[c].attributes[4].value);i.length>0?s.append("groupIds",JSON.stringify(i)):s.append("groupIds",JSON.stringify([]))}s.append("tagId",r),t({method:"POST",url:e.link+"/gcsscrm/group/getAllMsgToGroupPage",data:s,headers:{"Content-Type":void 0},transformRequest:angular.identity}).success(function(o){if(200==o.code){$(".page5-checkbox-toggle-1").removeClass("fa-check-square-o").addClass("fa-square-o"),$(".checkbox-toggle").attr("data","0"),a.initData=o.data.chatrooms,a.initDatacontactCount=o.data.chatRoomCount;for(var s=[],n=0;n<a.initData.length;n++)if(a.initData[n].chatRoomTags.length>0){s.push(a.initData[n].chatRoomTags[0].tagname.split(","));for(var d=[],r=0;r<s.length;r++)d.push(s[r]);a.initData[n].chatRoomTags=d,d=[],s=[]}$(".M-box1").pagination({totalData:a.initDatacontactCount,showData:10,coping:!0,callback:function(o){$(".page5-checkbox-toggle-1").removeClass("fa-check-square-o").addClass("fa-square-o"),$(".checkbox-toggle").attr("data","0");var s={page:o.getCurrent()},n=new FormData,d=$(".isChange"),r=$(".page5-group-group"),l=$(".tag-touch").attr("data"),i=[],c=[];if(void 0==l&&(l=""),d.length>0){for(u=0;u<d.length;u++)1==d[u].attributes[1].value&&i.push(d[u].attributes[4].value);i.length>0?n.append("weChatIds",JSON.stringify(i)):n.append("accountId",a.page5UserIdImportant)}if(r.length>0){for(var u=0;u<r.length;u++)1==r[u].attributes[1].value&&c.push(r[u].attributes[4].value);c.length>0?n.append("groupIds",JSON.stringify(c)):n.append("groupIds",JSON.stringify([]))}n.append("tagId",l),n.append("page",s.page),t({method:"POST",url:e.link+"/gcsscrm/group/getAllMsgToGroupPage",data:n,headers:{"Content-Type":void 0},transformRequest:angular.identity}).success(function(e){if(200==e.code){$(".page5-checkbox-toggle-1").removeClass("fa-check-square-o").addClass("fa-square-o"),$(".checkbox-toggle").attr("data","0"),a.initData=e.data.chatrooms,a.initDatacontactCount=e.data.chatRoomCount;for(var t=[],o=0;o<a.initData.length;o++)if(a.initData[o].chatRoomTags.length>0){t.push(a.initData[o].chatRoomTags[0].tagname.split(","));for(var s=[],n=0;n<t.length;n++)s.push(t[n]);a.initData[o].chatRoomTags=s,s=[],t=[]}setTimeout(function(){var e=$(".blod");for(o=0;o<e.length;o++){var a=o;1==e[o].attributes[0].nodeValue&&$(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),2==e[o].attributes[0].nodeValue&&($(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod2").addClass("ox").css("border","none")),3==e[o].attributes[0].nodeValue&&($(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod2").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod3").addClass("ox").css("border","none")),4==e[o].attributes[0].nodeValue&&($(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod2").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod3").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod4").addClass("ox").css("border","none")),5==e[o].attributes[0].nodeValue&&($(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod2").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod3").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod4").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod5").addClass("ox").css("border","none"))}$('.mailbox-messages input[type="checkbox"]').iCheck({checkboxClass:"icheckbox_flat-blue",radioClass:"iradio_flat-blue"})},40)}})}}),setTimeout(function(){var e=$(".blod");for(n=0;n<e.length;n++){var a=n;1==e[n].attributes[0].nodeValue&&$(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),2==e[n].attributes[0].nodeValue&&($(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod2").addClass("ox").css("border","none")),3==e[n].attributes[0].nodeValue&&($(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod2").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod3").addClass("ox").css("border","none")),4==e[n].attributes[0].nodeValue&&($(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod2").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod3").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod4").addClass("ox").css("border","none")),5==e[n].attributes[0].nodeValue&&($(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod2").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod3").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod4").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod5").addClass("ox").css("border","none"))}$('.mailbox-messages input[type="checkbox"]').iCheck({checkboxClass:"icheckbox_flat-blue",radioClass:"iradio_flat-blue"})},40)}$(".tagList").html(""),$(".alert1").show(300).find(".alertCon").html("批量分组好友保存成功"),setTimeout(function(){$(".alert1").hide(300)},2e3)})}else $(".alert2").show(300).find(".alertCon").html("批量分组好友失败"),setTimeout(function(){$(".alert2").hide(300)},2e3)})}},a.oneFriendId="",a.fighttag=function(e){$(".page1-change-block").css("display","none"),$(".page1-change-block-two1").css("display","none"),$(".page1-change-block-two").css("display","none"),$(".page1-change-block-sree").css("display","none"),a.page4One=0,a.GroupNumJilu=0,a.jilukaka=0,a.jiluSree=0,a.moreGiveGroup=!1,a.oneGiveGroup=!1,a.oneTagFight=!0,a.sayGroup=!1,a.allTagFightShow=!1,a.chatAll=!1,a.giveGroup=!1,a.oneFriendId=e},a.oneTagFight=!1,a.page4oneTagFightClosMsg=function(){a.oneTagFight=!1},a.page4oneTagFightSendMsg=function(){if(a.oneFriendId1=[],a.oneFriendId1.push(a.oneFriendId),0==$(".page5-addTag2>.tagsContaine>.tagList ")[0].children.length)$(".alert2").show(300).find(".alertCon").html("请输入标签名"),setTimeout(function(){$(".alert2").hide(300)},2e3);else{for(var o=$(".tagItem1"),s=[],n=[],d=0;d<o.length;d++)s.push(o[d].attributes.id.value),n.push(o[d].innerText);var r=new FormData;r.append("tagNames",JSON.stringify(n)),r.append(" tagIds",JSON.stringify(s)),r.append("chatRoomIds",JSON.stringify(a.oneFriendId1)),t({method:"POST",url:e.link+"/gcsscrm/group/addTaging",data:r,headers:{"Content-Type":void 0},transformRequest:angular.identity}).success(function(o){if(200==o.code){var s=new FormData,n=$(".isChange"),d=$(".page5-group-group"),r=$(".tag-touch").attr("data"),l=[],i=[];if(void 0==r&&(r=""),n.length>0){for(u=0;u<n.length;u++)1==n[u].attributes[1].value&&l.push(n[u].attributes[4].value);l.length>0?s.append("weChatIds",JSON.stringify(l)):s.append("accountId",a.page5UserIdImportant)}if(d.length>0){for(u=0;u<d.length;u++)1==d[u].attributes[1].value&&i.push(d[u].attributes[4].value);i.length>0?s.append("groupIds",JSON.stringify(i)):s.append("groupIds",JSON.stringify([]))}s.append("tagId",r),t({method:"POST",url:e.link+"/gcsscrm/group/getAllMsgToGroupPage",data:s,headers:{"Content-Type":void 0},transformRequest:angular.identity}).success(function(o){if(200==o.code){$(".page5-checkbox-toggle-1").removeClass("fa-check-square-o").addClass("fa-square-o"),$(".checkbox-toggle").attr("data","0"),a.initData=o.data.chatrooms,a.initDatacontactCount=o.data.chatRoomCount;for(var s=[],n=0;n<a.initData.length;n++)if(a.initData[n].chatRoomTags.length>0){s.push(a.initData[n].chatRoomTags[0].tagname.split(","));for(var d=[],r=0;r<s.length;r++)d.push(s[r]);a.initData[n].chatRoomTags=d,d=[],s=[]}$(".M-box1").pagination({totalData:a.initDatacontactCount,showData:10,coping:!0,callback:function(o){$(".page5-checkbox-toggle-1").removeClass("fa-check-square-o").addClass("fa-square-o"),$(".checkbox-toggle").attr("data","0");var s={page:o.getCurrent()},n=new FormData,d=$(".isChange"),r=$(".page5-group-group"),l=$(".tag-touch").attr("data"),i=[],c=[];if(void 0==l&&(l=""),d.length>0){for(u=0;u<d.length;u++)1==d[u].attributes[1].value&&i.push(d[u].attributes[4].value);i.length>0?n.append("weChatIds",JSON.stringify(i)):n.append("accountId",a.page5UserIdImportant)}if(r.length>0){for(var u=0;u<r.length;u++)1==r[u].attributes[1].value&&c.push(r[u].attributes[4].value);c.length>0?n.append("groupIds",JSON.stringify(c)):n.append("groupIds",JSON.stringify([]))}n.append("tagId",l),n.append("page",s.page),t({method:"POST",url:e.link+"/gcsscrm/group/getAllMsgToGroupPage",data:n,headers:{"Content-Type":void 0},transformRequest:angular.identity}).success(function(e){if(200==e.code){$(".page5-checkbox-toggle-1").removeClass("fa-check-square-o").addClass("fa-square-o"),$(".checkbox-toggle").attr("data","0"),a.initData=e.data.chatrooms,a.initDatacontactCount=e.data.chatRoomCount;for(var t=[],o=0;o<a.initData.length;o++)if(a.initData[o].chatRoomTags.length>0){t.push(a.initData[o].chatRoomTags[0].tagname.split(","));for(var s=[],n=0;n<t.length;n++)s.push(t[n]);a.initData[o].chatRoomTags=s,s=[],t=[]}setTimeout(function(){var e=$(".blod");for(o=0;o<e.length;o++){var a=o;1==e[o].attributes[0].nodeValue&&$(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),2==e[o].attributes[0].nodeValue&&($(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod2").addClass("ox").css("border","none")),3==e[o].attributes[0].nodeValue&&($(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod2").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod3").addClass("ox").css("border","none")),4==e[o].attributes[0].nodeValue&&($(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod2").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod3").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod4").addClass("ox").css("border","none")),5==e[o].attributes[0].nodeValue&&($(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod2").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod3").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod4").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod5").addClass("ox").css("border","none"))}$('.mailbox-messages input[type="checkbox"]').iCheck({checkboxClass:"icheckbox_flat-blue",radioClass:"iradio_flat-blue"})},40)}})}}),setTimeout(function(){var e=$(".blod");for(n=0;n<e.length;n++){var a=n;1==e[n].attributes[0].nodeValue&&$(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),2==e[n].attributes[0].nodeValue&&($(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod2").addClass("ox").css("border","none")),3==e[n].attributes[0].nodeValue&&($(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod2").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod3").addClass("ox").css("border","none")),4==e[n].attributes[0].nodeValue&&($(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod2").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod3").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod4").addClass("ox").css("border","none")),5==e[n].attributes[0].nodeValue&&($(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod2").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod3").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod4").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod5").addClass("ox").css("border","none"))}$('.mailbox-messages input[type="checkbox"]').iCheck({checkboxClass:"icheckbox_flat-blue",radioClass:"iradio_flat-blue"})},40),a.oneTagFight=!1,$(".tagList").html(""),$(".alert1").show(300).find(".alertCon").html("批量打标签保存成功"),setTimeout(function(){$(".alert1").hide(300)},2e3)}else $(".alert2").show(300).find(".alertCon").html("标签保存失败，请刷新页面或再次登录"),setTimeout(function(){$(".alert2").hide(300)},2e3)})}else if(202==o.code){a.initData=o.data.chatrooms,a.initDatacontactCount=o.data.chatRoomCount;for(var c=[],u=0;u<a.initData.length;u++)if(a.initData[u].chatRoomTags.length>0){c.push(a.initData[u].chatRoomTags[0].tagname.split(","));for(var g=[],b=0;b<c.length;b++)g.push(c[b]);a.initData[u].chatRoomTags=g,g=[],c=[]}$(".M-box1").pagination({totalData:a.initDatacontactCount,showData:10,coping:!0,callback:function(o){$(".page5-checkbox-toggle-1").removeClass("fa-check-square-o").addClass("fa-square-o"),$(".checkbox-toggle").attr("data","0");var s={page:o.getCurrent()},n=new FormData,d=$(".isChange"),r=$(".page5-group-group"),l=$(".tag-touch").attr("data"),i=[],c=[];if(void 0==l&&(l=""),d.length>0){for(u=0;u<d.length;u++)1==d[u].attributes[1].value&&i.push(d[u].attributes[4].value);i.length>0?n.append("weChatIds",JSON.stringify(i)):n.append("accountId",a.page5UserIdImportant)}if(r.length>0){for(var u=0;u<r.length;u++)1==r[u].attributes[1].value&&c.push(r[u].attributes[4].value);c.length>0?n.append("groupIds",JSON.stringify(c)):n.append("groupIds",JSON.stringify([]))}n.append("tagId",l),n.append("page",s.page),t({method:"POST",url:e.link+"/gcsscrm/group/getAllMsgToGroupPage",data:n,headers:{"Content-Type":void 0},transformRequest:angular.identity}).success(function(e){if(200==e.code){$(".page5-checkbox-toggle-1").removeClass("fa-check-square-o").addClass("fa-square-o"),$(".checkbox-toggle").attr("data","0"),a.initData=e.data.chatrooms,a.initDatacontactCount=e.data.chatRoomCount;for(var t=[],o=0;o<a.initData.length;o++)if(a.initData[o].chatRoomTags.length>0){t.push(a.initData[o].chatRoomTags[0].tagname.split(","));for(var s=[],n=0;n<t.length;n++)s.push(t[n]);a.initData[o].chatRoomTags=s,s=[],t=[]}setTimeout(function(){var e=$(".blod");for(o=0;o<e.length;o++){var a=o;1==e[o].attributes[0].nodeValue&&$(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),2==e[o].attributes[0].nodeValue&&($(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod2").addClass("ox").css("border","none")),3==e[o].attributes[0].nodeValue&&($(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod2").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod3").addClass("ox").css("border","none")),4==e[o].attributes[0].nodeValue&&($(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod2").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod3").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod4").addClass("ox").css("border","none")),5==e[o].attributes[0].nodeValue&&($(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod2").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod3").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod4").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod5").addClass("ox").css("border","none"))}$('.mailbox-messages input[type="checkbox"]').iCheck({checkboxClass:"icheckbox_flat-blue",radioClass:"iradio_flat-blue"})},40)}})}}),setTimeout(function(){var e=$(".blod");for(u=0;u<e.length;u++){var a=u;1==e[u].attributes[0].nodeValue&&$(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),2==e[u].attributes[0].nodeValue&&($(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod2").addClass("ox").css("border","none")),3==e[u].attributes[0].nodeValue&&($(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod2").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod3").addClass("ox").css("border","none")),4==e[u].attributes[0].nodeValue&&($(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod2").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod3").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod4").addClass("ox").css("border","none")),5==e[u].attributes[0].nodeValue&&($(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod2").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod3").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod4").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod5").addClass("ox").css("border","none"))}$('.mailbox-messages input[type="checkbox"]').iCheck({checkboxClass:"icheckbox_flat-blue",radioClass:"iradio_flat-blue"})},40),a.oneTagFight=!1,$(".tagList").html(""),$(".alert1").show(300).find(".alertCon").html("批量打标签保存成功"),setTimeout(function(){$(".alert1").hide(300)},2e3)}else 201==o.code?($(".tagList").html(""),$(".alert2").show(300).find(".alertCon").html("您输入的标签已经全部存在，请再次输入"),setTimeout(function(){$(".alert2").hide(300)},2e3)):($(".alert2").show(300).find(".alertCon").html("标签保存失败，请刷新页面或再次登录"),setTimeout(function(){$(".alert2").hide(300)},2e3))})}},a.oneGiveGroup=!1,a.oneFriendIds="",a.giveGroups=function(e){$(".page1-change-block").css("display","none"),$(".page1-change-block-two1").css("display","none"),$(".page1-change-block-two").css("display","none"),$(".page1-change-block-sree").css("display","none"),a.page4One=0,a.GroupNumJilu=0,a.jilukaka=0,a.jiluSree=0,a.moreGiveGroup=!1,a.oneGiveGroup=!0,a.oneTagFight=!1,a.sayGroup=!1,a.allTagFightShow=!1,a.chatAll=!1,a.giveGroup=!1,a.oneFriendIds=e},a.page4oneGroupClosMsg=function(){a.oneGiveGroup=!1},a.page4oneGroupSendMsg=function(){var o=$(".page4-select-on-group option:selected").attr("data"),s=new FormData;a.oneFriendIds1=[],a.oneFriendIds1.push(a.oneFriendIds),s.append("chatRoomIds",JSON.stringify(a.oneFriendIds1)),s.append("groupId",o),t({method:"POST",url:e.link+"/gcsscrm/group/addGrouping",data:s,headers:{"Content-Type":void 0},transformRequest:angular.identity}).success(function(o){if(200==o.code){a.oneGiveGroup=!1,a.allchecks1=[],$(".alert1").show(300).find(".alertCon").html("群组分组成功"),setTimeout(function(){$(".alert1").hide(300)},2e3),a.moreGiveGroup=!1;var s=new FormData,n=$(".isChange"),d=$(".page5-group-group"),r=$(".tag-touch").attr("data"),l=[],i=[];if(void 0==r&&(r=""),n.length>0){for(c=0;c<n.length;c++)1==n[c].attributes[1].value&&l.push(n[c].attributes[4].value);l.length>0?s.append("weChatIds",JSON.stringify(l)):s.append("accountId",a.page5UserIdImportant)}if(d.length>0){for(var c=0;c<d.length;c++)1==d[c].attributes[1].value&&i.push(d[c].attributes[4].value);i.length>0?s.append("groupIds",JSON.stringify(i)):s.append("groupIds",JSON.stringify([]))}s.append("tagId",r),t({method:"POST",url:e.link+"/gcsscrm/group/getAllMsgToGroupPage",data:s,headers:{"Content-Type":void 0},transformRequest:angular.identity}).success(function(o){if(200==o.code){$(".page5-checkbox-toggle-1").removeClass("fa-check-square-o").addClass("fa-square-o"),$(".checkbox-toggle").attr("data","0"),a.initData=o.data.chatrooms,a.initDatacontactCount=o.data.chatRoomCount;for(var s=[],n=0;n<a.initData.length;n++)if(a.initData[n].chatRoomTags.length>0){s.push(a.initData[n].chatRoomTags[0].tagname.split(","));for(var d=[],r=0;r<s.length;r++)d.push(s[r]);a.initData[n].chatRoomTags=d,d=[],s=[]}$(".M-box1").pagination({totalData:a.initDatacontactCount,showData:10,coping:!0,callback:function(o){$(".page5-checkbox-toggle-1").removeClass("fa-check-square-o").addClass("fa-square-o"),$(".checkbox-toggle").attr("data","0");var s={page:o.getCurrent()},n=new FormData,d=$(".isChange"),r=$(".page5-group-group"),l=$(".tag-touch").attr("data"),i=[],c=[];if(void 0==l&&(l=""),d.length>0){for(u=0;u<d.length;u++)1==d[u].attributes[1].value&&i.push(d[u].attributes[4].value);i.length>0?n.append("weChatIds",JSON.stringify(i)):n.append("accountId",a.page5UserIdImportant)}if(r.length>0){for(var u=0;u<r.length;u++)1==r[u].attributes[1].value&&c.push(r[u].attributes[4].value);c.length>0?n.append("groupIds",JSON.stringify(c)):n.append("groupIds",JSON.stringify([]))}n.append("tagId",l),n.append("page",s.page),t({method:"POST",url:e.link+"/gcsscrm/group/getAllMsgToGroupPage",data:n,headers:{"Content-Type":void 0},transformRequest:angular.identity}).success(function(e){if(200==e.code){$(".page5-checkbox-toggle-1").removeClass("fa-check-square-o").addClass("fa-square-o"),$(".checkbox-toggle").attr("data","0"),a.initData=e.data.chatrooms,a.initDatacontactCount=e.data.chatRoomCount;for(var t=[],o=0;o<a.initData.length;o++)if(a.initData[o].chatRoomTags.length>0){t.push(a.initData[o].chatRoomTags[0].tagname.split(","));for(var s=[],n=0;n<t.length;n++)s.push(t[n]);a.initData[o].chatRoomTags=s,s=[],t=[]}setTimeout(function(){var e=$(".blod");for(o=0;o<e.length;o++){var a=o;1==e[o].attributes[0].nodeValue&&$(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),2==e[o].attributes[0].nodeValue&&($(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod2").addClass("ox").css("border","none")),3==e[o].attributes[0].nodeValue&&($(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod2").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod3").addClass("ox").css("border","none")),4==e[o].attributes[0].nodeValue&&($(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod2").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod3").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod4").addClass("ox").css("border","none")),5==e[o].attributes[0].nodeValue&&($(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod2").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod3").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod4").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod5").addClass("ox").css("border","none"))}$('.mailbox-messages input[type="checkbox"]').iCheck({checkboxClass:"icheckbox_flat-blue",radioClass:"iradio_flat-blue"})},40)}})}}),setTimeout(function(){var e=$(".blod");for(n=0;n<e.length;n++){var a=n;1==e[n].attributes[0].nodeValue&&$(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),2==e[n].attributes[0].nodeValue&&($(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod2").addClass("ox").css("border","none")),3==e[n].attributes[0].nodeValue&&($(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod2").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod3").addClass("ox").css("border","none")),4==e[n].attributes[0].nodeValue&&($(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod2").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod3").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod4").addClass("ox").css("border","none")),5==e[n].attributes[0].nodeValue&&($(".blod").eq(a).find(".blod1").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod2").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod3").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod4").addClass("ox").css("border","none"),$(".blod").eq(a).find(".blod5").addClass("ox").css("border","none"))}$('.mailbox-messages input[type="checkbox"]').iCheck({checkboxClass:"icheckbox_flat-blue",radioClass:"iradio_flat-blue"})},40)}})}else $(".alert2").show(300).find(".alertCon").html("群组分组失败"),setTimeout(function(){$(".alert2").hide(300)},2e3)})},a.moreGroupchatroomname="11",a.sayGroup=!1,a.allchecks4=[],a.sayGroupShow=function(){var e=$(".checkData"),t=$(".icheckbox_flat-blue");for(console.log(t),i2=0;i2<t.length;i2++)"true"==t[i2].attributes[1].value&&(a.allchecks4.push(Number(e.eq(i2).attr("data"))),a.jiluSree=0);a.allchecks4.length<=0?($(".alert2").show(300).find(".alertCon").html("请选择需要进行群发消息的群组"),setTimeout(function(){$(".alert2").hide(300)},2e3)):(a.moreGiveGroup=!1,a.oneGiveGroup=!1,a.oneTagFight=!1,a.sayGroup=!0,a.allTagFightShow=!1,a.chatAll=!1,a.giveGroup=!1,$(".page1-change-block-four").css("display","none"),a.jiluFour=0,a.allchecks4=[])},a.page4sayGroupClosMsg=function(){a.sayGroup=!1},a.allchecks5=[],a.page4sayGroupSendMsg=function(){a.sendObj1=new FormData,a.sendObj1.append("file",a.pic);for(var o=$(".checkData"),s=$(".icheckbox_flat-blue"),n=0;n<s.length;n++)"true"==s[n].attributes[1].value&&(a.allchecks5.push(Number(o.eq(n).attr("data"))),a.jiluSree=0);if(a.allchecks5.length<=0)$(".alert2").show(300).find(".alertCon").html("请选择需要进行群发消息的群组"),setTimeout(function(){$(".alert2").hide(300)},2e3);else if(""==$(".FontAndEmjoy6").html())$(".alert2").show(300).find(".alertCon").html("请输入需要进行群发的消息"),setTimeout(function(){$(".alert2").hide(300)},2e3);else{var d=$(".FontAndEmjoy6").html(),r=/alt=[\'\"]?([^\'\"]*)[\'\"]?/i,l=d.match(/<img.*?(?:>|\/>)/g);if(null==l);else{for(var i=[],c=0;c<l.length;c++){var u=l[c].match(r);u[1]&&i.push(u[1])}for(var g=d.match(/<img.*?(?:>|\/>)/g),c=0;c<g.length;c++)d=d.replace(g[c],i[c]);a.sendObj1.append("msg",d),t({method:"POST",url:e.link+"/operate/sendMoments",data:a.sendObj1,headers:{"Content-Type":void 0},transformRequest:angular.identity}).success(function(e){200==e.code?($(".FontAndEmjoy6").html(""),$(".removeImg").css("background",'url("../images/add-pic.png") center no-repeat'),a.pic="",$(".alert1").show(300).find(".alertCon").html("群发消息任务添加完成"),setTimeout(function(){$(".alert1").hide(300)},2e3)):(alert(e.msg),location.reload())})}a.allchecks5=[]}},$(".emjoyDiv-page6").mouseover(function(){$(".emjoyList-page6").css("display","block")}),$(".emjoyDiv-page6").mouseout(function(){$(".emjoyList-page6").css("display","none")});var s=0;$(function(){$("#FontAndEmjoy6").focus(function(){$(this).removeClass("flag1")}),$("#FontAndEmjoy6").blur(function(){$(this).addClass("flag1")})}),$(".emjoyList-page6").on("click","img",function(){if(1==s){var e=$(this).attr("alt");!function(e){var a,t,o=$("#FontAndEmjoy6")[0];if($(o).hasClass("flag1"))if(window.getSelection){if((a=window.getSelection()).getRangeAt&&a.rangeCount){(t=a.getRangeAt(0)).deleteContents();var s=document.createElement("div");s.innerHTML=e;for(var n,d,r=document.createDocumentFragment();n=s.firstChild;)d=r.appendChild(n);t.insertNode(r),d&&((t=t.cloneRange()).setStartAfter(d),t.collapse(!0),a.removeAllRanges(),a.addRange(t))}}else document.selection&&"Control"!=document.selection.type&&($(o).focus(),ierange=document.selection.createRange(),ierange.pasteHTML(e),$(o).focus());else $(o).html(o.innerHTML+e)}("<img src='"+$(this).attr("src")+"'alt='"+e+"'>")}});var n=[],d=-1;$(window).click(function(e){if(d++,window.getSelection){var a=e.srcElement?e.srcElement:e.target;n.push(a.id);-1!=$.inArray("FontAndEmjoy6",n)&&("FontAndEmjoy6"!=a.id?($("#FontAndEmjoy6").addClass("flag1"),s=0,"gg"==a.className?(s=1,$("#FontAndEmjoy6").removeClass("flag1"),"FontAndEmjoy6"==n[d-1]&&(s=1,$("#FontAndEmjoy6").removeClass("flag1"),n[d-1]==a.id&&(s=1,$("#FontAndEmjoy6").removeClass("flag1")))):(s=0,$("#FontAndEmjoy6").addClass("flag1"))):(s=1,$("#FontAndEmjoy6").removeClass("flag1")))}}),$(".falseTime").blur(function(){var e=$(this).val();console.log($(this).val());new RegExp(/^[1-9]\d{3}-(0[1-9]|1[0-2])-(0[1-9]|[1-2][0-9]|3[0-1])$/).test(e)||($(".alert2").show(300).find(".alertCon").html("请输入正确日期格式例如：2017-01-01"),setTimeout(function(){$(".alert2").hide(300)},2e3))})}]);